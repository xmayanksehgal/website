function countUp(t,e,n,i,r,o){for(var s=0,a=["webkit","moz","ms","o"],c=0;a.length>c&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[a[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[c]+"CancelAnimationFrame"]||window[a[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-s)),i=window.setTimeout(function(){t(e+n)},n);return s=e+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),this.options=o||{useEasing:!0,useGrouping:!0,separator:",",decimal:"."},""==this.options.separator&&(this.options.useGrouping=!1),null==this.options.prefix&&(this.options.prefix=""),null==this.options.suffix&&(this.options.suffix="");var l=this;this.d="string"==typeof t?document.getElementById(t):t,this.startVal=Number(e),this.endVal=Number(n),this.countDown=this.startVal>this.endVal?!0:!1,this.startTime=null,this.timestamp=null,this.remaining=null,this.frameVal=this.startVal,this.rAF=null,this.decimals=Math.max(0,i||0),this.dec=Math.pow(10,this.decimals),this.duration=1e3*r||2e3,this.padLeftStrings=["000000","00000","0000","000","00","0",""],this.version=function(){return"1.3.2"},this.printValue=function(t){var e=isNaN(t)?"--":l.formatNumber(t);"INPUT"==l.d.tagName?this.d.value=e:"text"==l.d.tagName?this.d.textContent=e:this.d.innerHTML=e},this.easeOutExpo=function(t,e,n,i){return 1024*n*(-Math.pow(2,-10*t/i)+1)/1023+e},this.count=function(t){null===l.startTime&&(l.startTime=t),l.timestamp=t;var e=t-l.startTime;if(l.remaining=l.duration-e,l.options.useEasing)if(l.countDown){var n=l.easeOutExpo(e,0,l.startVal-l.endVal,l.duration);l.frameVal=l.startVal-n}else l.frameVal=l.easeOutExpo(e,l.startVal,l.endVal-l.startVal,l.duration);else if(l.countDown){var n=(l.startVal-l.endVal)*(e/l.duration);l.frameVal=l.startVal-n}else l.frameVal=l.startVal+(l.endVal-l.startVal)*(e/l.duration);l.frameVal=l.countDown?l.frameVal<l.endVal?l.endVal:l.frameVal:l.frameVal>l.endVal?l.endVal:l.frameVal,l.frameVal=Math.round(l.frameVal*l.dec)/l.dec,l.printValue(l.frameVal),l.duration>e?l.rAF=requestAnimationFrame(l.count):null!=l.callback&&l.callback()},this.start=function(t){return l.callback=t,isNaN(l.endVal)||isNaN(l.startVal)?(console.log("countUp error: startVal or endVal is not a number"),l.printValue()):l.rAF=requestAnimationFrame(l.count),!1},this.stop=function(){cancelAnimationFrame(l.rAF)},this.reset=function(){l.startTime=null,l.startVal=e,cancelAnimationFrame(l.rAF),l.printValue(l.startVal)},this.resume=function(){l.stop(),l.startTime=null,l.duration=l.remaining,l.startVal=l.frameVal,requestAnimationFrame(l.count)},this.formatNumber=function(t){t=t.toFixed(l.decimals),t+="";var e,n,i,r;if(e=t.split("."),n=e[0],i=e.length>1?l.options.decimal+e[1]:"",r=/(\d+)(\d{3})/,l.options.useGrouping)for(;r.test(n);)n=n.replace(r,"$1"+l.options.separator+"$2");return l.padLeftStrings[t.length]+l.options.prefix+n+i+l.options.suffix},l.printValue(l.startVal)}function cn(t,e){if("c"==e)var n=t.children,i="chidren";else{if("s"!=e)return console.warn("cn : no parameter"),void 0;var n=t.siblings,i="siblings"}console.log("List of "+i+" for "+t.name+" ("+Object.keys(n).length+")");for(var r in n){var o=n[r];console.log(o.name)}}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=Z.type(t);return"function"===n||Z.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(Z.isFunction(e))return Z.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return Z.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(ae.test(e))return Z.filter(e,t,n);e=Z.filter(e,t)}return Z.grep(t,function(t){return W.call(e,t)>=0!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=pe[t]={};return Z.each(t.match(fe)||[],function(t,n){e[n]=!0}),e}function s(){J.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function c(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(_e,"-$1").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?Z.parseJSON(n):n}catch(r){}me.set(t,e,n)}else n=void 0;return n}function l(){return!0}function u(){return!1}function h(){try{return J.activeElement}catch(t){}}function d(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Le.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=0,i=t.length;i>n;n++)ye.set(t[n],"globalEval",!e||ye.get(e[n],"globalEval"))}function v(t,e){var n,i,r,o,s,a,c,l;if(1===e.nodeType){if(ye.hasData(t)&&(o=ye.access(t),s=ye.set(e,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)Z.event.add(e,r,l[r][n])}me.hasData(t)&&(a=me.access(t),c=Z.extend({},a),me.set(e,c))}}function y(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],n):n}function m(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ce.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function b(e,n){var i,r=Z(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(r[0]))?i.display:Z.css(r[0],"display");return r.detach(),o}function _(t){var e=J,n=Me[t];return n||(n=b(t,e),"none"!==n&&n||(Ie=(Ie||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ie[0].contentDocument,e.write(),e.close(),n=b(t,e),Ie.detach()),Me[t]=n),n}function w(t,e,n){var i,r,o,s,a=t.style;return n=n||ze(t),n&&(s=n.getPropertyValue(e)||n[e]),n&&(""!==s||Z.contains(t.ownerDocument,t)||(s=Z.style(t,e)),$e.test(s)&&He.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function S(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,r=Ve.length;r--;)if(e=Ve[r]+n,e in t)return e;return i}function C(t,e,n){var i=Ue.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function k(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(t,n+xe[o],!0,r)),i?("content"===n&&(s-=Z.css(t,"padding"+xe[o],!0,r)),"margin"!==n&&(s-=Z.css(t,"border"+xe[o]+"Width",!0,r))):(s+=Z.css(t,"padding"+xe[o],!0,r),"padding"!==n&&(s+=Z.css(t,"border"+xe[o]+"Width",!0,r)));return s}function T(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=ze(t),s="border-box"===Z.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=w(t,e,o),(0>r||null==r)&&(r=t.style[e]),$e.test(r))return r;i=s&&(X.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+k(t,e,n||(s?"border":"content"),i,o)+"px"}function E(t,e){for(var n,i,r,o=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(o[s]=ye.get(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Se(i)&&(o[s]=ye.access(i,"olddisplay",_(i.nodeName)))):(r=Se(i),"none"===n&&r||ye.set(i,"olddisplay",r?n:Z.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function A(t,e,n,i,r){return new A.prototype.init(t,e,n,i,r)}function K(){return setTimeout(function(){Xe=void 0}),Xe=Z.now()}function P(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)n=xe[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function N(t,e,n){for(var i,r=(nn[e]||[]).concat(nn["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,e,t))return i}function j(t,e,n){var i,r,o,s,a,c,l,u,h=this,d={},f=t.style,p=t.nodeType&&Se(t),g=ye.get(t,"fxshow");n.queue||(a=Z._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,c=a.empty.fire,a.empty.fire=function(){a.unqueued||c()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Z.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],l=Z.css(t,"display"),u="none"===l?ye.get(t,"olddisplay")||_(t.nodeName):l,"inline"===u&&"none"===Z.css(t,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],Qe.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;p=!0}d[i]=g&&g[i]||Z.style(t,i)}else l=void 0;if(Z.isEmptyObject(d))"inline"===("none"===l?_(t.nodeName):l)&&(f.display=l);else{g?"hidden"in g&&(p=g.hidden):g=ye.access(t,"fxshow",{}),o&&(g.hidden=!p),p?Z(t).show():h.done(function(){Z(t).hide()}),h.done(function(){var e;ye.remove(t,"fxshow");for(e in d)Z.style(t,e,d[e])});for(i in d)s=N(p?g[i]:0,i,h),i in g||(g[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function O(t,e){var n,i,r,o,s;for(n in t)if(i=Z.camelCase(n),r=e[i],o=t[n],Z.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),s=Z.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function D(t,e,n){var i,r,o=0,s=en.length,a=Z.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var e=Xe||K(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,o=1-i,s=0,c=l.tweens.length;c>s;s++)l.tweens[s].run(o);return a.notifyWith(t,[l,o,n]),1>o&&c?n:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Xe||K(),duration:n.duration,tweens:[],createTween:function(e,n){var i=Z.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),u=l.props;for(O(u,l.opts.specialEasing);s>o;o++)if(i=en[o].call(l,t,u,l.opts))return i;return Z.map(u,N,l),Z.isFunction(l.opts.start)&&l.opts.start.call(t,l),Z.fx.timer(Z.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(fe)||[];if(Z.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function L(t,e,n,i){function r(a){var c;return o[a]=!0,Z.each(t[a]||[],function(t,a){var l=a(e,n,i);return"string"!=typeof l||s||o[l]?s?!(c=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),c}var o={},s=t===xn;return r(e.dataTypes[0])||!o["*"]&&r("*")}function F(t,e){var n,i,r=Z.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&Z.extend(!0,t,i),t}function B(t,e,n){for(var i,r,o,s,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function I(t,e,n,i){var r,o,s,a,c,l={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(s=l[c+" "+o]||l["* "+o],!s)for(r in l)if(a=r.split(" "),a[1]===o&&(s=l[c+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[r]:l[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+c+" to "+o}}}return{state:"success",data:e}}function M(t,e,n,i){var r;if(Z.isArray(e))Z.each(e,function(e,r){n||Tn.test(t)?i(t,r):M(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==Z.type(e))i(t,e);else for(r in e)M(t+"["+r+"]",e[r],n,i)}function H(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var $=[],z=$.slice,G=$.concat,U=$.push,W=$.indexOf,q={},Y=q.toString,V=q.hasOwnProperty,X={},J=t.document,Q="2.1.1",Z=function(t,e){return new Z.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ne=/-([\da-z])/gi,ie=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return z.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:z.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:$.sort,splice:$.splice},Z.extend=Z.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===c&&(s=this,a--);c>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(l&&i&&(Z.isPlainObject(i)||(r=Z.isArray(i)))?(r?(r=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[e]=Z.extend(l,o,i)):void 0!==i&&(s[e]=i));return s},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==Z.type(t)||t.nodeType||Z.isWindow(t)?!1:t.constructor&&!V.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?q[Y.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ne,ie)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,s=t.length,a=n(t);if(i){if(a)for(;s>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?Z.merge(i,"string"==typeof t?[t]:t):U.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:W.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,s=t.length,a=!n;s>o;o++)i=!e(t[o],o),i!==a&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,s=t.length,a=n(t),c=[];if(a)for(;s>o;o++)r=e(t[o],o,i),null!=r&&c.push(r);else for(o in t)r=e(t[o],o,i),null!=r&&c.push(r);return G.apply([],c)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),Z.isFunction(t)?(i=z.call(arguments,2),r=function(){return t.apply(e||this,i.concat(z.call(arguments)))},r.guid=t.guid=t.guid||Z.guid++,r):void 0},now:Date.now,support:X}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){q["[object "+e+"]"]=e.toLowerCase()});var re=function(t){function e(t,e,n,i){var r,o,s,a,c,l,h,f,p,g;if((e?e.ownerDocument||e:M)!==j&&N(e),e=e||j,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(D&&!i){if(r=me.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&B(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(s)),n}if(w.qsa&&(!R||!R.test(t))){if(f=h=I,p=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=k(t),(h=e.getAttribute("id"))?f=h.replace(_e,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",c=l.length;c--;)l[c]=f+d(l[c]);p=be.test(t)&&u(e.parentNode)||e,g=l.join(",")}if(g)try{return Z.apply(n,p.querySelectorAll(g)),n}catch(v){}finally{h||e.removeAttribute("id")}}}return E(t.replace(ce,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[I]=!0,t}function r(t){var e=j.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)x.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function c(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function u(t){return t&&typeof t.getElementsByTagName!==q&&t}function h(){}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=$++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,c,l=[H,o];if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(c=e[I]||(e[I]={}),(a=c[i])&&a[0]===H&&a[1]===o)return l[2]=a[2];if(c[i]=l,l[2]=t(e,n,s))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function v(t,e,n,i,r){for(var o,s=[],a=0,c=t.length,l=null!=e;c>a;a++)(o=t[a])&&(!n||n(o,i,r))&&(s.push(o),l&&e.push(a));return s}function y(t,e,n,r,o,s){return r&&!r[I]&&(r=y(r)),o&&!o[I]&&(o=y(o,s)),i(function(i,s,a,c){var l,u,h,d=[],f=[],p=s.length,y=i||g(e||"*",a.nodeType?[a]:a,[]),m=!t||!i&&e?y:v(y,d,t,a,c),b=n?o||(i?t:p||r)?[]:s:m;if(n&&n(m,b,a,c),r)for(l=v(b,f),r(l,[],a,c),u=l.length;u--;)(h=l[u])&&(b[f[u]]=!(m[f[u]]=h));if(i){if(o||t){if(o){for(l=[],u=b.length;u--;)(h=b[u])&&l.push(m[u]=h);o(null,b=[],l,c)}for(u=b.length;u--;)(h=b[u])&&(l=o?ee.call(i,h):d[u])>-1&&(i[l]=!(s[l]=h))}}else b=v(b===s?b.splice(p,b.length):b),o?o(null,s,b,c):Z.apply(s,b)})}function m(t){for(var e,n,i,r=t.length,o=x.relative[t[0].type],s=o||x.relative[" "],a=o?1:0,c=f(function(t){return t===e},s,!0),l=f(function(t){return ee.call(e,t)>-1},s,!0),u=[function(t,n,i){return!o&&(i||n!==A)||((e=n).nodeType?c(t,n,i):l(t,n,i))}];r>a;a++)if(n=x.relative[t[a].type])u=[f(p(u),n)];else{if(n=x.filter[t[a].type].apply(null,t[a].matches),n[I]){for(i=++a;r>i&&!x.relative[t[i].type];i++);return y(a>1&&p(u),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ce,"$1"),n,i>a&&m(t.slice(a,i)),r>i&&m(t=t.slice(i)),r>i&&d(t))}u.push(n)}return p(u)}function b(t,n){var r=n.length>0,o=t.length>0,s=function(i,s,a,c,l){var u,h,d,f=0,p="0",g=i&&[],y=[],m=A,b=i||o&&x.find.TAG("*",l),_=H+=null==m?1:Math.random()||.1,w=b.length;for(l&&(A=s!==j&&s);p!==w&&null!=(u=b[p]);p++){if(o&&u){for(h=0;d=t[h++];)if(d(u,s,a)){c.push(u);break}l&&(H=_)}r&&((u=!d&&u)&&f--,i&&g.push(u))}if(f+=p,r&&p!==f){for(h=0;d=n[h++];)d(g,y,s,a);if(i){if(f>0)for(;p--;)g[p]||y[p]||(y[p]=J.call(c));y=v(y)}Z.apply(c,y),l&&!i&&y.length>0&&f+n.length>1&&e.uniqueSort(c)}return l&&(H=_,A=m),g};return r?i(s):s}var _,w,x,S,C,k,T,E,A,K,P,N,j,O,D,R,L,F,B,I="sizzle"+-new Date,M=t.document,H=0,$=0,z=n(),G=n(),U=n(),W=function(t,e){return t===e&&(P=!0),0},q="undefined",Y=1<<31,V={}.hasOwnProperty,X=[],J=X.pop,Q=X.push,Z=X.push,te=X.slice,ee=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),se="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ie+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",ce=RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=RegExp("^"+ie+"*,"+ie+"*"),ue=RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),he=RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=RegExp(ae),fe=RegExp("^"+oe+"$"),pe={ID:RegExp("^#("+re+")"),CLASS:RegExp("^\\.("+re+")"),TAG:RegExp("^("+re.replace("w","w*")+")"),ATTR:RegExp("^"+se),PSEUDO:RegExp("^"+ae),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:RegExp("^(?:"+ne+")$","i"),needsContext:RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,_e=/'|\\/g,we=RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{Z.apply(X=te.call(M.childNodes),M.childNodes),X[M.childNodes.length].nodeType}catch(Se){Z={apply:X.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},N=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:M,i=n.defaultView;return n!==j&&9===n.nodeType&&n.documentElement?(j=n,O=n.documentElement,D=!C(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){N()},!1):i.attachEvent&&i.attachEvent("onunload",function(){N()})),w.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=ye.test(n.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),w.getById=r(function(t){return O.appendChild(t).id=I,!n.getElementsByName||!n.getElementsByName(I).length}),w.getById?(x.find.ID=function(t,e){if(typeof e.getElementById!==q&&D){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(we,xe);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(we,xe);return function(t){var n=typeof t.getAttributeNode!==q&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==q?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=w.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==q&&D?e.getElementsByClassName(t):void 0},L=[],R=[],(w.qsa=ye.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&R.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||R.push(":checked")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(w.matchesSelector=ye.test(F=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){w.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),L.push("!=",ae)}),R=R.length&&RegExp(R.join("|")),L=L.length&&RegExp(L.join("|")),e=ye.test(O.compareDocumentPosition),B=e||ye.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return P=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!w.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===M&&B(M,t)?-1:e===n||e.ownerDocument===M&&B(M,e)?1:K?ee.call(K,t)-ee.call(K,e):0:4&i?-1:1)}:function(t,e){if(t===e)return P=!0,0;var i,r=0,o=t.parentNode,a=e.parentNode,c=[t],l=[e];if(!o||!a)return t===n?-1:e===n?1:o?-1:a?1:K?ee.call(K,t)-ee.call(K,e):0;if(o===a)return s(t,e);for(i=t;i=i.parentNode;)c.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;c[r]===l[r];)r++;return r?s(c[r],l[r]):c[r]===M?-1:l[r]===M?1:0},n):j},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==j&&N(t),n=n.replace(he,"='$1']"),!(!w.matchesSelector||!D||L&&L.test(n)||R&&R.test(n)))try{var i=F.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,j,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==j&&N(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==j&&N(t);var n=x.attrHandle[e.toLowerCase()],i=n&&V.call(x.attrHandle,e.toLowerCase())?n(t,e,!D):void 0;return void 0!==i?i:w.attributes||!D?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(P=!w.detectDuplicates,K=!w.sortStable&&t.slice(0),t.sort(W),P){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return K=null,t},S=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,xe),t[3]=(t[3]||t[4]||t[5]||"").replace(we,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&de.test(n)&&(e=k(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==q&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,d,f,p,g=o!==s?"nextSibling":"previousSibling",v=e.parentNode,y=a&&e.nodeName.toLowerCase(),m=!c&&!a;if(v){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&m){for(u=v[I]||(v[I]={}),l=u[t]||[],f=l[0]===H&&l[1],d=l[0]===H&&l[2],h=f&&v.childNodes[f];h=++f&&h&&h[g]||(d=f=0)||p.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[H,f,d];break}}else if(m&&(l=(e[I]||(e[I]={}))[t])&&l[0]===H)d=l[1];else for(;(h=++f&&h&&h[g]||(d=f=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++d||(m&&((h[I]||(h[I]={}))[t]=[H,d]),h!==e)););return d-=r,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(t,n){var r,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[I]?o(n):o.length>1?(r=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),s=r.length;s--;)i=ee.call(t,r[s]),t[i]=!(e[i]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=T(t.replace(ce,"$1"));return r[I]?i(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(t){return fe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,xe).toLowerCase(),function(e){var n;do if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(6>t.nodeType)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return ve.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())
},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})x.pseudos[_]=c(_);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,k=e.tokenize=function(t,n){var i,r,o,s,a,c,l,u=G[t+" "];if(u)return n?0:u.slice(0);for(a=t,c=[],l=x.preFilter;a;){(!i||(r=le.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),c.push(o=[])),i=!1,(r=ue.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ce," ")}),a=a.slice(i.length));for(s in x.filter)!(r=pe[s].exec(a))||l[s]&&!(r=l[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):G(t,c).slice(0)},T=e.compile=function(t,e){var n,i=[],r=[],o=U[t+" "];if(!o){for(e||(e=k(t)),n=e.length;n--;)o=m(e[n]),o[I]?i.push(o):r.push(o);o=U(t,b(r,i)),o.selector=t}return o},E=e.select=function(t,e,n,i){var r,o,s,a,c,l="function"==typeof t&&t,h=!i&&k(t=l.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===e.nodeType&&D&&x.relative[o[1].type]){if(e=(x.find.ID(s.matches[0].replace(we,xe),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pe.needsContext.test(t)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((c=x.find[a])&&(i=c(s.matches[0].replace(we,xe),be.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return Z.apply(n,i),n;break}}return(l||T(t,h))(i,e,!D,n,be.test(t)&&u(e.parentNode)||e),n},w.sortStable=I.split("").sort(W).join("")===I,w.detectDuplicates=!!P,N(),w.sortDetached=r(function(t){return 1&t.compareDocumentPosition(j.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);Z.find=re,Z.expr=re.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=re.uniqueSort,Z.text=re.getText,Z.isXMLDoc=re.isXML,Z.contains=re.contains;var oe=Z.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?Z.find.matchesSelector(i,t)?[i]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;n>e;e++)if(Z.contains(r[e],this))return!0}));for(e=0;n>e;e++)Z.find(t,r[e],i);return i=this.pushStack(n>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&oe.test(t)?Z(t):t||[],!1).length}});var ce,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=Z.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:le.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ce).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),se.test(n[1])&&Z.isPlainObject(e))for(n in e)Z.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return i=J.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?ce.ready!==void 0?ce.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};ue.prototype=Z.fn,ce=Z(J);var he=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&Z(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Z.fn.extend({has:function(t){var e=Z(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=oe.test(t)||"string"!=typeof t?Z(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(t){return t?"string"==typeof t?W.call(Z(t),this[0]):W.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Z.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Z.dir(t,"previousSibling",n)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(n,i){var r=Z.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),this.length>1&&(de[t]||Z.unique(r),he.test(t)&&r.reverse()),this.pushStack(r)}});var fe=/\S+/g,pe={};Z.Callbacks=function(t){t="string"==typeof t?pe[t]||o(t):Z.extend({},t);var e,n,i,r,s,a,c=[],l=!t.once&&[],u=function(o){for(e=t.memory&&o,n=!0,a=r||0,r=0,s=c.length,i=!0;c&&s>a;a++)if(c[a].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}i=!1,c&&(l?l.length&&u(l.shift()):e?c=[]:h.disable())},h={add:function(){if(c){var n=c.length;!function o(e){Z.each(e,function(e,n){var i=Z.type(n);"function"===i?t.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=c.length:e&&(r=n,u(e))}return this},remove:function(){return c&&Z.each(arguments,function(t,e){for(var n;(n=Z.inArray(e,c,n))>-1;)c.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(t){return t?Z.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=l=e=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,e||h.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!c||n&&!l||(e=e||[],e=[t,e.slice?e.slice():e],i?l.push(e):u(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(n){Z.each(e,function(e,o){var s=Z.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,i):i}},r={};return i.pipe=i.then,Z.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=z.call(arguments),s=o.length,a=1!==s||t&&Z.isFunction(t.promise)?s:0,c=1===a?t:Z.Deferred(),l=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?z.call(arguments):r,i===e?c.notifyWith(n,i):--a||c.resolveWith(n,i)}};if(s>1)for(e=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&Z.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,e)):--a;return a||c.resolveWith(i,o),c.promise()}});var ge;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(ge.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(e){return ge||(ge=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1))),ge.promise(e)},Z.ready.promise();var ve=Z.access=function(t,e,n,i,r,o,s){var a=0,c=t.length,l=null==n;if("object"===Z.type(n)){r=!0;for(a in n)Z.access(t,e,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,Z.isFunction(i)||(s=!0),l&&(s?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(Z(t),n)})),e))for(;c>a;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):c?e(t[0],n):o};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=a.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,Z.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),o=this.cache[r];if("string"==typeof e)o[e]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[r],e);else for(i in e)o[i]=e[i];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,Z.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,r,o=this.key(t),s=this.cache[o];if(void 0===e)this.cache[o]={};else{Z.isArray(e)?i=e.concat(e.map(Z.camelCase)):(r=Z.camelCase(e),e in s?i=[e,r]:(i=r,i=i in s?[i]:i.match(fe)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ye=new a,me=new a,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_e=/([A-Z])/g;Z.extend({hasData:function(t){return me.hasData(t)||ye.hasData(t)},data:function(t,e,n){return me.access(t,e,n)},removeData:function(t,e){me.remove(t,e)},_data:function(t,e,n){return ye.access(t,e,n)},_removeData:function(t,e){ye.remove(t,e)}}),Z.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=me.get(o),1===o.nodeType&&!ye.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),c(o,i,r[i])));ye.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){me.set(this,t)}):ve(this,function(e){var n,i=Z.camelCase(t);if(o&&void 0===e){if(n=me.get(o,t),void 0!==n)return n;if(n=me.get(o,i),void 0!==n)return n;if(n=c(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=me.get(this,i);me.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&me.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){me.remove(this,t)})}}),Z.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=ye.get(t,e),n&&(!i||Z.isArray(n)?i=ye.access(t,e,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Z.queue(t,e),i=n.length,r=n.shift(),o=Z._queueHooks(t,e),s=function(){Z.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ye.get(t,n)||ye.access(t,n,{empty:Z.Callbacks("once memory").add(function(){ye.remove(t,[e+"queue",n])})})}}),Z.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),n>arguments.length?Z.queue(this[0],t):void 0===e?this:this.each(function(){var n=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=Z.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=ye.get(o[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],Se=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},Ce=/^(?:checkbox|radio)$/i;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),X.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ke="undefined";X.focusinBubbles="onfocusin"in t;var Te=/^key/,Ee=/^(?:mouse|pointer|contextmenu)|click/,Ae=/^(?:focusinfocus|focusoutblur)$/,Ke=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,n,i,r){var o,s,a,c,l,u,h,d,f,p,g,v=ye.get(t);if(v)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Z.guid++),(c=v.events)||(c=v.events={}),(s=v.handle)||(s=v.handle=function(e){return typeof Z!==ke&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(fe)||[""],l=e.length;l--;)a=Ke.exec(e[l])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f&&(h=Z.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=Z.event.special[f]||{},u=Z.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=c[f])||(d=c[f]=[],d.delegateCount=0,h.setup&&h.setup.call(t,i,p,s)!==!1||t.addEventListener&&t.addEventListener(f,s,!1)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),Z.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,s,a,c,l,u,h,d,f,p,g,v=ye.hasData(t)&&ye.get(t);if(v&&(c=v.events)){for(e=(e||"").match(fe)||[""],l=e.length;l--;)if(a=Ke.exec(e[l])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f){for(h=Z.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=c[f]||[],a=a[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&h.teardown.call(t,p,v.handle)!==!1||Z.removeEvent(t,f,v.handle),delete c[f])}else for(f in c)Z.event.remove(t,f+e[l],n,i,!0);Z.isEmptyObject(c)&&(delete v.handle,ye.remove(t,"events"))}},trigger:function(e,n,i,r){var o,s,a,c,l,u,h,d=[i||J],f=V.call(e,"type")?e.type:e,p=V.call(e,"namespace")?e.namespace.split("."):[];if(s=a=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Ae.test(f+Z.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),l=0>f.indexOf(":")&&"on"+f,e=e[Z.expando]?e:new Z.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:Z.makeArray(n,[e]),h=Z.event.special[f]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!Z.isWindow(i)){for(c=h.delegateType||f,Ae.test(c+f)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(i.ownerDocument||J)&&d.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=d[o++])&&!e.isPropagationStopped();)e.type=o>1?c:h.bindType||f,u=(ye.get(s,"events")||{})[e.type]&&ye.get(s,"handle"),u&&u.apply(s,n),u=l&&s[l],u&&u.apply&&Z.acceptData(s)&&(e.result=u.apply(s,n),e.result===!1&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Z.acceptData(i)||l&&Z.isFunction(i[f])&&!Z.isWindow(i)&&(a=i[l],a&&(i[l]=null),Z.event.triggered=f,i[f](),Z.event.triggered=void 0,a&&(i[l]=a)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,n,i,r,o,s=[],a=z.call(arguments),c=(ye.get(this,"events")||{})[t.type]||[],l=Z.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(s=Z.event.handlers.call(this,t,c),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,i=((Z.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,s=[],a=e.delegateCount,c=t.target;if(a&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==t.type){for(i=[],n=0;a>n;n++)o=e[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Z(r,this).index(c)>=0:Z.find(r,this,null,[c]).length),i[r]&&i.push(o);i.length&&s.push({elem:c,handlers:i})}return e.length>a&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||J,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ee.test(r)?this.mouseHooks:Te.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new Z.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=Z.extend(new Z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,e):Z.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:u):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=l,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!Z.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),X.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=ye.access(i,e);r||i.addEventListener(t,n,!0),ye.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ye.access(i,e)-1;r?ye.access(i,e,r):(i.removeEventListener(t,n,!0),ye.remove(i,e))}}}),Z.fn.extend({on:function(t,e,n,i,r){var o,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=u;else if(!i)return this;return 1===r&&(o=i,i=function(t){return Z().off(t),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,Z(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=u),this.each(function(){Z.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Z.event.trigger(t,e,n,!0):void 0}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ne=/<([\w:]+)/,je=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^$|\/(?:java|ecma)script/i,Le=/^true\/(.*)/,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td,Z.extend({clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),c=Z.contains(t.ownerDocument,t);if(!(X.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(s=y(a),o=y(t),i=0,r=o.length;r>i;i++)m(o[i],s[i]);if(e)if(n)for(o=o||y(t),s=s||y(a),i=0,r=o.length;r>i;i++)v(o[i],s[i]);else v(t,a);return s=y(a,"script"),s.length>0&&g(s,!c&&y(t,"script")),a},buildFragment:function(t,e,n,i){for(var r,o,s,a,c,l,u=e.createDocumentFragment(),h=[],d=0,f=t.length;f>d;d++)if(r=t[d],r||0===r)if("object"===Z.type(r))Z.merge(h,r.nodeType?[r]:r);else if(je.test(r)){for(o=o||u.appendChild(e.createElement("div")),s=(Ne.exec(r)||["",""])[1].toLowerCase(),a=Be[s]||Be._default,o.innerHTML=a[1]+r.replace(Pe,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;Z.merge(h,o.childNodes),o=u.firstChild,o.textContent=""}else h.push(e.createTextNode(r));for(u.textContent="",d=0;r=h[d++];)if((!i||-1===Z.inArray(r,i))&&(c=Z.contains(r.ownerDocument,r),o=y(u.appendChild(r),"script"),c&&g(o),n))for(l=0;r=o[l++];)Re.test(r.type||"")&&n.push(r);return u},cleanData:function(t){for(var e,n,i,r,o=Z.event.special,s=0;void 0!==(n=t[s]);s++){if(Z.acceptData(n)&&(r=n[ye.expando],r&&(e=ye.cache[r]))){if(e.events)for(i in e.events)o[i]?Z.event.remove(n,i):Z.removeEvent(n,i,e.handle);ye.cache[r]&&delete ye.cache[r]}delete me.cache[n[me.expando]]}}}),Z.fn.extend({text:function(t){return ve(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?Z.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||Z.cleanData(y(n)),n.parentNode&&(e&&Z.contains(n.ownerDocument,n)&&g(y(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(y(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return ve(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Oe.test(t)&&!Be[(Ne.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Pe,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(Z.cleanData(y(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(y(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=G.apply([],t);var n,i,r,o,s,a,c=0,l=this.length,u=this,h=l-1,d=t[0],g=Z.isFunction(d);if(g||l>1&&"string"==typeof d&&!X.checkClone&&De.test(d))return this.each(function(n){var i=u.eq(n);g&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(l&&(n=Z.buildFragment(t,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Z.map(y(n,"script"),f),o=r.length;l>c;c++)s=n,c!==h&&(s=Z.clone(s,!0,!0),o&&Z.merge(r,y(s,"script"))),e.call(this[c],s,c);if(o)for(a=r[r.length-1].ownerDocument,Z.map(r,p),c=0;o>c;c++)s=r[c],Re.test(s.type||"")&&!ye.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Fe,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var n,i=[],r=Z(t),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(r[s])[e](n),U.apply(i,n.get());return this.pushStack(i)}});var Ie,Me={},He=/^margin/,$e=RegExp("^("+we+")(?!px)[a-z%]+$","i"),ze=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var e=t.getComputedStyle(s,null);n="1%"!==e.top,i="4px"===e.width,r.removeChild(o)}var n,i,r=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),t.getComputedStyle&&Z.extend(X,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},reliableMarginRight:function(){var e,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),r.removeChild(o),e}}))}(),Z.swap=function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=s[o];return r};var Ge=/^(none|table(?!-c[ea]).+)/,Ue=RegExp("^("+we+")(.*)$","i"),We=RegExp("^([+-])=("+we+")","i"),qe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=w(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=Z.camelCase(e),c=t.style;return e=Z.cssProps[a]||(Z.cssProps[a]=S(c,a)),s=Z.cssHooks[e]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:c[e]:(o=typeof n,"string"===o&&(r=We.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Z.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),X.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(c[e]=n)),void 0)}},css:function(t,e,n,i){var r,o,s,a=Z.camelCase(e);return e=Z.cssProps[a]||(Z.cssProps[a]=S(t.style,a)),s=Z.cssHooks[e]||Z.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=w(t,e,i)),"normal"===r&&e in Ye&&(r=Ye[e]),""===n||n?(o=parseFloat(r),n===!0||Z.isNumeric(o)?o||0:r):r}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,n,i){return n?Ge.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,qe,function(){return T(t,e,i)}):T(t,e,i):void 0},set:function(t,n,i){var r=i&&ze(t);return C(t,n,i?k(t,e,i,"border-box"===Z.css(t,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=x(X.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},w,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+xe[i]+e]=o[i]||o[i-2]||o[0];return r}},He.test(t)||(Z.cssHooks[t+e].set=C)}),Z.fn.extend({css:function(t,e){return ve(this,function(t,e,n){var i,r,o={},s=0;if(Z.isArray(e)){for(i=ze(t),r=e.length;r>s;s++)o[e[s]]=Z.css(t,e[s],!1,i);return o}return void 0!==n?Z.style(t,e,n):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Se(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=A,A.prototype={constructor:A,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,n=A.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this
}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=A.prototype.init,Z.fx.step={};var Xe,Je,Qe=/^(?:toggle|show|hide)$/,Ze=RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),tn=/queueHooks$/,en=[j],nn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=Ze.exec(e),o=r&&r[3]||(Z.cssNumber[t]?"":"px"),s=(Z.cssNumber[t]||"px"!==o&&+i)&&Ze.exec(Z.css(n.elem,t)),a=1,c=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,Z.style(n.elem,t,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--c)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Z.Animation=Z.extend(D,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],nn[n]=nn[n]||[],nn[n].unshift(e)},prefilter:function(t,e){e?en.unshift(t):en.push(t)}}),Z.speed=function(t,e,n){var i=t&&"object"==typeof t?Z.extend({},t):{complete:n||!n&&e||Z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Z.isFunction(e)&&e};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Se).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=Z.isEmptyObject(t),o=Z.speed(e,n,i),s=function(){var e=D(this,Z.extend({},t),o);(r||ye.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=Z.timers,s=ye.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&tn.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));(e||!n)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ye.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=Z.timers,s=i?i.length:0;for(n.finish=!0,Z.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var n=Z.fn[e];Z.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(P(e,!0),t,i,r)}}),Z.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,n=Z.timers;for(Xe=Z.now();n.length>e;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Z.fx.stop(),Xe=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),n=e.appendChild(J.createElement("option"));t.type="checkbox",X.checkOn=""!==t.value,X.optSelected=n.selected,e.disabled=!0,X.optDisabled=!n.disabled,t=J.createElement("input"),t.value="t",t.type="radio",X.radioValue="t"===t.value}();var rn,on,sn=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return ve(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,n){var i,r,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?typeof t.getAttribute===ke?Z.prop(t,e,n):(1===o&&Z.isXMLDoc(t)||(e=e.toLowerCase(),i=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?on:rn)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=Z.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):void Z.removeAttr(t,e)):void 0},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(fe);if(o&&1===t.nodeType)for(;n=o[r++];)i=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!X.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),on={set:function(t,e,n){return e===!1?Z.removeAttr(t,n):t.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var n=sn[e]||Z.find.attr;sn[e]=function(t,e,i){var r,o;return i||(o=sn[e],sn[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,sn[e]=o),r}});var an=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return ve(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,o,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?(o=1!==s||!Z.isXMLDoc(t),o&&(e=Z.propFix[e]||e,r=Z.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||an.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),X.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var cn=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,n,i,r,o,s,a="string"==typeof t&&t,c=0,l=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(fe)||[];l>c;c++)if(n=this[c],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(cn," "):" ")){for(o=0;r=e[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");s=Z.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,i,r,o,s,a=0===arguments.length||"string"==typeof t&&t,c=0,l=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(fe)||[];l>c;c++)if(n=this[c],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(cn," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=t?Z.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(Z.isFunction(t)?function(n){Z(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,r=Z(this),o=t.match(fe)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===ke||"boolean"===n)&&(this.className&&ye.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ye.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(cn," ").indexOf(e)>=0)return!0;return!1}});var ln=/\r/g;Z.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=Z.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,Z(this).val()):t,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ln,""):null==n?"":n)):void 0}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:i.length,c=0>r?a:o?r:0;a>c;c++)if(n=i[c],!(!n.selected&&c!==r||(X.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(e=Z(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=Z.makeArray(e),s=r.length;s--;)i=r[s],(i.selected=Z.inArray(i.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},X.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var un=Z.now(),hn=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(i){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var dn,fn,pn=/#.*$/,gn=/([?&])_=[^&]*/,vn=/^(.*?):[ \t]*([^\r\n]*)$/gm,yn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mn=/^(?:GET|HEAD)$/,bn=/^\/\//,_n=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wn={},xn={},Sn="*/".concat("*");try{fn=location.href}catch(Cn){fn=J.createElement("a"),fn.href="",fn=fn.href}dn=_n.exec(fn.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fn,type:"GET",isLocal:yn.test(dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?F(F(t,Z.ajaxSettings),e):F(Z.ajaxSettings,t)},ajaxPrefilter:R(wn),ajaxTransport:R(xn),ajax:function(t,e){function n(t,e,n,s){var c,u,y,m,_,x=e;2!==b&&(b=2,a&&clearTimeout(a),i=void 0,o=s||"",w.readyState=t>0?4:0,c=t>=200&&300>t||304===t,n&&(m=B(h,w,n)),m=I(h,m,w,c),c?(h.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(Z.lastModified[r]=_),_=w.getResponseHeader("etag"),_&&(Z.etag[r]=_)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=m.state,u=m.data,y=m.error,c=!y)):(y=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",c?p.resolveWith(d,[u,x,w]):p.rejectWith(d,[w,x,y]),w.statusCode(v),v=void 0,l&&f.trigger(c?"ajaxSuccess":"ajaxError",[w,h,c?u:y]),g.fireWith(d,[w,x]),l&&(f.trigger("ajaxComplete",[w,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,a,c,l,u,h=Z.ajaxSetup({},e),d=h.context||h,f=h.context&&(d.nodeType||d.jquery)?Z(d):Z.event,p=Z.Deferred(),g=Z.Callbacks("once memory"),v=h.statusCode||{},y={},m={},b=0,_="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=vn.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=m[n]=m[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||_;return i&&i.abort(e),n(0,e),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||fn)+"").replace(pn,"").replace(bn,dn[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().match(fe)||[""],null==h.crossDomain&&(c=_n.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]===dn[1]&&c[2]===dn[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(dn[3]||("http:"===dn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),L(wn,h,e,w),2===b)return w;l=h.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!mn.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(hn.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=gn.test(r)?r.replace(gn,"$1_="+un++):r+(hn.test(r)?"&":"?")+"_="+un++)),h.ifModified&&(Z.lastModified[r]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&w.setRequestHeader("If-None-Match",Z.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Sn+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)w.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(d,w,h)===!1||2===b))return w.abort();_="abort";for(u in{success:1,error:1,complete:1})w[u](h[u]);if(i=L(xn,h,e,w)){w.readyState=1,l&&f.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{b=1,i.send(y,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return Z.get(t,e,n,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,n,i,r){return Z.isFunction(n)&&(r=r||i,i=n,n=void 0),Z.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Z.isFunction(t)?function(e){Z(this).wrapInner(t.call(this,e))}:function(){var e=Z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(n){Z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var kn=/%20/g,Tn=/\[\]$/,En=/\r?\n/g,An=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var n,i=[],r=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){r(this.name,this.value)});else for(n in t)M(n,t[n],e,r);return i.join("&").replace(kn,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&Kn.test(this.nodeName)&&!An.test(t)&&(this.checked||!Ce.test(t))}).map(function(t,e){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(t){return{name:e.name,value:t.replace(En,"\r\n")}}):{name:e.name,value:n.replace(En,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Pn=0,Nn={},jn={0:200,1223:204},On=Z.ajaxSettings.xhr();t.ActiveXObject&&Z(t).on("unload",function(){for(var t in Nn)Nn[t]()}),X.cors=!!On&&"withCredentials"in On,X.ajax=On=!!On,Z.ajaxTransport(function(t){var e;return X.cors||On&&!t.crossDomain?{send:function(n,i){var r,o=t.xhr(),s=++Pn;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);e=function(t){return function(){e&&(delete Nn[s],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?i(o.status,o.statusText):i(jn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Nn[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Dn=[],Rn=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Dn.pop()||Z.expando+"_"+un++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,s,a=e.jsonp!==!1&&(Rn.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rn.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Rn,"$1"+r):e.jsonp!==!1&&(e.url+=(hn.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||Z.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},i.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Dn.push(r)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||J;var i=se.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=Z.buildFragment([t],e,r),r&&r.length&&Z(r).remove(),Z.merge([],i.childNodes))};var Ln=Z.fn.load;Z.fn.load=function(t,e,n){if("string"!=typeof t&&Ln)return Ln.apply(this,arguments);var i,r,o,s=this,a=t.indexOf(" ");return a>=0&&(i=Z.trim(t.slice(a)),t=t.slice(0,a)),Z.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&Z.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?Z("<div>").append(Z.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Fn=t.document.documentElement;Z.offset={setOffset:function(t,e,n){var i,r,o,s,a,c,l,u=Z.css(t,"position"),h=Z(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),o=Z.css(t,"top"),c=Z.css(t,"left"),l=("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1,l?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(c)||0),Z.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(e=o.documentElement,Z.contains(e,i)?(typeof i.getBoundingClientRect!==ke&&(r=i.getBoundingClientRect()),n=H(o),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===Z.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(i=t.offset()),i.top+=Z.css(t[0],"borderTopWidth",!0),i.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-Z.css(n,"marginTop",!0),left:e.left-i.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Fn;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Fn})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i="pageYOffset"===n;Z.fn[e]=function(r){return ve(this,function(e,r,o){var s=H(e);return void 0===o?s?s[n]:e[r]:void(s?s.scrollTo(i?t.pageXOffset:o,i?o:t.pageYOffset):e[r]=o)},e,r,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=x(X.pixelPosition,function(t,n){return n?(n=w(t,e),$e.test(n)?Z(t).position()[e]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){Z.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return ve(this,function(e,n,i){var r;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?Z.css(e,n,s):Z.style(e,n,i,s)},e,o?i:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Bn=t.jQuery,In=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=In),e&&t.jQuery===Z&&(t.jQuery=Bn),Z},typeof e===ke&&(t.jQuery=t.$=Z),Z}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,i){var r,o,s,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(s=t("img[usemap='#"+o+"']")[0],!!s&&n(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var n=this.css("position"),i="absolute"===n,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return i&&"static"===e.css("position")?!1:r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(n){return e(n,!isNaN(t.attr(n,"tabindex")))},tabbable:function(n){var i=t.attr(n,"tabindex"),r=isNaN(i);return(r||i>=0)&&e(n,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,n){function i(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?s["inner"+n].call(this):this.each(function(){t(this).css(o,i(this,e)+"px")})},t.fn["outer"+n]=function(e,r){return"number"!=typeof e?s["outer"+n].call(this,e):this.each(function(){t(this).css(o,i(this,e,!0,r)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var n,i,r=t(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0}}),t.ui.plugin={add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}};var i="ui-effects-",r=t;t.effects={effect:{}},function(t,e){function n(t,e,n){var i=h[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:t>i.max?i.max:t)}function i(n){var i=l(),r=i._rgba=[];return n=n.toLowerCase(),p(c,function(t,o){var s,a=o.re.exec(n),c=a&&o.parse(a),l=o.space||"rgba";return c?(s=i[l](c),i[u[l].cache]=s[u[l].cache],r=i._rgba=s._rgba,!1):e}),r.length?("0,0,0,0"===r.join()&&t.extend(r,o.transparent),i):o[n]}function r(t,e,n){return n=(n+1)%1,1>6*n?t+6*(e-t)*n:1>2*n?e:2>3*n?t+6*(e-t)*(2/3-n):t}var o,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,n,i,r){return new t.Color.fn.parse(e,n,i,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},f=t("<p>")[0],p=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(r,s,a,c){if(r===e)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=t(r).css(s),s=e);var h=this,d=t.type(r),f=this._rgba=[];return s!==e&&(r=[r,s,a,c],d="array"),"string"===d?this.parse(i(r)||o._default):"array"===d?(p(u.rgba.props,function(t,e){f[e.idx]=n(r[e.idx],e)}),this):"object"===d?(r instanceof l?p(u,function(t,e){r[e.cache]&&(h[e.cache]=r[e.cache].slice())}):p(u,function(e,i){var o=i.cache;p(i.props,function(t,e){if(!h[o]&&i.to){if("alpha"===t||null==r[t])return;h[o]=i.to(h._rgba)}h[o][e.idx]=n(r[t],e,!0)}),h[o]&&0>t.inArray(null,h[o].slice(0,3))&&(h[o][3]=1,i.from&&(h._rgba=i.from(h[o])))}),this):e},is:function(t){var n=l(t),i=!0,r=this;return p(u,function(t,o){var s,a=n[o.cache];return a&&(s=r[o.cache]||o.to&&o.to(r._rgba)||[],p(o.props,function(t,n){return null!=a[n.idx]?i=a[n.idx]===s[n.idx]:e})),i}),i},_space:function(){var t=[],e=this;return p(u,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=l(t),r=i._space(),o=u[r],s=0===this.alpha()?l("transparent"):this,a=s[o.cache]||o.to(s._rgba),c=a.slice();return i=i[o.cache],p(o.props,function(t,r){var o=r.idx,s=a[o],l=i[o],u=h[r.type]||{};null!==l&&(null===s?c[o]=l:(u.mod&&(l-s>u.mod/2?s+=u.mod:s-l>u.mod/2&&(s-=u.mod)),c[o]=n((l-s)*e+s,r)))}),this[r](c)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=l(e)._rgba;return l(t.map(n,function(t,e){return(1-i)*r[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=t[3],a=Math.max(i,r,o),c=Math.min(i,r,o),l=a-c,u=a+c,h=.5*u;return e=c===a?0:i===a?60*(r-o)/l+360:r===a?60*(o-i)/l+120:60*(i-r)/l+240,n=0===l?0:.5>=h?l/u:l/(2-u),[Math.round(e)%360,n,h,null==s?1:s]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],o=t[3],s=.5>=i?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*r(a,s,e+1/3)),Math.round(255*r(a,s,e)),Math.round(255*r(a,s,e-1/3)),o]},p(u,function(i,r){var o=r.props,s=r.cache,c=r.to,u=r.from;l.fn[i]=function(i){if(c&&!this[s]&&(this[s]=c(this._rgba)),i===e)return this[s].slice();var r,a=t.type(i),h="array"===a||"object"===a?i:arguments,d=this[s].slice();return p(o,function(t,e){var i=h["object"===a?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),u?(r=l(u(d)),r[s]=d,r):l(d)},p(o,function(e,n){l.fn[e]||(l.fn[e]=function(r){var o,s=t.type(r),c="alpha"===e?this._hsla?"hsla":"rgba":i,l=this[c](),u=l[n.idx];
return"undefined"===s?u:("function"===s&&(r=r.call(this,u),s=t.type(r)),null==r&&n.empty?this:("string"===s&&(o=a.exec(r),o&&(r=u+parseFloat(o[2])*("+"===o[1]?1:-1))),l[n.idx]=r,this[c](l)))})})}),l.hook=function(e){var n=e.split(" ");p(n,function(e,n){t.cssHooks[n]={set:function(e,r){var o,s,a="";if("transparent"!==r&&("string"!==t.type(r)||(o=i(r)))){if(r=l(o||r),!d.rgba&&1!==r._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(c){}r=r.blend(a&&"transparent"!==a?a:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(c){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=l(e.elem,n),e.end=l(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(s),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(r),function(){function e(e){var n,i,r=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[t.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function n(e,n){var i,r,s={};for(i in n)r=n[i],e[i]!==r&&(o[i]||(t.fx.step[i]||!isNaN(parseFloat(r)))&&(s[i]=r));return s}var i=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(r.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(r,o,s,a){var c=t.speed(o,s,a);return this.queue(function(){var o,s=t(this),a=s.attr("class")||"",l=c.children?s.find("*").addBack():s;l=l.map(function(){var n=t(this);return{el:n,start:e(this)}}),o=function(){t.each(i,function(t,e){r[e]&&s[e+"Class"](r[e])})},o(),l=l.map(function(){return this.end=e(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),l=l.map(function(){var e=this,n=t.Deferred(),i=t.extend({},c,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),c.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(n,i,r,o){return i?t.effects.animateClass.call(this,{add:n},i,r,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,r,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,r,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,i,r,o,s){return"boolean"==typeof i||void 0===i?r?t.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},i,r,o)}}(t.fn.toggleClass),switchClass:function(e,n,i,r,o){return t.effects.animateClass.call(this,{add:n,remove:e},i,r,o)}})}(),function(){function e(e,n,i,r){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(r=i,i=n,n={}),t.isFunction(i)&&(r=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=r||n.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.11.1",save:function(t,e){for(var n=0;e.length>n;n++)null!==e[n]&&t.data(i+e[n],t[0].style[e[n]])},restore:function(t,e){var n,r;for(r=0;e.length>r;r++)null!==e[r]&&(n=t.data(i+e[r]),void 0===n&&(n=""),t.css(e[r],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(s){o=document.body}return e.wrap(i),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(r),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).focus()),e},setTransition:function(e,n,i,r){return r=r||{},t.each(n,function(t,n){var o=e.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),t.fn.extend({effect:function(){function n(e){function n(){t.isFunction(o)&&o.call(r[0]),t.isFunction(e)&&e()}var r=t(this),o=i.complete,a=i.mode;(r.is(":hidden")?"hide"===a:"show"===a)?(r[a](),n()):s.call(r[0],i,n)}var i=e.apply(this,arguments),r=i.mode,o=i.queue,s=t.effects.effect[i.effect];return t.fx.off||!s?r?this[r](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(n):this.queue(o||"fx",n)},show:function(t){return function(i){if(n(i))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="show",this.effect.call(this,r)}}(t.fn.show),hide:function(t){return function(i){if(n(i))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="hide",this.effect.call(this,r)}}(t.fn.hide),toggle:function(t){return function(i){if(n(i)||"boolean"==typeof i)return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="toggle",this.effect.call(this,r)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;((e=Math.pow(2,--n))-1)/11>t;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?n(2*t)/2:1-n(-2*t+2)/2}})}(),t.effects,t.effects.effect.slide=function(e,n){var i,r=t(this),o=["position","top","bottom","left","right","width","height"],s=t.effects.setMode(r,e.mode||"show"),a="show"===s,c=e.direction||"left",l="up"===c||"down"===c?"top":"left",u="up"===c||"left"===c,h={};t.effects.save(r,o),r.show(),i=e.distance||r["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(r).css({overflow:"hidden"}),a&&r.css(l,u?isNaN(i)?"-"+i:-i:i),h[l]=(a?u?"+=":"-=":u?"-=":"+=")+i,r.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&r.hide(),t.effects.restore(r,o),t.effects.removeWrapper(r),n()}})}}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var s=e||window.event,a=c.call(arguments,1),l=0,h=0,d=0,f=0,p=0,g=0;if(e=t.event.fix(s),e.type="mousewheel","detail"in s&&(d=-1*s.detail),"wheelDelta"in s&&(d=s.wheelDelta),"wheelDeltaY"in s&&(d=s.wheelDeltaY),"wheelDeltaX"in s&&(h=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(h=-1*d,d=0),l=0===d?h:d,"deltaY"in s&&(d=-1*s.deltaY,l=d),"deltaX"in s&&(h=s.deltaX,0===d&&(l=-1*h)),0!==d||0!==h){if(1===s.deltaMode){var v=t.data(this,"mousewheel-line-height");l*=v,d*=v,h*=v}else if(2===s.deltaMode){var y=t.data(this,"mousewheel-page-height");l*=y,d*=y,h*=y}if(f=Math.max(Math.abs(d),Math.abs(h)),(!o||o>f)&&(o=f,i(s,f)&&(o/=40)),i(s,f)&&(l/=40,h/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/o),h=Math[h>=1?"floor":"ceil"](h/o),d=Math[d>=1?"floor":"ceil"](d/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var m=this.getBoundingClientRect();p=e.clientX-m.left,g=e.clientY-m.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=o,e.offsetX=p,e.offsetY=g,e.deltaMode=0,a.unshift(e,l,h,d),r&&clearTimeout(r),r=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function n(){o=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&0===e%120}var r,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(t.event.fixHooks)for(var l=s.length;l;)t.event.fixHooks[s[--l]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),jQuery.extend({highlight:function(t,e,n,i){if(3===t.nodeType){var r=t.data.match(e);if(r){var o=document.createElement(n||"span");o.className=i||"highlight";var s=t.splitText(r.index);s.splitText(r[0].length);var a=s.cloneNode(!0);return o.appendChild(a),s.parentNode.replaceChild(o,s),1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&(t.tagName!==n.toUpperCase()||t.className!==i))for(var c=0;t.childNodes.length>c;c++)c+=jQuery.highlight(t.childNodes[c],e,n,i);return 0}}),jQuery.fn.unhighlight=function(t){var e={className:"highlight",element:"span"};return jQuery.extend(e,t),this.find(e.element+"."+e.className).each(function(){var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()},jQuery.fn.highlight=function(t,e){var n={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(jQuery.extend(n,e),t.constructor===String&&(t=[t]),t=jQuery.grep(t,function(t){return""!=t}),t=jQuery.map(t,function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==t.length)return this;var i=n.caseSensitive?"":"i",r="("+t.join("|")+")";n.wordsOnly&&(r="\\b"+r+"\\b");var o=RegExp(r,i);return this.each(function(){jQuery.highlight(this,o,n.element,n.className)})},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e=[],n=t(document),i=navigator.userAgent.toLowerCase(),r=t(window),o=[],s={ieQuirks:null,msie:/msie/.test(i)&&!/opera/.test(i),opera:/opera/.test(i)};s.ie6=s.msie&&/msie 6./.test(i)&&"object"!=typeof window.XMLHttpRequest,s.ie7=s.msie&&/msie 7.0/.test(i),t.modal=function(e,n){return t.modal.impl.init(e,n)},t.modal.close=function(){t.modal.impl.close()},t.modal.focus=function(e){t.modal.impl.focus(e)},t.modal.setContainerDimensions=function(){t.modal.impl.setContainerDimensions()},t.modal.setPosition=function(){t.modal.impl.setPosition()},t.modal.update=function(e,n){t.modal.impl.update(e,n)},t.fn.modal=function(e){return t.modal.impl.init(this,e)},t.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null},t.modal.impl={d:{},init:function(e,n){var i=this;if(i.d.data)return!1;if(s.ieQuirks=s.msie&&"BackCompat"===document.compatMode,i.o=t.extend({},t.modal.defaults,n),i.zIndex=i.o.zIndex,i.occb=!1,"object"==typeof e)e=e instanceof t?e:t(e),i.d.placeholder=!1,e.parent().parent().size()>0&&(e.before(t("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),i.d.placeholder=!0,i.display=e.css("display"),i.o.persist||(i.d.orig=e.clone(!0)));else{if("string"!=typeof e&&"number"!=typeof e)return alert("SimpleModal Error: Unsupported data type: "+typeof e),i;e=t("<div></div>").html(e)}return i.create(e),e=null,i.open(),t.isFunction(i.o.onShow)&&i.o.onShow.apply(i,[i.d]),i},create:function(n){var i=this;i.getDimensions(),i.o.modal&&s.ie6&&(i.d.iframe=t('<iframe src="javascript:false;"></iframe>').css(t.extend(i.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:o[0],width:o[1],zIndex:i.o.zIndex,top:0,left:0})).appendTo(i.o.appendTo)),i.d.overlay=t("<div></div>").attr("id",i.o.overlayId).addClass("simplemodal-overlay").css(t.extend(i.o.overlayCss,{display:"none",opacity:i.o.opacity/100,height:i.o.modal?e[0]:0,width:i.o.modal?e[1]:0,position:"fixed",left:0,top:0,zIndex:i.o.zIndex+1})).appendTo(i.o.appendTo),i.d.container=t("<div></div>").attr("id",i.o.containerId).addClass("simplemodal-container").css(t.extend({position:i.o.fixed?"fixed":"absolute"},i.o.containerCss,{display:"none",zIndex:i.o.zIndex+2})).append(i.o.close&&i.o.closeHTML?t(i.o.closeHTML).addClass(i.o.closeClass):"").appendTo(i.o.appendTo),i.d.wrap=t("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(i.d.container),i.d.data=n.attr("id",n.attr("id")||i.o.dataId).addClass("simplemodal-data").css(t.extend(i.o.dataCss,{display:"none"})).appendTo("body"),n=null,i.setContainerDimensions(),i.d.data.appendTo(i.d.wrap),(s.ie6||s.ieQuirks)&&i.fixIE()},bindEvents:function(){var i=this;t("."+i.o.closeClass).bind("click.simplemodal",function(t){t.preventDefault(),i.close()}),i.o.modal&&i.o.close&&i.o.overlayClose&&i.d.overlay.bind("click.simplemodal",function(t){t.preventDefault(),i.close()}),n.bind("keydown.simplemodal",function(t){i.o.modal&&9===t.keyCode?i.watchTab(t):i.o.close&&i.o.escClose&&27===t.keyCode&&(t.preventDefault(),i.close())}),r.bind("resize.simplemodal orientationchange.simplemodal",function(){i.getDimensions(),i.o.autoResize?i.setContainerDimensions():i.o.autoPosition&&i.setPosition(),s.ie6||s.ieQuirks?i.fixIE():i.o.modal&&(i.d.iframe&&i.d.iframe.css({height:o[0],width:o[1]}),i.d.overlay.css({height:e[0],width:e[1]}))})},unbindEvents:function(){t("."+this.o.closeClass).unbind("click.simplemodal"),n.unbind("keydown.simplemodal"),r.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var e=this,n=e.o.position;t.each([e.d.iframe||null,e.o.modal?e.d.overlay:null,"fixed"===e.d.container.css("position")?e.d.container:null],function(t,e){if(e){var i="document.body.clientHeight",r="document.body.clientWidth",o="document.body.scrollHeight",s="document.body.scrollLeft",a="document.body.scrollTop",c="document.body.scrollWidth",l="document.documentElement.clientHeight",u="document.documentElement.clientWidth",h="document.documentElement.scrollLeft",d="document.documentElement.scrollTop",f=e[0].style;if(f.position="absolute",2>t)f.removeExpression("height"),f.removeExpression("width"),f.setExpression("height",""+o+" > "+i+" ? "+o+" : "+i+' + "px"'),f.setExpression("width",""+c+" > "+r+" ? "+c+" : "+r+' + "px"');else{var p,g;if(n&&n.constructor===Array){var v=n[0]?"number"==typeof n[0]?""+n[0]:n[0].replace(/px/,""):e.css("top").replace(/px/,"");if(p=-1===v.indexOf("%")?v+" + (t = "+d+" ? "+d+" : "+a+') + "px"':parseInt(v.replace(/%/,""))+" * (("+l+" || "+i+") / 100) + (t = "+d+" ? "+d+" : "+a+') + "px"',n[1]){var y="number"==typeof n[1]?""+n[1]:n[1].replace(/px/,"");g=-1===y.indexOf("%")?y+" + (t = "+h+" ? "+h+" : "+s+') + "px"':parseInt(y.replace(/%/,""))+" * (("+u+" || "+r+") / 100) + (t = "+h+" ? "+h+" : "+s+') + "px"'}}else p="("+l+" || "+i+") / 2 - (this.offsetHeight / 2) + (t = "+d+" ? "+d+" : "+a+') + "px"',g="("+u+" || "+r+") / 2 - (this.offsetWidth / 2) + (t = "+h+" ? "+h+" : "+s+') + "px"';f.removeExpression("top"),f.removeExpression("left"),f.setExpression("top",p),f.setExpression("left",g)}}})},focus:function(e){var n=this,i=e&&-1!==t.inArray(e,["first","last"])?e:"first",r=t(":input:enabled:visible:"+i,n.d.wrap);setTimeout(function(){r.length>0?r.focus():n.d.wrap.focus()},10)},getDimensions:function(){var t=window.innerHeight===void 0?r.height():window.innerHeight;e=[n.height(),n.width()],o=[t,r.width()]},getVal:function(t,e){return t?"number"==typeof t?t:"auto"===t?0:t.indexOf("%")>0?parseInt(t.replace(/%/,""))/100*("h"===e?o[0]:o[1]):parseInt(t.replace(/px/,"")):null},update:function(t,e){var n=this;return n.d.data?(n.d.origHeight=n.getVal(t,"h"),n.d.origWidth=n.getVal(e,"w"),n.d.data.hide(),t&&n.d.container.css("height",t),e&&n.d.container.css("width",e),n.setContainerDimensions(),n.d.data.show(),n.o.focus&&n.focus(),n.unbindEvents(),n.bindEvents(),void 0):!1},setContainerDimensions:function(){var t=this,e=s.ie6||s.ie7,n=t.d.origHeight?t.d.origHeight:s.opera?t.d.container.height():t.getVal(e?t.d.container[0].currentStyle.height:t.d.container.css("height"),"h"),i=t.d.origWidth?t.d.origWidth:s.opera?t.d.container.width():t.getVal(e?t.d.container[0].currentStyle.width:t.d.container.css("width"),"w"),r=t.d.data.outerHeight(!0),a=t.d.data.outerWidth(!0);t.d.origHeight=t.d.origHeight||n,t.d.origWidth=t.d.origWidth||i;var c=t.o.maxHeight?t.getVal(t.o.maxHeight,"h"):null,l=t.o.maxWidth?t.getVal(t.o.maxWidth,"w"):null,u=c&&o[0]>c?c:o[0],h=l&&o[1]>l?l:o[1],d=t.o.minHeight?t.getVal(t.o.minHeight,"h"):"auto";n=n?t.o.autoResize&&n>u?u:d>n?d:n:r?r>u?u:t.o.minHeight&&"auto"!==d&&d>r?d:r:d;var f=t.o.minWidth?t.getVal(t.o.minWidth,"w"):"auto";i=i?t.o.autoResize&&i>h?h:f>i?f:i:a?a>h?h:t.o.minWidth&&"auto"!==f&&f>a?f:a:f,t.d.container.css({height:n,width:i}),t.d.wrap.css({overflow:r>n||a>i?"auto":"visible"}),t.o.autoPosition&&t.setPosition()},setPosition:function(){var t,e,n=this,i=o[0]/2-n.d.container.outerHeight(!0)/2,s=o[1]/2-n.d.container.outerWidth(!0)/2,a="fixed"!==n.d.container.css("position")?r.scrollTop():0;n.o.position&&"[object Array]"===Object.prototype.toString.call(n.o.position)?(t=a+(n.o.position[0]||i),e=n.o.position[1]||s):(t=a+i,e=s),n.d.container.css({left:e,top:t})},watchTab:function(e){var n=this;if(t(e.target).parents(".simplemodal-container").length>0){if(n.inputs=t(":input:enabled:visible:first, :input:enabled:visible:last",n.d.data[0]),!e.shiftKey&&e.target===n.inputs[n.inputs.length-1]||e.shiftKey&&e.target===n.inputs[0]||0===n.inputs.length){e.preventDefault();var i=e.shiftKey?"last":"first";n.focus(i)}}else e.preventDefault(),n.focus()},open:function(){var e=this;e.d.iframe&&e.d.iframe.show(),t.isFunction(e.o.onOpen)?e.o.onOpen.apply(e,[e.d]):(e.d.overlay.show(),e.d.container.show(),e.d.data.show()),e.o.focus&&e.focus(),e.bindEvents()},close:function(){var e=this;if(!e.d.data)return!1;if(e.unbindEvents(),t.isFunction(e.o.onClose)&&!e.occb)e.occb=!0,e.o.onClose.apply(e,[e.d]);else{if(e.d.placeholder){var n=t("#simplemodal-placeholder");e.o.persist?n.replaceWith(e.d.data.removeClass("simplemodal-data").css("display",e.display)):(e.d.data.hide().remove(),n.replaceWith(e.d.orig))}else e.d.data.hide().remove();e.d.container.hide().remove(),e.d.overlay.hide(),e.d.iframe&&e.d.iframe.hide().remove(),e.d.overlay.remove(),e.d={}}}}}),function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);throw Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;i.length>s;s++)r(i[s]);return r}({1:[function(t){(function(){var e,n,i,r,o,s=[].slice;e=jQuery,n=t("./modules/bus"),i=t("./modules/leg"),o=e.tourbus=function(){var t,n;return t=arguments.length>=1?s.call(arguments,0):[],n=t[0],r.hasOwnProperty(n)?t=t.slice(1):n instanceof e?n="build":"string"==typeof n?(n="build",t[0]=e(t[0])):e.error("Unknown method of $.tourbus --",t),r[n].apply(this,t)},e.fn.tourbus=function(){var t;return t=arguments.length>=1?s.call(arguments,0):[],this.each(function(){return t.unshift(e(this)),o.apply(null,["build"].concat(s.call(t))),this})},r={build:function(t,i){var r;return null==i&&(i={}),i=e.extend(!0,{},o.defaults,i),r=[],t instanceof e||(t=e(t)),t.each(function(){return r.push(new n(this,i))}),0===r.length&&e.error(""+t.selector+" was not found!"),1===r.length?r[0]:r},destroyAll:function(){var t,e,i,r;i=n._busses,r=[];for(e in i)t=i[e],r.push(t.destroy());return r},expose:function(t){return t.tourbus={Bus:n,Leg:i}}},o.defaults={debug:!1,autoDepart:!1,container:"body","class":null,startAt:0,onDepart:function(){return null},onStop:function(){return null},onLegStart:function(){return null},onLegEnd:function(){return null},leg:{"class":null,scrollTo:null,scrollSpeed:150,scrollContext:100,orientation:"bottom",align:"left",width:"auto",margin:10,top:null,left:null,zindex:9999,arrow:"50%"}}}).call(this)},{"./modules/bus":2,"./modules/leg":3}],2:[function(t,e){(function(){var n,i,r,o,s=[].slice;n=jQuery,r=t("./leg"),o=t("./utils"),e.exports=i=function(){function t(t,e){this.options=e,this.id=this.constructor.uniqueId(),this.elId="tourbus-"+this.id,this.constructor._busses[this.id]=this,this.$original=n(t),this.rawData=this.$original.data(),this.$container=n(o.dataProp(this.rawData.container,this.options.container)),this.$original.data({tourbus:this}),this.currentLegIndex=null,this.legs=[],this.legEls=this.$original.children("li"),this.totalLegs=this.legEls.length,this._configureElement(),this._setupEvents(),o.dataProp(this.rawData.autoDepart,this.options.autoDepart)&&this.$original.trigger("depart.tourbus"),this._log("built tourbus with el",""+t,"and options",this.options)}return t._busses={},t._tours=0,t.uniqueId=function(){return this._tours++},t.prototype.depart=function(){return this.running=!0,this.options.onDepart(this),this._log("departing",this),this.currentLegIndex=o.dataProp(this.rawData.startAt,this.options.startAt),this.showLeg()},t.prototype.stop=function(){return this.running?(this.running=!1,n.each(this.legs,n.proxy(this.hideLeg,this)),this.currentLegIndex=null,this.options.onStop(this),this.running):void 0},t.prototype.on=function(t,e,n){return this.$container.on(t,e,n)},t.prototype.currentLeg=function(){return null===this.currentLegIndex?null:this.legs[this.currentLegIndex]},t.prototype.buildLeg=function(t){var e,i,o;return e=n(this.legEls[t]),i=e.data(),this.legs[t]=o=new r({bus:this,original:e,target:i.el||"body",index:t,rawData:i}),o.render(),this.$el.append(o.$el),o._position(),o.hide(),o},t.prototype.showLeg=function(t){var e,n;return null==t&&(t=this.currentLegIndex),e=this.legs[t]||this.buildLeg(t),this._log("showLeg:",e),n=this.options.onLegStart(e,this),n!==!1&&e.show(),++t<this.totalLegs&&!this.legs[t]?this.buildLeg(t):void 0},t.prototype.hideLeg=function(t){var e,n;return null==t&&(t=this.currentLegIndex),e=this.legs[t],e.visible&&(this._log("hideLeg:",e),n=this.options.onLegEnd(e,this),n!==!1&&e.hide()),--t>0&&!this.legs[t]?this.buildLeg(t):void 0},t.prototype.repositionLegs=function(){return n.each(this.legs,function(){return this.reposition()})},t.prototype.next=function(){return this.hideLeg(),this.currentLegIndex++,this.currentLegIndex>this.totalLegs-1?this.$original.trigger("stop.tourbus"):this.showLeg()},t.prototype.prev=function(){return this.hideLeg(),this.currentLegIndex--,0>this.currentLegIndex?this.$original.trigger("stop.tourbus"):this.showLeg()},t.prototype.destroy=function(){return n.each(this.legs,function(){return this.destroy()}),this.legs=[],delete this.constructor._busses[this.id],this._teardownEvents(),this.$original.removeData("tourbus"),this.$el.remove()},t.prototype._configureElement=function(){return this.$el=n("<div class='tourbus-container'></div>"),this.el=this.$el[0],this.$el.attr({id:this.elId}),this.$el.addClass(o.dataProp(this.rawData["class"],this.options["class"])),this.$container.append(this.$el)},t.prototype._log=function(){return o.dataProp(this.rawData.debug,this.options.debug)?console.log.apply(console,["TOURBUS "+this.id+":"].concat(s.call(arguments))):void 0},t.prototype._setupEvents=function(){return this.$original.on("depart.tourbus",n.proxy(this.depart,this)),this.$original.on("stop.tourbus",n.proxy(this.stop,this)),this.$original.on("next.tourbus",n.proxy(this.next,this)),this.$original.on("prev.tourbus",n.proxy(this.prev,this))},t.prototype._teardownEvents=function(){return this.$original.off(".tourbus")},t}()}).call(this)},{"./leg":3,"./utils":4}],3:[function(t,e){(function(){var n,i,r,o;n=jQuery,r=t("./utils"),e.exports=i=function(){function t(t){if(this.options=t,this.$original=this.options.original,this.bus=this.options.bus,this.rawData=this.options.rawData,this.index=this.options.index,this.$target=n(this.options.target),this.id=""+this.bus.id+"-"+this.options.index,this.elId="tourbus-leg-"+this.id,this.visible=!1,0===this.$target.length)throw""+this.$target.selector+" is not an element!";this.content=this.$original.html(),this._setupOptions(),this._configureElement(),this._configureTarget(),this._configureScroll(),this._setupEvents(),this.bus._log("leg "+this.index+" made with options",this.options)}return t.prototype.render=function(){var t,e;return t="centered"===this.options.orientation?"":"tourbus-arrow",this.$el.addClass(" "+t+" tourbus-arrow-"+this.options.orientation+" "),e="<div class='tourbus-leg-inner'>\n  "+this.content+"\n</div>",this.$el.css({width:this.options.width,zIndex:this.options.zindex}).html(e),this},t.prototype.destroy=function(){return this.$el.remove(),this._teardownEvents()},t.prototype.reposition=function(){return this._configureTarget(),this._position()},t.prototype._position=function(){var t,e,n,i;return"centered"!==this.options.orientation&&(n={},e={top:"left",bottom:"left",left:"top",right:"top"},"number"==typeof this.options.arrow&&(this.options.arrow+="px"),n[e[this.options.orientation]]=this.options.arrow,i="#"+this.elId+".tourbus-arrow",this.bus._log("adding rule for "+this.elId,n),o(""+i+":before, "+i+":after",n)),t=this._offsets(),this.bus._log("setting offsets on leg",t),this.$el.css(t)},t.prototype.show=function(){return this.visible=!0,this.$el.css({visibility:"visible",opacity:.8,zIndex:this.options.zindex}),this.scrollIntoView()},t.prototype.hide=function(){return this.visible=!1,this.bus.options.debug?this.$el.css({visibility:"visible",opacity:.4,zIndex:0}):this.$el.css({visibility:"hidden"})},t.prototype.scrollIntoView=function(){var t;if(this.willScroll)return t=r.dataProp(this.options.scrollTo,this.$el),this.bus._log("scrolling to",t,this.scrollSettings),n.scrollTo(t,this.scrollSettings)},t.prototype._setupOptions=function(){var t,e,n,i,o,s;for(e=this.bus.options.leg,t=["class","top","left","scrollTo","scrollSpeed","scrollContext","margin","arrow","align","width","zindex","orientation"],s=[],i=0,o=t.length;o>i;i++)n=t[i],s.push(this.options[n]=r.dataProp(this.rawData[n],e[n]));return s},t.prototype._configureElement=function(){return this.$el=n("<div class='tourbus-leg'></div>"),this.el=this.$el[0],this.$el.attr({id:this.elId}),this.$el.addClass(this.options["class"]),this.$el.css({zIndex:this.options.zindex})},t.prototype._setupEvents=function(){return this.$el.on("click",".tourbus-next",n.proxy(this.bus.next,this.bus)),this.$el.on("click",".tourbus-prev",n.proxy(this.bus.prev,this.bus)),this.$el.on("click",".tourbus-stop",n.proxy(this.bus.stop,this.bus))},t.prototype._teardownEvents=function(){return this.$el.off("click")},t.prototype._configureTarget=function(){return this.targetOffset=this.$target.offset(),r.dataProp(this.options.top,!1)&&(this.targetOffset.top=this.options.top),r.dataProp(this.options.left,!1)&&(this.targetOffset.left=this.options.left),this.targetWidth=this.$target.outerWidth(),this.targetHeight=this.$target.outerHeight()},t.prototype._configureScroll=function(){return this.willScroll=n.fn.scrollTo&&this.options.scrollTo!==!1,this.scrollSettings={offset:-this.options.scrollContext,easing:"linear",axis:"y",duration:this.options.scrollSpeed}},t.prototype._offsets=function(){var t,e,i,o,s,a,c,l;switch(i=this.$el.height(),o=this.$el.width(),s={},this.options.orientation){case"centered":c=n(window).height(),s.top=this.options.top,r.dataProp(s.top,!1)||(s.top=c/2-i/2),s.left=this.targetWidth/2-o/2;break;case"left":s.top=this.targetOffset.top,s.left=this.targetOffset.left-o-this.options.margin;break;case"right":s.top=this.targetOffset.top,s.left=this.targetOffset.left+this.targetWidth+this.options.margin;break;case"top":s.top=this.targetOffset.top-i-this.options.margin,s.left=this.targetOffset.left;break;case"bottom":s.top=this.targetOffset.top+this.targetHeight+this.options.margin,s.left=this.targetOffset.left}if(l={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]},r.include(this.options.orientation,l[this.options.align]))switch(this.options.align){case"right":s.left+=this.targetWidth-o;break;case"bottom":s.top+=this.targetHeight-i}else"center"===this.options.align&&(r.include(this.options.orientation,l.left)?(a=this.targetWidth/2,e=o/2,t="left"):(a=this.targetHeight/2,e=i/2,t="top"),a>e?s[t]+=a-e:s[t]-=e-a);return s},t}(),o=function(t){var e;return t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),e=document.styleSheets[document.styleSheets.length-1],function(t,i){var r,o;o=n.map(function(){var t;t=[];for(r in i)t.push(r);return t}(),function(t){return""+t+":"+i[t]}).join(";");try{e.insertRule?e.insertRule(""+t+" { "+o+" }",(e.cssRules||e.rules).length):e.addRule(t,o)}catch(s){}}}(document.createElement("style"))}).call(this)},{"./utils":4}],4:[function(t,e){(function(){e.exports={dataProp:function(t,e){return null===t||t===void 0?e:t},include:function(t,e){return-1!==$.inArray(t,e||[])}}}).call(this)},{}]},{},[1,2,3,4]),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(e,r){function o(){return d.update(),a(),d}function s(){y.css(x,d.contentPosition/d.trackRatio),p.css(x,-d.contentPosition),g.css(w,d.trackSize),v.css(w,d.trackSize),y.css(w,d.thumbSize)}function a(){_?f[0].ontouchstart=function(t){1===t.touches.length&&(t.stopPropagation(),c(t.touches[0]))}:(y.bind("mousedown",c),v.bind("mousedown",u)),t(window).resize(function(){d.update("relative")}),d.options.wheel&&t(e[0]).on("mousewheel",l)
}function c(e){t("body").addClass("noSelect"),m=b?e.pageX:e.pageY,d.thumbPosition=parseInt(y.css(x),10)||0,_?(document.ontouchmove=function(t){t.preventDefault(),u(t.touches[0])},document.ontouchend=h):(t(document).bind("mousemove",u),t(document).bind("mouseup",h),y.bind("mouseup",h))}function l(n){if(1>d.contentRatio){var i=n||window.event,r="delta"+d.options.axis.toUpperCase(),o=i[r];d.contentPosition-=o*i.deltaFactor*d.options.wheelSpeed,d.contentPosition=Math.min(d.contentSize-d.viewportSize,Math.max(0,d.contentPosition)),e.trigger("move"),y.css(x,d.contentPosition/d.trackRatio),p.css(x,-d.contentPosition),(d.options.wheelLock||d.contentPosition!==d.contentSize-d.viewportSize&&0!==d.contentPosition)&&(i=t.event.fix(i),i.preventDefault())}}function u(t){if(1>d.contentRatio){var n=b?t.pageX:t.pageY,i=n-m;d.options.scrollInvert&&_&&(i=m-n);var r=Math.min(d.trackSize-d.thumbSize,Math.max(0,d.thumbPosition+i));d.contentPosition=r*d.trackRatio,e.trigger("move"),y.css(x,r),p.css(x,-d.contentPosition)}}function h(){t("body").removeClass("noSelect"),t(document).unbind("mousemove",u),t(document).unbind("mouseup",h),y.unbind("mouseup",h),document.ontouchmove=document.ontouchend=null}this.options=t.extend({},i,r),this._defaults=i,this._name=n;var d=this,f=e.find(".viewport"),p=e.find(".overview"),g=e.find(".scrollbar"),v=g.find(".track"),y=g.find(".thumb"),m=0,b="x"===this.options.axis,_="ontouchstart"in document.documentElement,w=b?"width":"height",x=b?"left":"top";return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.update=function(t){var e=w.charAt(0).toUpperCase()+w.slice(1).toLowerCase();switch(this.viewportSize=f[0]["offset"+e],this.contentSize=p[0]["scroll"+e],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(0,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize,m=v.offset().top,g.toggleClass("disable",this.contentRatio>=1),t){case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(t,10)||0}return s(),d},o()}var n="tinyscrollbar",i={axis:"y",wheel:!0,wheelSpeed:1,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1};t.fn[n]=function(i){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new e(t(this),i))})}});var Kinetic={};!function(t){var e=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var e=t.navigator&&t.navigator.userAgent||"",n=e.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||0>n.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],r=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:i[1]||"",version:i[2]||"0",mobile:r}}(),Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},BaseLayer:function(t){this.___init(t)},Layer:function(t){this.____init(t)},FastLayer:function(t){this.____init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var n=this.names[t];if(void 0!==n){for(var i=0;n.length>i;i++){var r=n[i];r._id===e&&n.splice(i,1)}0===n.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*e:t}}}(this),function(t,e){if("object"==typeof exports){var n=require("canvas"),i=require("jsdom").jsdom,r=i("<!DOCTYPE html><html><head></head><body></body></html>"),o=e();return Kinetic.document=r,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=n.Image,Kinetic.root=t,Kinetic._nodeCanvas=n,void(module.exports=o)}"function"==typeof define&&define.amd&&define(e),Kinetic.document=document,Kinetic.window=window,Kinetic.root=t}((1,eval)("this"),function(){return Kinetic}),!function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,n=0;for(this.length=e;e>n;n++)this[n]=t[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;this.length>e;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;n>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,n=new Kinetic.Collection,i=t.length;for(e=0;i>e;e++)n.push(t[e]);return n},Kinetic.Collection._mapMethod=function(t){Kinetic.Collection.prototype[t]=function(){var e,n=this.length,i=[].slice.call(arguments);for(e=0;n>e;e++)this[e][t].apply(this[e],i);return this}},Kinetic.Collection.mapMethods=function(t){var e=t.prototype;for(var n in e)Kinetic.Collection._mapMethod(n)},Kinetic.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,r=this.m[1]*e+this.m[3]*n,o=this.m[0]*-n+this.m[2]*e,s=this.m[1]*-n+this.m[3]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=o,this.m[3]=s,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=o,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=s,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=s,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var n=this.m[0],i=this.m[1],r=this.m[2],o=this.m[3],s=this.m[4],a=this.m[5],c=(n*(e-a)-i*(t-s))/(n*o-i*r),l=(t-s-r*c)/n;return this.translate(l,c)}};var t="2d",e="[object Array]",n="[object Number]",i="[object String]",r=Math.PI/180,o=180/Math.PI,s="#",a="",c="0",l="Kinetic warning: ",u="Kinetic error: ",h="rgb(",d={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},f=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==e},_isNumber:function(t){return Object.prototype.toString.call(t)==n},_isString:function(t){return Object.prototype.toString.call(t)==i},_throttle:function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:(new Date).getTime(),s=null,o=t.apply(i,r),i=r=null};return function(){var l=(new Date).getTime();a||n.leading!==!1||(a=l);var u=e-(l-a);return i=this,r=arguments,0>=u?(clearTimeout(s),s=null,a=l,o=t.apply(i,r),i=r=null):s||n.trailing===!1||(s=setTimeout(c,u)),o}},_hasMethods:function(t){var e,n=[];for(e in t)this._isFunction(t[e])&&n.push(e);return n.length>0},createCanvasElement:function(){var t=Kinetic.document.createElement("canvas");return t.style=t.style||{},t},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Kinetic.document)return!0;return!1},_simplifyArray:function(t){var e,n,i=[],r=t.length,o=Kinetic.Util;for(e=0;r>e;e++)n=t[e],o._isNumber(n)?n=Math.round(1e3*n)/1e3:o._isString(n)||(n=""+n),i.push(n);return i},_getImage:function(e,n){var i,r;if(e)if(this._isElement(e))n(e);else if(this._isString(e))i=new Kinetic.window.Image,i.onload=function(){n(i)},i.src=e;else if(e.data){r=Kinetic.Util.createCanvasElement(),r.width=e.width,r.height=e.height;var o=r.getContext(t);o.putImageData(e,0,0),this._getImage(r.toDataURL(),n)}else n(null);else n(null)},_getRGBAString:function(t){var e=t.red||0,n=t.green||0,i=t.blue||0,r=t.alpha||1;return["rgba(",e,",",n,",",i,",",r,")"].join(a)},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(s,a);var e=parseInt(t,16);return{r:255&e>>16,g:255&e>>8,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);6>t.length;)t=c+t;return s+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in d?(e=d[t],{r:e[0],g:e[1],b:e[2]}):t[0]===s?this._hexToRgb(t.substring(1)):t.substr(0,4)===h?(e=f.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var n=this._clone(e);for(var i in t)n[i]=this._isObject(t[i])?this._merge(t[i],n[i]):t[i];return n},cloneObject:function(t){var e={};for(var n in t)e[n]=this._isObject(t[n])?this.cloneObject(t[n]):this._isArray(t[n])?this.cloneArray(t[n]):t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*r},_radToDeg:function(t){return t*o},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw Error(u+t)},warn:function(t){Kinetic.root.console&&console.warn&&console.warn(l+t)},extend:function(t,e){for(var n in e.prototype)n in t.prototype||(t.prototype[n]=e.prototype[n])},addMethods:function(t,e){var n;for(n in e)t.prototype[n]=e[n]},_getControlPoints:function(t,e,n,i,r,o,s){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),c=Math.sqrt(Math.pow(r-n,2)+Math.pow(o-i,2)),l=s*a/(a+c),u=s*c/(a+c),h=n-l*(r-t),d=i-l*(o-e),f=n+u*(r-t),p=i+u*(o-e);return[h,d,f,p]},_expandPoints:function(t,e){var n,i,r=t.length,o=[];for(n=2;r-2>n;n+=2)i=Kinetic.Util._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),o.push(i[0]),o.push(i[1]),o.push(t[n]),o.push(t[n+1]),o.push(i[2]),o.push(i[3]);return o},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),!function(){var t=Kinetic.Util.createCanvasElement(),e=t.getContext("2d"),n=Kinetic.UA.mobile?function(){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}():1;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.pixelRatio||Kinetic.pixelRatio||n;this.pixelRatio=e,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(i){return Kinetic.Util.warn("Unable to get data URL. "+i.message),""}}}},Kinetic.SceneCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.SceneContext(this),this.setSize(e,n)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),n.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),n.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.HitContext(this),this.setSize(e,n)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),!function(){var t=",",e="(",n=")",i="([",r="])",o=";",s="()",a="=",c=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(c){var l,u,h,d,f=this.traceArr,p=f.length,g="";for(l=0;p>l;l++)u=f[l],h=u.method,h?(d=u.args,g+=h,g+=c?s:Kinetic.Util._isArray(d[0])?i+d.join(t)+r:e+d.join(t)+n):(g+=u.property,c||(g+=a+u.val)),g+=o;return g},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,n=this.traceArr;n.push(t),e=n.length,e>=Kinetic.traceArrMax&&n.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,n=this,i=c.length,r=Kinetic.Util._simplifyArray,o=this.setAttr,s=function(t){var i,o=n[t];n[t]=function(){return e=r(Array.prototype.slice.call(arguments,0)),i=o.apply(n,arguments),n._trace({method:t,args:e}),i}};for(t=0;i>t;t++)s(c[t]);n.setAttr=function(){o.apply(n,arguments),n._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),n=t.getFillPatternX(),i=t.getFillPatternY(),r=t.getFillPatternScale(),o=Kinetic.getAngle(t.getFillPatternRotation()),s=t.getFillPatternOffset(),a=t.getFillPatternRepeat();(n||i)&&this.translate(n||0,i||0),o&&this.rotate(o),r&&this.scale(r.x,r.y),s&&this.translate(-1*s.x,-1*s.y),this.setAttr("fillStyle",this.createPattern(e,a||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),n=t.getFillLinearGradientEndPoint(),i=t.getFillLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var o=0;i.length>o;o+=2)r.addColorStop(i[o],i[o+1]);this.setAttr("fillStyle",r),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),n=t.getFillRadialGradientEndPoint(),i=t.getFillRadialGradientStartRadius(),r=t.getFillRadialGradientEndRadius(),o=t.getFillRadialGradientColorStops(),s=this.createRadialGradient(e.x,e.y,i,n.x,n.y,r),a=0;o.length>a;a+=2)s.addColorStop(o[a],o[a+1]);this.setAttr("fillStyle",s),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),n=t.getFillPatternImage(),i=t.getFillLinearGradientColorStops(),r=t.getFillRadialGradientColorStops(),o=t.getFillPriority();e&&"color"===o?this._fillColor(t):n&&"pattern"===o?this._fillPattern(t):i&&"linear-gradient"===o?this._fillLinearGradient(t):r&&"radial-gradient"===o?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):i?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();t.hasStroke()&&(n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),n||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,n=t.getAbsoluteOpacity(),i=e.get(t.getShadowColor(),"black"),r=e.get(t.getShadowBlur(),5),o=e.get(t.getShadowOpacity(),1),s=e.get(t.getShadowOffset(),{x:0,y:0});o&&this.setAttr("globalAlpha",o*n),this.setAttr("shadowColor",i),this.setAttr("shadowBlur",r),this.setAttr("shadowOffsetX",s.x),this.setAttr("shadowOffsetY",s.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),!function(){var t="get",e="set";Kinetic.Factory={addGetterSetter:function(t,e,n,i,r){this.addGetter(t,e,n),this.addSetter(t,e,i,r),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,n,i){var r=t+Kinetic.Util._capitalize(n);e.prototype[r]=function(){var t=this.attrs[n];return void 0===t?i:t}},addSetter:function(t,n,i,r){var o=e+Kinetic.Util._capitalize(n);t.prototype[o]=function(t){return i&&(t=i.call(this,t)),this._setAttr(n,t),r&&r.call(this),this}},addComponentsGetterSetter:function(n,i,r,o,s){var a,c,l=r.length,u=Kinetic.Util._capitalize,h=t+u(i),d=e+u(i);n.prototype[h]=function(){var t={};for(a=0;l>a;a++)c=r[a],t[c]=this.getAttr(i+u(c));return t},n.prototype[d]=function(t){var e,n=this.attrs[i];o&&(t=o.call(this,t));for(e in t)this._setAttr(i+u(e),t[e]);return this._fireChangeEvent(i,n,t),s&&s.call(this),this},this.addOverloadedGetterSetter(n,i)},addOverloadedGetterSetter:function(n,i){var r=Kinetic.Util._capitalize(i),o=e+r,s=t+r;n.prototype[i]=function(){return arguments.length?(this[o](arguments[0]),this):this[s]()}},backCompat:function(t,e){var n;for(n in e)t.prototype[n]=t.prototype[e[n]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return t>255?255:0>t?0:Math.round(t)},alphaComponent:function(t){return t>1?1:1e-4>t?1e-4:t}}}(),!function(){var t="absoluteOpacity",e="absoluteTransform",n="Change",i="children",r=".",o="",s="get",a="id",c="kinetic",l="listening",u="mouseenter",h="mouseleave",d="name",f="set",p="Shape",g=" ",v="stage",y="transform",m="Stage",b="visible",_=["id"],w=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(g);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(n){var i=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(n),this.on(w,function(){this._clearCache(y),i._clearSelfAndDescendantCache(e)}),this.on("visibleChange.kinetic",function(){i._clearSelfAndDescendantCache(b)}),this.on("listeningChange.kinetic",function(){i._clearSelfAndDescendantCache(l)}),this.on("opacityChange.kinetic",function(){i._clearSelfAndDescendantCache(t)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var n=this._cache[t];return void 0===n&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e=t||{},n=e.x||0,i=e.y||0,r=e.width||this.width(),o=e.height||this.height(),s=e.drawBorder||!1;if(this.getLayer(),0===r||0===o)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var a=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:o}),c=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:o}),l=new Kinetic.HitCanvas({width:r,height:o}),u=(this.transformsEnabled(),this.x(),this.y(),a.getContext()),h=l.getContext();return this.clearCache(),u.save(),h.save(),s&&(u.save(),u.beginPath(),u.rect(0,0,r,o),u.closePath(),u.setAttr("strokeStyle","red"),u.setAttr("lineWidth",5),u.stroke(),u.restore()),u.translate(-1*n,-1*i),h.translate(-1*n,-1*i),"Shape"===this.nodeType&&(u.translate(-1*this.x(),-1*this.y()),h.translate(-1*this.x(),-1*this.y())),this.drawScene(a,this),this.drawHit(l,this),u.restore(),h.restore(),this._cache.canvas={scene:a,filter:c,hit:l},this},_drawCachedSceneCanvas:function(t){t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,n,i,r=this.filters(),o=this._cache.canvas,s=o.scene,a=o.filter,c=a.getContext();if(r){if(!this._filterUpToDate){try{for(t=r.length,c.clear(),c.drawImage(s._canvas,0,0),e=c.getImageData(0,0,a.getWidth(),a.getHeight()),n=0;t>n;n++)i=r[n],i.call(this,e),c.putImageData(e,0,0)}catch(l){Kinetic.Util.warn("Unable to apply filter. "+l.message)}this._filterUpToDate=!0}return a}return s},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,n=e.hit;t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(n._canvas,0,0),t.restore()},on:function(t,e){var n,i,s,a,c,l=t.split(g),u=l.length;for(n=0;u>n;n++)i=l[n],s=i.split(r),a=s[0],c=s[1]||o,this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:c,handler:e});return this},off:function(t){var e,n,i,o,s,a,c=t.split(g),l=c.length;for(e=0;l>e;e++)if(i=c[e],o=i.split(r),s=o[0],a=o[1],s)this.eventListeners[s]&&this._off(s,a);else for(n in this.eventListeners)this._off(n,a);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};this.fire(t.type,e)},addEventListener:function(t,e){this.on(t,function(t){e.call(this,t.evt)})},remove:function(){var n=this.getParent();return n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(t),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=s+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,n;if(t)for(e in t)e===i||(n=f+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(l,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?e?e.isListening():!0:t},isVisible:function(){return this._getCache(b,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?e?e.isVisible():!0:t},shouldDrawHit:function(){var t=this.getLayer();return t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(c){for(e=[],n=c.length,i=0;n>i;i++)r=c[i],a++,r.nodeType!==p&&(e=e.concat(r.getChildren().toArray())),r._id===s._id&&(i=n);e.length>0&&o>=e[0].getDepth()&&t(e)}var e,n,i,r,o=this.getDepth(),s=this,a=0;return s.nodeType!==m&&t(s.getStage().getChildren()),a},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,n=this.offset();return e.m=t.slice(),e.translate(n.x,n.y),e.getTranslation()},setAbsolutePosition:function(t){var e,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(n),this},_setTransform:function(t){var n;for(n in t)this.attrs[n]=t[n];this._clearCache(y),this._clearSelfAndDescendantCache(e)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(y),this._clearSelfAndDescendantCache(e),t},move:function(t){var e=t.x,n=t.y,i=this.getX(),r=this.getY();return void 0!==e&&(i+=e),void 0!==n&&(r+=n),this.setPosition({x:i,y:r}),this},_eachAncestorReverse:function(t,e){var n,i,r=[],o=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(r.unshift(this);o&&(!e||o._id!==e._id);)r.unshift(o),o=o.parent;for(n=r.length,i=0;n>i;i++)t(r[i])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(t,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,n,i,r=Kinetic.Util,o={},s=this.getAttrs();o.attrs={};for(t in s)e=s[t],r._isFunction(e)||r._isElement(e)||r._isObject(e)&&r._hasMethods(e)||(n=this[t],delete s[t],i=n?n.call(this):null,s[t]=e,i!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),o},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(v,this._getStage)
},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,n){return n?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(e,this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var e,n,i=new Kinetic.Transform;return this._eachAncestorReverse(function(t){e=t.transformsEnabled(),n=t.getTransform(),"all"===e?i.multiply(n):"position"===e&&i.translate(t.x(),t.y())},t),i},getTransform:function(){return this._getCache(y,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),n=this.getY(),i=Kinetic.getAngle(this.getRotation()),r=this.getScaleX(),o=this.getScaleY(),s=this.getSkewX(),a=this.getSkewY(),c=this.getOffsetX(),l=this.getOffsetY();return(0!==e||0!==n)&&t.translate(e,n),0!==i&&t.rotate(i),(0!==s||0!==a)&&t.skew(s,a),(1!==r||1!==o)&&t.scale(r,o),(0!==c||0!==l)&&t.translate(-1*c,-1*l),t},clone:function(t){var e,n,i,r,o,s=this.getClassName(),a=Kinetic.Util.cloneObject(this.attrs);for(var l in _){var u=_[l];delete a[u]}for(e in t)a[e]=t[e];var h=new Kinetic[s](a);for(e in this.eventListeners)for(n=this.eventListeners[e],i=n.length,r=0;i>r;r++)o=n[r],0>o.name.indexOf(c)&&(h.eventListeners[e]||(h.eventListeners[e]=[]),h.eventListeners[e].push(o));return h},toDataURL:function(t){t=t||{};var e=t.mimeType||null,n=t.quality||null,i=this.getStage(),r=t.x||0,o=t.y||0,s=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(i?i.getWidth():0),height:t.height||this.getHeight()||(i?i.getHeight():0),pixelRatio:1}),a=s.getContext();return a.save(),(r||o)&&a.translate(-1*r,-1*o),this.drawScene(s),a.restore(),s.toDataURL(e,n)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var n,i,r=this.eventListeners[t];for(n=0;r.length>n;n++)if(i=r[n].name,!("kinetic"===i&&"kinetic"!==e||e&&i!==e)){if(r.splice(n,1),0===r.length){delete this.eventListeners[t];break}n--}},_fireChangeEvent:function(t,e,i){this._fire(t+n,{oldVal:e,newVal:i})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr(a,t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr(d,t),this},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=t[1],i=f+Kinetic.Util._capitalize(e),r=this[i];return Kinetic.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this},_setAttr:function(t,e){var n;void 0!==e&&(n=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,n,e))},_setComponentAttr:function(t,e,n){var i;void 0!==n&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))},_fireAndBubble:function(t,e,n){var i=!0;e&&this.nodeType===p&&(e.target=this),t===u&&n&&this._id===n._id?i=!1:t===h&&n&&this._id===n._id&&(i=!1),i&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var n,i=this.eventListeners[t];if(e.type=t,i)for(n=0;i.length>n;n++)i[n].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var n,i,r,o=Kinetic.Node.prototype.getClassName.call(t),s=t.children;if(e&&(t.attrs.container=e),n=new Kinetic[o](t.attrs),s)for(i=s.length,r=0;i>r;r++)n.add(this._createNode(s[r]));return n},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),!function(){function t(t){Kinetic.root.setTimeout(t,1e3/60)}function e(){return r.apply(Kinetic.root,arguments)}var n=500,i=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),r=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||t}();Kinetic.Animation=function(t,e){var n=Kinetic.Animation;this.func=t,this.setLayers(e),this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,n,i=this.layers;if(i){for(e=i.length,n=0;e>n;n++)if(i[n]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){var t,e=Kinetic.Animation,n=e.animations,i=n.length;for(t=0;i>t;t++)if(n[t].id===this.id)return!0;return!1},start:function(){var t=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){var e,n=t.id,i=this.animations,r=i.length;for(e=0;r>e;e++)if(i[e].id===n){this.animations.splice(e,1);break}},Kinetic.Animation._runFrames=function(){var t,e,n,r,o,s,a,c,l={},u=this.animations;for(r=0;u.length>r;r++){for(t=u[r],e=t.layers,n=t.func,t._updateFrameObject(i()),s=e.length,o=0;s>o;o++)a=e[o],void 0!==a._id&&(l[a._id]=a);n&&n.call(t,t.frame)}for(c in l)l[c].draw()},Kinetic.Animation._animationLoop=function(){var t=Kinetic.Animation;t.animations.length?(e(t._animationLoop),t._runFrames()):t.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())};var o=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){o.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this,e=Kinetic.Animation;this.batchAnim||(this.batchAnim=new e(function(){t.lastBatchDrawTime&&i()-t.lastBatchDrawTime>n&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=i(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}((1,eval)("this")),!function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,n=2,i=3,r=0;Kinetic.Tween=function(e){var n,i=this,s=e.node,a=s._id,c=e.duration||1,l=e.easing||Kinetic.Easings.Linear,u=!!e.yoyo;this.node=s,this._id=r++,this.anim=new Kinetic.Animation(function(){i.tween.onEnterFrame()},s.getLayer()),this.tween=new o(n,function(t){i._tweenFunc(t)},l,0,1,1e3*c,u),this._addListeners(),Kinetic.Tween.attrs[a]||(Kinetic.Tween.attrs[a]={}),Kinetic.Tween.attrs[a][this._id]||(Kinetic.Tween.attrs[a][this._id]={}),Kinetic.Tween.tweens[a]||(Kinetic.Tween.tweens[a]={});for(n in e)void 0===t[n]&&this._addAttr(n,e[n]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var n,i,r,o,s,a=this.node,c=a._id;if(r=Kinetic.Tween.tweens[c][t],r&&delete Kinetic.Tween.attrs[c][r][t],n=a.getAttr(t),Kinetic.Util._isArray(e))for(i=[],s=e.length,o=0;s>o;o++)i.push(e[o]-n[o]);else i=e-n;Kinetic.Tween.attrs[c][this._id][t]={start:n,diff:i},Kinetic.Tween.tweens[c][t]=this._id},_tweenFunc:function(t){var e,n,i,r,o,s,a,c=this.node,l=Kinetic.Tween.attrs[c._id][this._id];for(e in l){if(n=l[e],i=n.start,r=n.diff,Kinetic.Util._isArray(i))for(o=[],a=i.length,s=0;a>s;s++)o.push(i[s]+r[s]*t);else o=i+r*t;c.setAttr(e,o)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.node,this.tween.reset(),this},seek:function(t){return this.node,this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.node,this.tween.finish(),this},destroy:function(){var t,e=this.node._id,n=this._id,i=Kinetic.Tween.tweens[e];this.pause();for(t in i)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][n]}};var o=function(t,e,n,i,r,o,s){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()};o.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=i,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===n?this.setTime(t):this.state===i&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,n,i){var r=1.70158;return n*(t/=i)*t*((r+1)*t-r)+e},BackEaseOut:function(t,e,n,i){var r=1.70158;return n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut:function(t,e,n,i){var r=1.70158;return 1>(t/=i/2)?n/2*t*t*(((r*=1.525)+1)*t-r)+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn:function(t,e,n,i,r,o){var s=0;return 0===t?e:1==(t/=i)?e+n:(o||(o=.3*i),!r||Math.abs(n)>r?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/o))+e)},ElasticEaseOut:function(t,e,n,i,r,o){var s=0;return 0===t?e:1==(t/=i)?e+n:(o||(o=.3*i),!r||Math.abs(n)>r?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*i-s)*Math.PI/o)+n+e)},ElasticEaseInOut:function(t,e,n,i,r,o){var s=0;return 0===t?e:2==(t/=i/2)?e+n:(o||(o=1.5*.3*i),!r||Math.abs(n)>r?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/o)+e:.5*r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/o)+n+e)},BounceEaseOut:function(t,e,n,i){return 1/2.75>(t/=i)?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,i){return n-Kinetic.Easings.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut:function(t,e,n,i){return i/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,n,i)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+e},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return 1>(t/=i/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return 1>(t/=i/2)?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}}(),!function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,n=e.node;if(n){if(!e.isDragging){var i=n.getStage().getPointerPosition(),r=n.dragDistance(),o=Math.max(Math.abs(i.x-e.startPointerPos.x),Math.abs(i.y-e.startPointerPos.y));if(r>o)return}n._setDragPosition(t),e.isDragging||(e.isDragging=!0,n.fire("dragstart",{type:"dragstart",target:n,evt:t},!0)),n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)}},_endDragBefore:function(t){var e,n,i=Kinetic.DD,r=i.node;r&&(e=r.nodeType,n=r.getLayer(),i.anim.stop(),i.isDragging&&(i.isDragging=!1,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=r)),delete i.node,(n||r).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),n=this.getLayer(),i=e.getPointerPosition(),r=this.getAbsolutePosition();i&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=i,t.offset.x=i.x-r.x,t.offset.y=i.y-r.y,t.anim.setLayers(n||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,n=this.getStage().getPointerPosition(),i=this.getDragBoundFunc();if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y};void 0!==i&&(r=i.call(this,r,t)),this.setAbsolutePosition(r)}},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)}):this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=Kinetic.document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),!function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(t){if(t){var e=new Kinetic.Collection;return this.children.each(function(n){t(n)&&e.push(n)}),e}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),n=0;e.length>n;n++)t=e[n],delete t.parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),n=0;e.length>n;n++)t=e[n],delete t.parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(t){if(!(arguments.length>1)){if(t.getParent())return void t.moveTo(this);var e=this.children;return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this}for(var n=0;arguments.length>n;n++)this.add(arguments[n])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,n,i,r,o,s,a,c=[],l=t.replace(/ /g,"").split(","),u=l.length;for(e=0;u>e;e++)if(i=l[e],"#"===i.charAt(0))o=this._getNodeById(i.slice(1)),o&&c.push(o);else if("."===i.charAt(0))r=this._getNodesByName(i.slice(1)),c=c.concat(r);else for(s=this.getChildren(),a=s.length,n=0;a>n;n++)c=c.concat(s[n]._get(i));return Kinetic.Collection.toCollection(c)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),n=this.getChildren(),i=n.length,r=0;i>r;r++)e=e.concat(n[r]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;n>i;i++){var r=e[i];t.children.push(r.toObject())}return t},_getDescendants:function(t){for(var e=[],n=t.length,i=0;n>i;i++){var r=t[i];this.isAncestorOf(r)&&e.push(r)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas(),r=i&&i.getContext(),o=this._cache.canvas,s=o&&o.scene;return this.isVisible()&&(s?this._drawCachedSceneCanvas(r):this._drawChildren(i,"drawScene",e)),this},drawHit:function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas,r=i&&i.getContext(),o=this._cache.canvas,s=o&&o.hit;return this.shouldDrawHit()&&(s?this._drawCachedHitCanvas(r):this._drawChildren(i,"drawHit",e)),this},_drawChildren:function(t,e,n){var i,r,o=this.getLayer(),s=t&&t.getContext(),a=this.getClipWidth(),c=this.getClipHeight(),l=a&&c;l&&o&&(i=this.getClipX(),r=this.getClipY(),s.save(),o._applyTransform(this,s),s.beginPath(),s.rect(i,r,a,c),s.clip(),s.reset()),this.children.each(function(i){i[e](t,n)}),l&&s.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),!function(){function t(t){t.fill()}function e(t){t.stroke()}function n(t){t.fill()}function i(t){t.stroke()}function r(){this._clearCache(o)}var o="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(o){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=n,this._strokeFuncHit=i;for(var s,a=Kinetic.shapes;s=Kinetic.Util.getRandomColor(),!s||s in a;);this.colorKey=s,a[s]=this,Kinetic.Node.call(this,o),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",r)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(o,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(t){var e,n=this.getStage(),i=n.bufferHitCanvas;return i.getContext().clear(),this.drawScene(i),e=i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,e[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(t,e){var n,i,r,o=this.getLayer(),s=t||o.getCanvas(),a=s.getContext(),c=this._cache.canvas,l=this.sceneFunc(),u=this.hasShadow();return this.isVisible()&&(c?this._drawCachedSceneCanvas(a):l&&(a.save(),this._useBufferCanvas()?(n=this.getStage(),i=n.bufferCanvas,r=i.getContext(),r.clear(),r.save(),r._applyLineJoin(this),o._applyTransform(this,r,e),l.call(this,r),r.restore(),u&&(a.save(),a._applyShadow(this),a.drawImage(i._canvas,0,0),a.restore()),a._applyOpacity(this),a.drawImage(i._canvas,0,0)):(a._applyLineJoin(this),o._applyTransform(this,a,e),u&&(a.save(),a._applyShadow(this),l.call(this,a),a.restore()),a._applyOpacity(this),l.call(this,a)),a.restore())),this},drawHit:function(t,e){var n=this.getLayer(),i=t||n.hitCanvas,r=i.getContext(),o=this.hitFunc()||this.sceneFunc(),s=this._cache.canvas,a=s&&s.hit;return this.shouldDrawHit()&&(a?this._drawCachedHitCanvas(r):o&&(r.save(),r._applyLineJoin(this),n._applyTransform(this,r,e),o.call(this,r),r.restore())),this},drawHitFromCache:function(t){var e,n,i,r,o,s,a,c,l=t||0,u=this._cache.canvas,h=this._getCachedSceneCanvas(),d=h.getContext(),f=u.hit,p=f.getContext(),g=h.getWidth(),v=h.getHeight();p.clear();try{for(e=d.getImageData(0,0,g,v),n=e.data,i=p.getImageData(0,0,g,v),r=i.data,o=n.length,s=Kinetic.Util._hexToRgb(this.colorKey),a=0;o>a;a+=4)c=n[a+3],c>l&&(r[a]=s.r,r[a+1]=s.g,r[a+2]=s.b,r[a+3]=255);p.putImageData(i,0,0)}catch(y){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+y.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),!function(){function t(t,e){t.content.addEventListener(e,function(n){t[D+e](n)},!1)}var e="Stage",n="string",i="px",r="mouseout",o="mouseleave",s="mouseover",a="mouseenter",c="mousemove",l="mousedown",u="mouseup",h="click",d="dblclick",f="touchstart",p="touchend",g="tap",v="dbltap",y="touchmove",m="contentMouseout",b="contentMouseover",_="contentMousemove",w="contentMousedown",x="contentMouseup",S="contentClick",C="contentDblclick",k="contentTouchstart",T="contentTouchend",E="contentDbltap",A="contentTouchmove",K="div",P="relative",N="inline-block",j="kineticjs-content",O=" ",D="_",R="container",L="",F=[l,c,u,r,f,y,p,s],B=F.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){if(typeof t===n){var e=t;if(t=Kinetic.document.getElementById(t),!t)throw"Can not find container in document with id "+e}return this._setAttr(R,t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,n=e.length;for(t=0;n>t;t++)e[t].clear();return this},clone:function(t){return t||(t={}),t.container=Kinetic.document.createElement(K),Kinetic.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Kinetic.stages.indexOf(this);e>-1&&Kinetic.stages.splice(e,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(r){var o=c[r],l=o.toDataURL(),u=new Kinetic.window.Image;u.onload=function(){a.drawImage(u,0,0),c.length-1>r?e(r+1):t.callback(s.toDataURL(n,i))},u.src=l}t=t||{};var n=t.mimeType||null,i=t.quality||null,r=t.x||0,o=t.y||0,s=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),a=s.getContext()._context,c=this.children;(r||o)&&a.translate(-1*r,-1*o),e(0)},toImage:function(t){var e=t.callback;
t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,n,i=this.getChildren(),r=i.length,o=r-1;for(e=o;e>=0;e--)if(n=i[e].getIntersection(t))return n;return null},_resizeDOM:function(){if(this.content){var t,e,n=this.getWidth(),r=this.getHeight(),o=this.getChildren(),s=o.length;for(this.content.style.width=n+i,this.content.style.height=r+i,this.bufferCanvas.setSize(n,r),this.bufferHitCanvas.setSize(n,r),t=0;s>t;t++)e=o[t],e.getCanvas().setSize(n,r),e.hitCanvas.setSize(n,r),e.draw()}},add:function(t){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),this.content.appendChild(t.canvas._canvas),this;for(var e=0;arguments.length>e;e++)this.add(arguments[e])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var e=0;B>e;e++)t(this,F[e])},_mouseover:function(t){Kinetic.UA.mobile||(this._setPointerPosition(t),this._fire(b,{evt:t}))},_mouseout:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(r,{evt:t}),e._fireAndBubble(o,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire(m,{evt:t})}},_mousemove:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===n._id?n._fireAndBubble(c,{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(r,{evt:t},n),this.targetShape._fireAndBubble(o,{evt:t},n)),n._fireAndBubble(s,{evt:t},this.targetShape),n._fireAndBubble(a,{evt:t},this.targetShape),this.targetShape=n):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(r,{evt:t}),this.targetShape._fireAndBubble(o,{evt:t}),this.targetShape=null),this._fire(_,{evt:t}),e&&e._drag(t)}t.preventDefault&&t.preventDefault()},_mousedown:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e,e._fireAndBubble(l,{evt:t})),this._fire(w,{evt:t})}t.preventDefault&&t.preventDefault()},_mouseup:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(u,{evt:t}),Kinetic.listenClickTap&&n&&n._id===e._id&&(e._fireAndBubble(h,{evt:t}),i&&e._fireAndBubble(d,{evt:t}))),this._fire(x,{evt:t}),Kinetic.listenClickTap&&(this._fire(S,{evt:t}),i&&this._fire(C,{evt:t})),Kinetic.listenClickTap=!1}t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.tapStartShape=e,e._fireAndBubble(f,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(k,{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(p,{evt:t}),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble(g,{evt:t}),n&&e._fireAndBubble(v,{evt:t})),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire(T,{evt:t}),n&&this._fire(E,{evt:t})),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()&&(n._fireAndBubble(y,{evt:t}),n.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(A,{evt:t}),e&&e._drag(t)},_setPointerPosition:function(t){var e,n=this._getContentPosition(),i=t.offsetX,r=t.clientX,o=null,s=null;t=t?t:window.event,void 0!==t.touches?t.touches.length>0&&(e=t.touches[0],o=e.clientX-n.left,s=e.clientY-n.top):void 0!==i?(o=i,s=t.offsetY):"mozilla"===Kinetic.UA.browser?(o=t.layerX,s=t.layerY):void 0!==r&&n&&(o=r-n.left,s=t.clientY-n.top),null!==o&&null!==s&&(this.pointerPos={x:o,y:s})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();if(!t){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";t=Kinetic.document.createElement(K)}t.innerHTML=L,this.content=Kinetic.document.createElement(K),this.content.style.position=P,this.content.style.display=N,this.content.className=j,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var n,i,r=t.split(O),o=r.length;for(n=0;o>n;n++)i=r[n],this.content.addEventListener(i,e,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),!function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(t){this.nodeType="Layer",Kinetic.Container.call(this,t)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),e.getChildren().length-1>t?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),t&&t.parentNode&&Kinetic.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),!function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,t)},_validateAdd:function(t){var e=t.getType();"Shape"!==e&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),n=t||e&&e.getCanvas();return this.getClearBeforeDraw()&&n.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,n),this},_applyTransform:function(t,e,n){if(!n||n._id!==this._id){var i=t.getTransform().getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}},draw:function(){return this.drawScene(),this},clear:function(t){return this.getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),this.getCanvas()._canvas.style.display=t?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),!function(){var t="#",e="beforeDraw",n="draw",i=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],r=i.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,n,o,s;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(n=0;r>n;n++){if(o=i[n],e=this._getIntersection({x:t.x+o.x,y:t.y+o.y}),s=e.shape)return s;if(!e.antialiased)return null}},_getIntersection:function(e){var n,i,r=this.hitCanvas.context._context.getImageData(e.x,e.y,1,1).data,o=r[3];return 255===o?(n=Kinetic.Util._rgbToHex(r[0],r[1],r[2]),i=Kinetic.shapes[t+n],{shape:i}):o>0?{antialiased:!0}:{}},drawScene:function(t,i){var r=this.getLayer(),o=t||r&&r.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&o.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,o,i),this._fire(n,{node:this}),this},_applyTransform:function(t,e,n){var i=t.getAbsoluteTransform(n).getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},drawHit:function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.getClearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,i,e),this},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),!function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),!function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),n=this.getWidth(),i=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(n-e,0),t.arc(n-e,e,e,3*Math.PI/2,0,!1),t.lineTo(n,i-e),t.arc(n-e,i-e,e,0,Math.PI/2,!1),t.lineTo(e,i),t.arc(e,i-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),!function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,t,!1),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),!function(){var t="Image";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(t){var e,n,i,r,o=this.getWidth(),s=this.getHeight(),a=this.getImage();a&&(e=this.getCrop(),n=e.width,i=e.height,r=n&&i?[a,e.x,e.y,n,i,0,0,o,s]:[a,0,0,o,s]),t.beginPath(),t.rect(0,0,o,s),t.closePath(),t.fillStrokeShape(this),a&&t.drawImage.apply(t,r)},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),!function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="auto",i="center",r="Change.kinetic",o="2d",s="-",a="",c="left",l="text",u="Text",h="middle",d="normal",f="px ",p=" ",g="right",v="word",y="char",m="none",b=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],_=b.length,w=Kinetic.Util.createCanvasElement().getContext(o);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(i){var o=this;void 0===i.width&&(i.width=n),void 0===i.height&&(i.height=n),Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this.className=u;for(var s=0;_>s;s++)this.on(b[s]+r,o._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,n=this.getPadding(),r=this.getTextHeight(),o=this.getLineHeight()*r,s=this.textArr,a=s.length,l=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",h),t.setAttr("textAlign",c),t.save(),t.translate(n,0),t.translate(0,n+r/2),e=0;a>e;e++){var u=s[e],d=u.text,f=u.width;t.save(),this.getAlign()===g?t.translate(l-f-2*n,0):this.getAlign()===i&&t.translate((l-f-2*n)/2,0),this.partialText=d,t.fillStrokeShape(this),t.restore(),t.translate(0,o)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:""+t;return this._setAttr(l,e),this},getWidth:function(){return this.attrs.width===n?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===n?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,n=w,i=this.getFontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:parseInt(i,10)}},_getContextFont:function(){return this.getFontStyle()+p+this.getFontVariant()+p+this.getFontSize()+f+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return w.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),i=0,r=this.getLineHeight()*e,o=this.attrs.width,a=this.attrs.height,c=o!==n,l=a!==n,u=this.getPadding(),h=o-2*u,d=a-2*u,f=0,g=this.getWrap(),v=g!==m,b=g!==y&&v;this.textArr=[],w.save(),w.font=this._getContextFont();for(var _=0,x=t.length;x>_;++_){var S=t[_],C=this._getTextWidth(S);if(c&&C>h)for(;S.length>0;){for(var k=0,T=S.length,E="",A=0;T>k;){var K=k+T>>>1,P=S.slice(0,K+1),N=this._getTextWidth(P);h>=N?(k=K+1,E=P,A=N):T=K}if(!E)break;if(b){var j=Math.max(E.lastIndexOf(p),E.lastIndexOf(s))+1;j>0&&(k=j,E=E.slice(0,k),A=this._getTextWidth(E))}if(this._addTextLine(E,A),i=Math.max(i,A),f+=r,!v||l&&f+r>d)break;if(S=S.slice(k),S.length>0&&(C=this._getTextWidth(S),h>=C)){this._addTextLine(S,C),f+=r,i=Math.max(i,C);break}}else this._addTextLine(S,C),f+=r,i=Math.max(i,C);if(l&&f+r>d)break}w.restore(),this.textHeight=e,this.textWidth=i}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",d),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",d),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",c),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",v),Kinetic.Factory.addGetter(Kinetic.Text,"text",a),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(t){var e,n=function(t,e){e===void 0&&(e={}),this.init(t,e)},i=n.prototype,r=["canvas","vml"],o=["oval","spiral","square","rect","roundRect"],s=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,a=-1!==navigator.appVersion.indexOf("MSIE")&&8===parseFloat(navigator.appVersion.split("MSIE")[1])?!0:!1,c=!!document.createElement("canvas").getContext,l=!0,u=function(t,e,n){var i,t=document.createElement(t);for(i in n)t[i]=n[i];return e!==void 0&&e.appendChild(t),t},h=function(t,e){for(var n in e)t.style[n]=e[n];return t},d=function(t,e){for(var n in e)t.setAttribute(n,e[n]);return t},f=function(t,e,n,i){t.save(),t.translate(e,n),t.rotate(i),t.translate(-e,-n),t.beginPath()};i.init=function(t,i){"boolean"==typeof i.safeVML&&(l=i.safeVML);try{this.mum=void 0!==document.getElementById(t)?document.getElementById(t):document.body}catch(o){this.mum=document.body}if(i.id=i.id!==void 0?i.id:"canvasLoader",this.cont=u("div",this.mum,{id:i.id}),c)e=r[0],this.can=u("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=h(u("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(e=r[1],n.vmlSheet===void 0){document.getElementsByTagName("head")[0].appendChild(u("style")),n.vmlSheet=document.styleSheets[document.styleSheets.length-1];var s,a=["group","oval","roundrect","fill"];for(s in a)n.vmlSheet.addRule(a[s],"behavior:url(#default#VML); position:absolute;")}this.vml=u("group",this.cont)}this.setColor(this.color),this.draw(),h(this.cont,{display:"none"})},i.cont={},i.can={},i.con={},i.cCan={},i.cCon={},i.timer={},i.activeId=0,i.diameter=40,i.setDiameter=function(t){this.diameter=Math.round(Math.abs(t)),this.redraw()},i.getDiameter=function(){return this.diameter},i.cRGB={},i.color="#000000",i.setColor=function(t){this.color=s.test(t)?t:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},i.getColor=function(){return this.color},i.shape=o[0],i.setShape=function(t){for(var e in o)if(t===o[e]){this.shape=t,this.redraw();break}},i.getShape=function(){return this.shape},i.density=40,i.setDensity=function(t){this.density=l&&e===r[1]?40>=Math.round(Math.abs(t))?Math.round(Math.abs(t)):40:Math.round(Math.abs(t)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},i.getDensity=function(){return this.density},i.range=1.3,i.setRange=function(t){this.range=Math.abs(t),this.redraw()},i.getRange=function(){return this.range},i.speed=2,i.setSpeed=function(t){this.speed=Math.round(Math.abs(t))},i.getSpeed=function(){return this.speed},i.fps=24,i.setFPS=function(t){this.fps=Math.round(Math.abs(t)),this.reset()},i.getFPS=function(){return this.fps},i.getRGB=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},i.draw=function(){var t,n,i,s,c,l,p,g,v,y=0,m=this.density,b=Math.round(m*this.range),_=0;v=this.cCon;var w=this.diameter;if(e===r[0])for(v.clearRect(0,0,1e3,1e3),d(this.can,{width:w,height:w}),d(this.cCan,{width:w,height:w});m>y;){switch(g=b>=y?1-1/b*y:g=0,l=270-360/m*y,p=l/180*Math.PI,v.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+(""+g)+")",this.shape){case o[0]:case o[1]:t=.07*w,s=.47*w+Math.cos(p)*(.47*w-t)-.47*w,c=.47*w+Math.sin(p)*(.47*w-t)-.47*w,v.beginPath(),this.shape===o[1]?v.arc(.5*w+s,.5*w+c,t*g,0,2*Math.PI,!1):v.arc(.5*w+s,.5*w+c,t,0,2*Math.PI,!1);break;case o[2]:t=.12*w,s=Math.cos(p)*(.47*w-t)+.5*w,c=Math.sin(p)*(.47*w-t)+.5*w,f(v,s,c,p),v.fillRect(s,c-.5*t,t,t);break;case o[3]:case o[4]:n=.3*w,i=.27*n,s=Math.cos(p)*(i+.13*(w-i))+.5*w,c=Math.sin(p)*(i+.13*(w-i))+.5*w,f(v,s,c,p),this.shape===o[3]?v.fillRect(s,c-.5*i,n,i):(t=.55*i,v.moveTo(s+t,c-.5*i),v.lineTo(s+n-t,c-.5*i),v.quadraticCurveTo(s+n,c-.5*i,s+n,c-.5*i+t),v.lineTo(s+n,c-.5*i+i-t),v.quadraticCurveTo(s+n,c-.5*i+i,s+n-t,c-.5*i+i),v.lineTo(s+t,c-.5*i+i),v.quadraticCurveTo(s,c-.5*i+i,s,c-.5*i+i-t),v.lineTo(s,c-.5*i+t),v.quadraticCurveTo(s,c-.5*i,s+t,c-.5*i))}v.closePath(),v.fill(),v.restore(),++y}else{switch(h(this.cont,{width:w,height:w}),h(this.vml,{width:w,height:w}),this.shape){case o[0]:case o[1]:p="oval",t=140;break;case o[2]:p="roundrect",t=120;break;case o[3]:case o[4]:p="roundrect",t=300}for(n=i=t,s=500-i,c=.5*-i;m>y;){switch(g=b>=y?1-1/b*y:g=0,l=270-360/m*y,this.shape){case o[1]:n=i=t*g,s=500-.5*t-.5*t*g,c=.5*(t-t*g);break;case o[0]:case o[2]:a&&(c=0,this.shape===o[2]&&(s=500-.5*i));break;case o[3]:case o[4]:n=.95*t,i=.28*n,a?(s=0,c=500-.5*i):(s=500-n,c=.5*-i),_=this.shape===o[4]?.6:0}v=d(h(u("group",this.vml),{width:1e3,height:1e3,rotation:l}),{coordsize:"1000,1000",coordorigin:"-500,-500"}),v=h(u(p,v,{stroked:!1,arcSize:_}),{width:n,height:i,top:c,left:s}),u("fill",v,{color:this.color,opacity:g}),++y}}this.tick(!0)},i.clean=function(){if(e===r[0])this.con.clearRect(0,0,1e3,1e3);else{var t=this.vml;if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)}},i.redraw=function(){this.clean(),this.draw()},i.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},i.tick=function(t){var n=this.con,i=this.diameter;t||(this.activeId+=360/this.density*this.speed),e===r[0]?(n.clearRect(0,0,i,i),f(n,.5*i,.5*i,this.activeId/180*Math.PI),n.drawImage(this.cCan,0,0,i,i),n.restore()):(this.activeId>=360&&(this.activeId-=360),h(this.vml,{rotation:this.activeId}))},i.show=function(){if("number"!=typeof this.timer){var t=this;this.timer=self.setInterval(function(){t.tick()},Math.round(1e3/this.fps)),h(this.cont,{display:"block"})}},i.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,h(this.cont,{display:"none"}))},i.kill=function(){var t=this.cont;"number"==typeof this.timer&&this.hide(),e===r[0]?(t.removeChild(this.can),t.removeChild(this.cCan)):t.removeChild(this.vml);for(var n in this)delete this[n]},t.CanvasLoader=n}(window),!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.autobahn=t()}}(function(){var define,module,exports;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);throw Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;i.length>s;s++)r(i[s]);return r}({1:[function(t,e){function n(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.once=n,i.off=n,i.emit=n,i.binding=function(){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw Error("process.chdir is not supported")}},{}],2:[function(t,e,n){function i(t,e,n,i){var n=n||1e3,i=i||32,r={keySize:i/4,iterations:n,hasher:o.algo.SHA256},s=o.PBKDF2(t,e,r);return s.toString(o.enc.Base64)}function r(t,e){return o.HmacSHA256(e,t).toString(o.enc.Base64)}var o=t("crypto-js");n.sign=r,n.derive_key=i},{"crypto-js":28}],3:[function(t,e,n){function i(t,e){var n=t.defer();return navigator.id.watch({loggedInUser:e,onlogin:function(t){n.resolve(t)},onlogout:function(){t.leave("wamp.close.logout")}}),n.promise.then?n.promise:n}t("when"),t("when/function"),n.auth=i},{when:77,"when/function":54}],4:[function(t,e,n){(function(e){t("./polyfill.js");var i=t("../package.json"),r=t("when");"AUTOBAHN_DEBUG"in e&&AUTOBAHN_DEBUG&&(t("when/monitor/console"),"console"in e&&console.log("AutobahnJS debug enabled"));var o=t("./util.js"),s=t("./log.js"),a=t("./session.js"),c=t("./connection.js"),l=t("./configure.js"),u=t("./auth/persona.js"),h=t("./auth/cra.js");n.version=i.version,n.transports=l.transports,n.Connection=c.Connection,n.Session=a.Session,n.Invocation=a.Invocation,n.Event=a.Event,n.Result=a.Result,n.Error=a.Error,n.Subscription=a.Subscription,n.Registration=a.Registration,n.Publication=a.Publication,n.auth_persona=u.auth,n.auth_cra=h,n.when=r,n.util=o,n.log=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../package.json":79,"./auth/cra.js":2,"./auth/persona.js":3,"./configure.js":5,"./connection.js":6,"./log.js":7,"./polyfill.js":8,"./session.js":16,"./util.js":19,when:77,"when/monitor/console":75}],5:[function(t,e,n){function i(){this._repository={}}i.prototype.register=function(t,e){this._repository[t]=e},i.prototype.isRegistered=function(t){return this._repository[t]?!0:!1},i.prototype.get=function(t){if(void 0!==this._repository[t])return this._repository[t];throw"no such transport: "+t},i.prototype.list=function(){var t=[];for(var e in this._repository)t.push(e);return t};var r=new i,o=t("./transport/websocket.js");r.register("websocket",o.Factory);var s=t("./transport/longpoll.js");r.register("longpoll",s.Factory),n.transports=r},{"./transport/longpoll.js":17,"./transport/websocket.js":18}],6:[function(t,e,n){(function(e){var i=t("when"),r=t("./session.js"),o=t("./util.js"),s=t("./log.js"),a=t("./autobahn.js"),c=function(t){var n=this;n._options=t,t&&t.use_es6_promises?"Promise"in e?n._defer=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t}:(s.debug("Warning: ES6 promises requested, but not found! Falling back to whenjs."),n._defer=i.defer):n._defer=t&&t.use_deferred?t.use_deferred:i.defer,n._options.transports||(n._options.transports=[{type:"websocket",url:n._options.url}]),n._transport_factories=[],n._init_transport_factories(),n._session=null,n._session_close_reason=null,n._session_close_message=null,n._retry_if_unreachable=void 0!==n._options.retry_if_unreachable?n._options.retry_if_unreachable:!0,n._max_retries=n._options.max_retries||15,n._initial_retry_delay=n._options.initial_retry_delay||1.5,n._max_retry_delay=n._options.max_retry_delay||300,n._retry_delay_growth=n._options.retry_delay_growth||1.5,n._retry_delay_jitter=n._options.retry_delay_jitter||.1,n._connect_successes=0,n._retry=!1,n._retry_count=0,n._retry_delay=n._initial_retry_delay,n._is_retrying=!1,n._retry_timer=null};c.prototype._create_transport=function(){for(var t=0;this._transport_factories.length>t;++t){var e=this._transport_factories[t];s.debug("trying to create WAMP transport of type: "+e.type);try{var n=e.create();if(n)return s.debug("using WAMP transport type: "+e.type),n}catch(i){s.debug("could not create WAMP transport '"+e.type+"': "+i)}}return null},c.prototype._init_transport_factories=function(){var t,e,n,i;o.assert(this._options.transports,"No transport.factory specified"),t=this._options.transports;for(var r=0;this._options.transports.length>r;++r){e=this._options.transports[r],e.url||(e.url=this._options.url),e.protocols||(e.protocols=this._options.protocols),o.assert(e.type,"No transport.type specified"),o.assert("string"==typeof e.type,"transport.type must be a string");try{i=a.transports.get(e.type),i&&(n=new i(e),this._transport_factories.push(n))}catch(s){console.error(s)}}},c.prototype._autoreconnect_reset_timer=function(){var t=this;t._retry_timer&&clearTimeout(t._retry_timer),t._retry_timer=null},c.prototype._autoreconnect_reset=function(){var t=this;t._autoreconnect_reset_timer(),t._retry_count=0,t._retry_delay=t._initial_retry_delay,t._is_retrying=!1},c.prototype._autoreconnect_advance=function(){var t=this;t._retry_delay_jitter&&(t._retry_delay=o.rand_normal(t._retry_delay,t._retry_delay*t._retry_delay_jitter)),t._retry_delay>t._max_retry_delay&&(t._retry_delay=t._max_retry_delay),t._retry_count+=1;var e;return e=t._retry&&t._retry_count<=t._max_retries?{count:t._retry_count,delay:t._retry_delay,will_retry:!0}:{count:null,delay:null,will_retry:!1},t._retry_delay_growth&&(t._retry_delay=t._retry_delay*t._retry_delay_growth),e},c.prototype.open=function(){function t(){if(e._transport=e._create_transport(),e._transport)e._session=new r.Session(e._transport,e._defer,e._options.onchallenge),e._session_close_reason=null,e._session_close_message=null,e._transport.onopen=function(){e._autoreconnect_reset(),e._connect_successes+=1,e._session.join(e._options.realm,e._options.authmethods,e._options.authid)},e._session.onjoin=function(t){if(e.onopen)try{e.onopen(e._session,t)}catch(n){s.debug("Exception raised from app code while firing Connection.onopen()",n)}},e._session.onleave=function(t,n){e._session_close_reason=t,e._session_close_message=n.message||"",e._retry=!1,e._transport.close(1e3)},e._transport.onclose=function(n){e._autoreconnect_reset_timer(),e._transport=null;var i=null;0===e._connect_successes?(i="unreachable",e._retry_if_unreachable||(e._retry=!1)):i=n.wasClean?"closed":"lost";var r=e._autoreconnect_advance();if(e.onclose){var o={reason:e._session_close_reason,message:e._session_close_message,retry_delay:r.delay,retry_count:r.count,will_retry:r.will_retry};try{var a=e.onclose(i,o)}catch(c){s.debug("Exception raised from app code while firing Connection.onclose()",c)}}e._session&&(e._session._id=null,e._session=null,e._session_close_reason=null,e._session_close_message=null),e._retry&&!a&&(r.will_retry?(e._is_retrying=!0,s.debug("retrying in "+r.delay+" s"),e._retry_timer=setTimeout(t,1e3*r.delay)):s.debug("giving up trying to reconnect"))
};else if(e._retry=!1,e.onclose){var n={reason:null,message:null,retry_delay:null,retry_count:null,will_retry:!1};e.onclose("unsupported",n)}}var e=this;if(e._transport)throw"connection already open (or opening)";e._autoreconnect_reset(),e._retry=!0,t()},c.prototype.close=function(t,e){var n=this;if(!n._transport&&!n._is_retrying)throw"connection already closed";n._retry=!1,n._session&&n._session.isOpen?n._session.leave(t,e):n._transport&&n._transport.close(1e3)},Object.defineProperty(c.prototype,"defer",{get:function(){return this._defer}}),Object.defineProperty(c.prototype,"session",{get:function(){return this._session}}),Object.defineProperty(c.prototype,"isOpen",{get:function(){return this._session&&this._session.isOpen?!0:!1}}),Object.defineProperty(c.prototype,"isConnected",{get:function(){return this._transport?!0:!1}}),Object.defineProperty(c.prototype,"transport",{get:function(){return this._transport?this._transport:{info:{type:"none",url:null,protocol:null}}}}),Object.defineProperty(c.prototype,"isRetrying",{get:function(){return this._is_retrying}}),n.Connection=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./autobahn.js":4,"./log.js":7,"./session.js":16,"./util.js":19,when:77}],7:[function(t,e,n){(function(t){var e=function(){};"AUTOBAHN_DEBUG"in t&&AUTOBAHN_DEBUG&&"console"in t&&(e=function(){console.log.apply(console,arguments)}),n.debug=e}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t){t("./polyfill/object"),t("./polyfill/array"),t("./polyfill/string"),t("./polyfill/function"),t("./polyfill/console"),t("./polyfill/typedarray"),t("./polyfill/json")},{"./polyfill/array":9,"./polyfill/console":10,"./polyfill/function":11,"./polyfill/json":12,"./polyfill/object":13,"./polyfill/string":14,"./polyfill/typedarray":15}],9:[function(){"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t){"use strict";var e,n,i,r;if(null===this||this===void 0)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");if(n=Object(this),e=n.length>>>0,r=0,arguments.length>=2)i=arguments[1];else{for(;e>r&&!r in n;)r++;if(r>=e)throw new TypeError("Reduce of empty array with no initial value");i=n[r++]}for(;e>r;r++)r in n&&(i=t(i,n[r],r,n));return i}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(t,e){void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0);for(var n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(t,e){for(void 0===e&&(e=this.length-1),0>e&&(e+=this.length),e>this.length-1&&(e=this.length-1),e++;e-->0;)if(e in this&&this[e]===t)return e;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(t,e){for(var n=0,i=this.length;i>n;n++)n in this&&t.call(e,this[n],n,this)}),"map"in Array.prototype||(Array.prototype.map=function(t,e){for(var n=Array(this.length),i=0,r=this.length;r>i;i++)i in this&&(n[i]=t.call(e,this[i],i,this));return n}),"filter"in Array.prototype||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,o=this.length;o>r;r++)r in this&&t.call(e,n=this[r],r,this)&&i.push(n);return i}),"every"in Array.prototype||(Array.prototype.every=function(t,e){for(var n=0,i=this.length;i>n;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(t,e){for(var n=0,i=this.length;i>n;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1}),"function"!=typeof Array.prototype.reduceRight&&(Array.prototype.reduceRight=function(t){"use strict";if(null===this||this===void 0)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),i=n.length>>>0,r=i-1;if(arguments.length>=2)e=arguments[1];else{for(;r>=0&&!r in n;)r--;if(0>r)throw new TypeError("Reduce of empty array with no initial value");e=n[r--]}for(;r>=0;r--)r in n&&(e=t(e,n[r],r,n));return e})},{}],10:[function(){(function(t){(function(t){t||(t=window.console={log:function(){},info:function(){},warn:function(){},error:function(){},assert:function(){}}),"object"==typeof t.log&&(t.log=Function.prototype.call.bind(t.log,t),t.info=Function.prototype.call.bind(t.info,t),t.warn=Function.prototype.call.bind(t.warn,t),t.error=Function.prototype.call.bind(t.error,t),t.debug=Function.prototype.call.bind(t.info,t)),"group"in t||(t.group=function(e){t.info("\n--- "+e+" ---\n")}),"groupEnd"in t||(t.groupEnd=function(){t.log("\n")}),"assert"in t||(t.assert=function(t,e){if(!t)try{throw Error("assertion failed: "+e)}catch(n){setTimeout(function(){throw n},0)}}),"time"in t||function(){var e={};t.time=function(t){e[t]=(new Date).getTime()},t.timeEnd=function(n){var i=(new Date).getTime(),r=n in e?i-e[n]:0;t.info(n+": "+r+"ms")}}()})(t.console)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(){Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(t,Array.prototype.concat.apply(n,arguments))}})},{}],12:[function(_dereq_,module,exports){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,s,a=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?c+"":"null";case"boolean":case"null":return c+"";case"object":if(!c)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)s[n]=str(n,c)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,c),r&&s.push(quote(i)+(gap?": ":":")+r));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c),r&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),exports.JSON=JSON},{}],13:[function(){Object.create||(Object.create=function(){function t(){}return function(e){if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");return t.prototype=e,new t}}()),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var o,s,a=[];for(o in r)t.call(r,o)&&a.push(o);if(e)for(s=0;i>s;s++)t.call(r,n[s])&&a.push(n[s]);return a}}())},{}],14:[function(){"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")})},{}],15:[function(t,e,n){(function(t){t.Uint8Array===void 0&&function(t,e){"use strict";function n(t){switch(typeof t){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===t?"null":"object"}}function i(t){return Object.prototype.toString.call(t).replace(/^\[object *|\]$/g,"")}function r(t){return"function"==typeof t}function o(t){if(null===t||t===P)throw TypeError();return Object(t)}function s(t){return t>>0}function a(t){return t>>>0}function c(t){function e(e){Object.defineProperty(t,e,{get:function(){return t._getter(e)},set:function(n){t._setter(e,n)},enumerable:!0,configurable:!1})}if(t.length>N)throw RangeError("Array too large for polyfill");var n;for(n=0;t.length>n;n+=1)e(n)}function l(t,e){var n=32-e;return t<<n>>n}function u(t,e){var n=32-e;return t<<n>>>n}function h(t){return[255&t]}function d(t){return l(t[0],8)}function f(t){return[255&t]}function p(t){return u(t[0],8)}function g(t){return t=I(Number(t)),[0>t?0:t>255?255:255&t]}function v(t){return[255&t>>8,255&t]}function y(t){return l(t[0]<<8|t[1],16)}function m(t){return[255&t>>8,255&t]}function b(t){return u(t[0]<<8|t[1],16)}function _(t){return[255&t>>24,255&t>>16,255&t>>8,255&t]}function w(t){return l(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function x(t){return[255&t>>24,255&t>>16,255&t>>8,255&t]}function S(t){return u(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function C(t,e,n){function i(t){var e=D(t),n=t-e;return.5>n?e:n>.5?e+1:e%2?e+1:e}var r,o,s,a,c,l,u,h=(1<<e-1)-1;for(t!==t?(o=(1<<e)-1,s=B(2,n-1),r=0):1/0===t||t===-1/0?(o=(1<<e)-1,s=0,r=0>t?1:0):0===t?(o=0,s=0,r=1/t===-1/0?1:0):(r=0>t,t=O(t),t>=B(2,1-h)?(o=F(D(R(t)/j),1023),s=i(t/B(2,o)*B(2,n)),s/B(2,n)>=2&&(o+=1,s=1),o>h?(o=(1<<e)-1,s=0):(o+=h,s-=B(2,n))):(o=0,s=i(t/B(2,1-h-n)))),c=[],a=n;a;a-=1)c.push(s%2?1:0),s=D(s/2);for(a=e;a;a-=1)c.push(o%2?1:0),o=D(o/2);for(c.push(r?1:0),c.reverse(),l=c.join(""),u=[];l.length;)u.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return u}function k(t,e,n){var i,r,o,s,a,c,l,u,h=[];for(i=t.length;i;i-=1)for(o=t[i-1],r=8;r;r-=1)h.push(o%2?1:0),o>>=1;return h.reverse(),s=h.join(""),a=(1<<e-1)-1,c=parseInt(s.substring(0,1),2)?-1:1,l=parseInt(s.substring(1,1+e),2),u=parseInt(s.substring(1+e),2),l===(1<<e)-1?0!==u?0/0:1/0*c:l>0?c*B(2,l-a)*(1+u/B(2,n)):0!==u?c*B(2,-(a-1))*(u/B(2,n)):0>c?-0:0}function T(t){return k(t,11,52)}function E(t){return C(t,11,52)}function A(t){return k(t,8,23)}function K(t){return C(t,8,23)}var P=void 0,N=1e5,j=Math.LN2,O=Math.abs,D=Math.floor,R=Math.log,L=Math.max,F=Math.min,B=Math.pow,I=Math.round;(function(){var t=Object.defineProperty,e=!function(){try{return Object.defineProperty({},"x",{})}catch(t){return!1}}();(!t||e)&&(Object.defineProperty=function(e,n,i){if(t)try{return t(e,n,i)}catch(r){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in i&&Object.prototype.__defineGetter__.call(e,n,i.get),Object.prototype.__defineSetter__&&"set"in i&&Object.prototype.__defineSetter__.call(e,n,i.set),"value"in i&&(e[n]=i.value),e})})(),function(){function l(t){if(t=s(t),0>t)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"_bytes",{value:Array(t)});for(var e=0;t>e;e+=1)this._bytes[e]=0}function u(){if(!arguments.length||"object"!=typeof arguments[0])return function(t){if(t=s(t),0>t)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:t}),Object.defineProperty(this,"byteLength",{value:t*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new l(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===n(arguments[0])&&arguments[0]instanceof u)return function(t){if(this.constructor!==t.constructor)throw TypeError();var e=t.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new l(e)}),Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:t.length});for(var n=0;this.length>n;n+=1)this._setter(n,t._getter(n))}.apply(this,arguments);if(arguments.length>=1&&"object"===n(arguments[0])&&!(arguments[0]instanceof u)&&!(arguments[0]instanceof l||"ArrayBuffer"===i(arguments[0])))return function(t){var e=t.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new l(e)}),Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:t.length});for(var n=0;this.length>n;n+=1){var i=t[n];this._setter(n,Number(i))}}.apply(this,arguments);if(arguments.length>=1&&"object"===n(arguments[0])&&(arguments[0]instanceof l||"ArrayBuffer"===i(arguments[0])))return function(t,e,n){if(e=a(e),e>t.byteLength)throw RangeError("byteOffset out of range");if(e%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(n===P){var i=t.byteLength-e;if(i%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");n=i/this.BYTES_PER_ELEMENT}else n=a(n),i=n*this.BYTES_PER_ELEMENT;if(e+i>t.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:t}),Object.defineProperty(this,"byteLength",{value:i}),Object.defineProperty(this,"byteOffset",{value:e}),Object.defineProperty(this,"length",{value:n})}.apply(this,arguments);throw TypeError()}function C(t,e,n){var i=function(){Object.defineProperty(this,"constructor",{value:i}),u.apply(this,arguments),c(this)};"__proto__"in i?i.__proto__=u:(i.from=u.from,i.of=u.of),i.BYTES_PER_ELEMENT=t;var r=function(){};return r.prototype=k,i.prototype=new r,Object.defineProperty(i.prototype,"BYTES_PER_ELEMENT",{value:t}),Object.defineProperty(i.prototype,"_pack",{value:e}),Object.defineProperty(i.prototype,"_unpack",{value:n}),i}t.ArrayBuffer=t.ArrayBuffer||l,Object.defineProperty(u,"from",{value:function(t){return new this(t)}}),Object.defineProperty(u,"of",{value:function(){return new this(arguments)}});var k={};u.prototype=k,Object.defineProperty(u.prototype,"_getter",{value:function(t){if(1>arguments.length)throw SyntaxError("Not enough arguments");if(t=a(t),t>=this.length)return P;var e,n,i=[];for(e=0,n=this.byteOffset+t*this.BYTES_PER_ELEMENT;this.BYTES_PER_ELEMENT>e;e+=1,n+=1)i.push(this.buffer._bytes[n]);return this._unpack(i)}}),Object.defineProperty(u.prototype,"get",{value:u.prototype._getter}),Object.defineProperty(u.prototype,"_setter",{value:function(t,e){if(2>arguments.length)throw SyntaxError("Not enough arguments");if(t=a(t),!(t>=this.length)){var n,i,r=this._pack(e);for(n=0,i=this.byteOffset+t*this.BYTES_PER_ELEMENT;this.BYTES_PER_ELEMENT>n;n+=1,i+=1)this.buffer._bytes[i]=r[n]}}}),Object.defineProperty(u.prototype,"constructor",{value:u}),Object.defineProperty(u.prototype,"copyWithin",{value:function(t,e){var n=arguments[2],i=o(this),r=i.length,c=a(r);c=L(c,0);var l,u=s(t);l=0>u?L(c+u,0):F(u,c);var h,d=s(e);h=0>d?L(c+d,0):F(d,c);var f;f=n===P?c:s(n);var p;p=0>f?L(c+f,0):F(f,c);var g,v=F(p-h,c-l);for(l>from&&h+v>l?(g=-1,h=h+v-1,l=l+v-1):g=1;count>0;)i._setter(l,i._getter(h)),h+=g,l+=g,v-=1;return i}}),Object.defineProperty(u.prototype,"every",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(!r(t))throw TypeError();for(var i=arguments[1],o=0;n>o;o++)if(!t.call(i,e._getter(o),o,e))return!1;return!0}}),Object.defineProperty(u.prototype,"fill",{value:function(t){var e=arguments[1],n=arguments[2],i=o(this),r=i.length,c=a(r);c=L(c,0);var l,u=s(e);l=0>u?L(c+u,0):F(u,c);var h;h=n===P?c:s(n);var d;for(d=0>h?L(c+h,0):F(h,c);d>l;)i._setter(l,t),l+=1;return i}}),Object.defineProperty(u.prototype,"filter",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(!r(t))throw TypeError();for(var i=[],o=arguments[1],s=0;n>s;s++){var c=e._getter(s);t.call(o,c,s,e)&&i.push(c)}return new this.constructor(i)}}),Object.defineProperty(u.prototype,"find",{value:function(t){var e=o(this),n=e.length,i=a(n);if(!r(t))throw TypeError();for(var s=arguments.length>1?arguments[1]:P,c=0;i>c;){var l=e._getter(c),u=t.call(s,l,c,e);if(Boolean(u))return l;++c}return P}}),Object.defineProperty(u.prototype,"findIndex",{value:function(t){var e=o(this),n=e.length,i=a(n);if(!r(t))throw TypeError();for(var s=arguments.length>1?arguments[1]:P,c=0;i>c;){var l=e._getter(c),u=t.call(s,l,c,e);if(Boolean(u))return c;++c}return-1}}),Object.defineProperty(u.prototype,"forEach",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(!r(t))throw TypeError();for(var i=arguments[1],o=0;n>o;o++)t.call(i,e._getter(o),o,e)}}),Object.defineProperty(u.prototype,"indexOf",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(0===n)return-1;var i,r=0;if(arguments.length>0&&(i=Number(arguments[1]),i!==r?r=0:0!==i&&i!==1/0&&i!==-(1/0)&&(r=(i>0||-1)*D(O(i)))),r>=n)return-1;for(var o=r>=0?r:L(n-O(r),0);n>o;o++)if(e._getter(o)===t)return o;return-1}}),Object.defineProperty(u.prototype,"join",{value:function(t){if(this===P||null===this)throw TypeError();for(var e=Object(this),n=a(e.length),i=Array(n),r=0;n>r;++r)i[r]=e._getter(r);return i.join(t===P?",":t)}}),Object.defineProperty(u.prototype,"lastIndexOf",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(0===n)return-1;var i=n;arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(i>0||-1)*D(O(i))));for(var r=i>=0?F(i,n-1):n-O(i);r>=0;r--)if(e._getter(r)===t)return r;return-1}}),Object.defineProperty(u.prototype,"map",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(!r(t))throw TypeError();var i=[];i.length=n;for(var o=arguments[1],s=0;n>s;s++)i[s]=t.call(o,e._getter(s),s,e);return new this.constructor(i)}}),Object.defineProperty(u.prototype,"reduce",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(!r(t))throw TypeError();if(0===n&&1===arguments.length)throw TypeError();var i,o=0;for(i=arguments.length>=2?arguments[1]:e._getter(o++);n>o;)i=t.call(P,i,e._getter(o),o,e),o++;return i}}),Object.defineProperty(u.prototype,"reduceRight",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(!r(t))throw TypeError();if(0===n&&1===arguments.length)throw TypeError();var i,o=n-1;for(i=arguments.length>=2?arguments[1]:e._getter(o--);o>=0;)i=t.call(P,i,e._getter(o),o,e),o--;return i}}),Object.defineProperty(u.prototype,"reverse",{value:function(){if(this===P||null===this)throw TypeError();for(var t=Object(this),e=a(t.length),n=D(e/2),i=0,r=e-1;n>i;++i,--r){var o=t._getter(i);t._setter(i,t._getter(r)),t._setter(r,o)}return t}}),Object.defineProperty(u.prototype,"set",{value:function(){if(1>arguments.length)throw SyntaxError("Not enough arguments");var t,e,n,i,r,o,s,c,l,u;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(t=arguments[0],n=a(arguments[1]),n+t.length>this.length)throw RangeError("Offset plus length of array is out of range");if(c=this.byteOffset+n*this.BYTES_PER_ELEMENT,l=t.length*this.BYTES_PER_ELEMENT,t.buffer===this.buffer){for(u=[],r=0,o=t.byteOffset;l>r;r+=1,o+=1)u[r]=t.buffer._bytes[o];for(r=0,s=c;l>r;r+=1,s+=1)this.buffer._bytes[s]=u[r]}else for(r=0,o=t.byteOffset,s=c;l>r;r+=1,o+=1,s+=1)this.buffer._bytes[s]=t.buffer._bytes[o]}else{if("object"!=typeof arguments[0]||arguments[0].length===P)throw TypeError("Unexpected argument type(s)");if(e=arguments[0],i=a(e.length),n=a(arguments[1]),n+i>this.length)throw RangeError("Offset plus length of array is out of range");for(r=0;i>r;r+=1)o=e[r],this._setter(n+r,Number(o))}}}),Object.defineProperty(u.prototype,"slice",{value:function(t,e){for(var n=o(this),i=n.length,r=a(i),c=s(t),l=0>c?L(r+c,0):F(c,r),u=e===P?r:s(e),h=0>u?L(r+u,0):F(u,r),d=h-l,f=n.constructor,p=new f(d),g=0;h>l;){var v=n._getter(l);p._setter(g,v),++l,++g}return p}}),Object.defineProperty(u.prototype,"some",{value:function(t){if(this===P||null===this)throw TypeError();var e=Object(this),n=a(e.length);if(!r(t))throw TypeError();for(var i=arguments[1],o=0;n>o;o++)if(t.call(i,e._getter(o),o,e))return!0;return!1}}),Object.defineProperty(u.prototype,"sort",{value:function(t){if(this===P||null===this)throw TypeError();for(var e=Object(this),n=a(e.length),i=Array(n),r=0;n>r;++r)i[r]=e._getter(r);for(t?i.sort(t):i.sort(),r=0;n>r;++r)e._setter(r,i[r]);return e}}),Object.defineProperty(u.prototype,"subarray",{value:function(t,e){function n(t,e,n){return e>t?e:t>n?n:t}t=s(t),e=s(e),1>arguments.length&&(t=0),2>arguments.length&&(e=this.length),0>t&&(t=this.length+t),0>e&&(e=this.length+e),t=n(t,0,this.length),e=n(e,0,this.length);var i=e-t;return 0>i&&(i=0),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,i)}});var N=C(1,h,d),j=C(1,f,p),R=C(1,g,p),B=C(2,v,y),I=C(2,m,b),M=C(4,_,w),H=C(4,x,S),$=C(4,K,A),z=C(8,E,T);t.Int8Array=e.Int8Array=t.Int8Array||N,t.Uint8Array=e.Uint8Array=t.Uint8Array||j,t.Uint8ClampedArray=e.Uint8ClampedArray=t.Uint8ClampedArray||R,t.Int16Array=e.Int16Array=t.Int16Array||B,t.Uint16Array=e.Uint16Array=t.Uint16Array||I,t.Int32Array=e.Int32Array=t.Int32Array||M,t.Uint32Array=e.Uint32Array=t.Uint32Array||H,t.Float32Array=e.Float32Array=t.Float32Array||$,t.Float64Array=e.Float64Array=t.Float64Array||z}(),function(){function e(t,e){return r(t.get)?t.get(e):t[e]}function n(t,e,n){if(!(t instanceof ArrayBuffer||"ArrayBuffer"===i(t)))throw TypeError();if(e=a(e),e>t.byteLength)throw RangeError("byteOffset out of range");if(n=n===P?t.byteLength-e:a(n),e+n>t.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:t}),Object.defineProperty(this,"byteLength",{value:n}),Object.defineProperty(this,"byteOffset",{value:e})}function o(n){return function(i,r){if(i=a(i),i+n.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");i+=this.byteOffset;for(var o=new t.Uint8Array(this.buffer,i,n.BYTES_PER_ELEMENT),s=[],l=0;n.BYTES_PER_ELEMENT>l;l+=1)s.push(e(o,l));return Boolean(r)===Boolean(c)&&s.reverse(),e(new n(new t.Uint8Array(s).buffer),0)}}function s(n){return function(i,r,o){if(i=a(i),i+n.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var s,l,u=new n([r]),h=new t.Uint8Array(u.buffer),d=[];for(s=0;n.BYTES_PER_ELEMENT>s;s+=1)d.push(e(h,s));Boolean(o)===Boolean(c)&&d.reverse(),l=new Uint8Array(this.buffer,i,n.BYTES_PER_ELEMENT),l.set(d)}}var c=function(){var n=new t.Uint16Array([4660]),i=new t.Uint8Array(n.buffer);return 18===e(i,0)}();Object.defineProperty(n.prototype,"getUint8",{value:o(t.Uint8Array)}),Object.defineProperty(n.prototype,"getInt8",{value:o(t.Int8Array)}),Object.defineProperty(n.prototype,"getUint16",{value:o(t.Uint16Array)}),Object.defineProperty(n.prototype,"getInt16",{value:o(t.Int16Array)}),Object.defineProperty(n.prototype,"getUint32",{value:o(t.Uint32Array)}),Object.defineProperty(n.prototype,"getInt32",{value:o(t.Int32Array)}),Object.defineProperty(n.prototype,"getFloat32",{value:o(t.Float32Array)}),Object.defineProperty(n.prototype,"getFloat64",{value:o(t.Float64Array)}),Object.defineProperty(n.prototype,"setUint8",{value:s(t.Uint8Array)}),Object.defineProperty(n.prototype,"setInt8",{value:s(t.Int8Array)}),Object.defineProperty(n.prototype,"setUint16",{value:s(t.Uint16Array)}),Object.defineProperty(n.prototype,"setInt16",{value:s(t.Int16Array)}),Object.defineProperty(n.prototype,"setUint32",{value:s(t.Uint32Array)}),Object.defineProperty(n.prototype,"setInt32",{value:s(t.Int32Array)}),Object.defineProperty(n.prototype,"setFloat32",{value:s(t.Float32Array)}),Object.defineProperty(n.prototype,"setFloat64",{value:s(t.Float64Array)}),t.DataView=t.DataView||n}()}(n,window),"window"in t&&("Uint8ClampedArray"in window||(window.Uint8ClampedArray=t.Uint8Array))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(t,e,n){(function(e){function i(){return Math.floor(9007199254740992*Math.random())}t("when");var r=t("when/function"),o=t("./log.js"),s=t("./util.js");Date.now=Date.now||function(){return+new Date},WAMP_FEATURES={caller:{features:{caller_identification:!0,progressive_call_results:!0}},callee:{features:{progressive_call_results:!0}},publisher:{features:{subscriber_blackwhite_listing:!0,publisher_exclusion:!0,publisher_identification:!0}},subscriber:{features:{publisher_identification:!0}}};var a=function(t,e){var n=this;n.caller=t,n.progress=e},c=function(t,e){var n=this;n.publication=t,n.publisher=e},l=function(t,e){var n=this;n.args=t||[],n.kwargs=e||{}},u=function(t,e,n){var i=this;i.error=t,i.args=e||[],i.kwargs=n||{}},h=function(t,e,n,i,r){var o=this;o.topic=t,o.handler=e,o.options=n||{},o.session=i,o.id=r,o.active=!0};h.prototype.unsubscribe=function(){var t=this;return t.session.unsubscribe(t)};var d=function(t,e,n,i,r){var o=this;o.procedure=t,o.endpoint=e,o.options=n||{},o.session=i,o.id=r,o.active=!0};d.prototype.unregister=function(){var t=this;return t.session.unregister(t)};var f=function(t){var e=this;e.id=t},p={HELLO:1,WELCOME:2,ABORT:3,CHALLENGE:4,AUTHENTICATE:5,GOODBYE:6,HEARTBEAT:7,ERROR:8,PUBLISH:16,PUBLISHED:17,SUBSCRIBE:32,SUBSCRIBED:33,UNSUBSCRIBE:34,UNSUBSCRIBED:35,EVENT:36,CALL:48,CANCEL:49,RESULT:50,REGISTER:64,REGISTERED:65,UNREGISTER:66,UNREGISTERED:67,INVOCATION:68,INTERRUPT:69,YIELD:70},g=function(t,n,i){var s=this;s._socket=t,s._defer=n,s._onchallenge=i,s._id=null,s._realm=null,s._features=null,s._goodbye_sent=!1,s._transport_is_closing=!1,s._publish_reqs={},s._subscribe_reqs={},s._unsubscribe_reqs={},s._call_reqs={},s._register_reqs={},s._unregister_reqs={},s._subscriptions={},s._registrations={},s._invocations={},s._prefixes={},s._send_wamp=function(t){s._socket.send(t)},s._protocol_violation=function(t){o.debug("failing transport due to protocol violation: "+t),s._socket.close(1002,"protocol violation: "+t)},s._MESSAGE_MAP={},s._MESSAGE_MAP[p.ERROR]={},s._process_SUBSCRIBED=function(t){var e=t[1],n=t[2];if(e in s._subscribe_reqs){var i=s._subscribe_reqs[e],r=i[0],o=i[1],a=i[2],c=i[3];n in s._subscriptions||(s._subscriptions[n]=[]);var l=new h(o,a,c,s,n);s._subscriptions[n].push(l),r.resolve(l),delete s._subscribe_reqs[e]}else s._protocol_violation("SUBSCRIBED received for non-pending request ID "+e)},s._MESSAGE_MAP[p.SUBSCRIBED]=s._process_SUBSCRIBED,s._process_SUBSCRIBE_ERROR=function(t){var e=t[2];if(e in s._subscribe_reqs){t[3];var n=new u(t[4],t[5],t[6]),i=s._subscribe_reqs[e],r=i[0];r.reject(n),delete s._subscribe_reqs[e]}else s._protocol_violation("SUBSCRIBE-ERROR received for non-pending request ID "+e)},s._MESSAGE_MAP[p.ERROR][p.SUBSCRIBE]=s._process_SUBSCRIBE_ERROR,s._process_UNSUBSCRIBED=function(t){var e=t[1];if(e in s._unsubscribe_reqs){var n=s._unsubscribe_reqs[e],i=n[0],r=n[1];if(r in s._subscriptions){for(var o=s._subscriptions[r],a=0;o.length>a;++a)o[a].active=!1;delete s._subscriptions[r]}i.resolve(!0),delete s._unsubscribe_reqs[e]}else s._protocol_violation("UNSUBSCRIBED received for non-pending request ID "+e)},s._MESSAGE_MAP[p.UNSUBSCRIBED]=s._process_UNSUBSCRIBED,s._process_UNSUBSCRIBE_ERROR=function(t){var e=t[2];if(e in s._unsubscribe_reqs){t[3];var n=new u(t[4],t[5],t[6]),i=s._unsubscribe_reqs[e],r=i[0];i[1],r.reject(n),delete s._unsubscribe_reqs[e]}else s._protocol_violation("UNSUBSCRIBE-ERROR received for non-pending request ID "+e)},s._MESSAGE_MAP[p.ERROR][p.UNSUBSCRIBE]=s._process_UNSUBSCRIBE_ERROR,s._process_PUBLISHED=function(t){var e=t[1],n=t[2];if(e in s._publish_reqs){var i=s._publish_reqs[e],r=i[0];i[1];var o=new f(n);r.resolve(o),delete s._publish_reqs[e]}else s._protocol_violation("PUBLISHED received for non-pending request ID "+e)},s._MESSAGE_MAP[p.PUBLISHED]=s._process_PUBLISHED,s._process_PUBLISH_ERROR=function(t){var e=t[2];if(e in s._publish_reqs){t[3];var n=new u(t[4],t[5],t[6]),i=s._publish_reqs[e],r=i[0];i[1],r.reject(n),delete s._publish_reqs[e]}else s._protocol_violation("PUBLISH-ERROR received for non-pending request ID "+e)},s._MESSAGE_MAP[p.ERROR][p.PUBLISH]=s._process_PUBLISH_ERROR,s._process_EVENT=function(t){var e=t[1];if(e in s._subscriptions)for(var n=t[2],i=t[3],r=t[4]||[],a=t[5]||{},l=new c(n,i.publisher),u=s._subscriptions[e],h=0;u.length>h;++h)try{u[h].handler(r,a,l)}catch(d){o.debug("Exception raised in event handler",d)}else s._protocol_violation("EVENT received for non-subscribed subscription ID "+e)},s._MESSAGE_MAP[p.EVENT]=s._process_EVENT,s._process_REGISTERED=function(t){var e=t[1],n=t[2];if(e in s._register_reqs){var i=s._register_reqs[e],r=i[0],o=i[1],a=i[2],c=i[3],l=new d(o,a,c,s,n);s._registrations[n]=l,r.resolve(l),delete s._register_reqs[e]}else s._protocol_violation("REGISTERED received for non-pending request ID "+e)},s._MESSAGE_MAP[p.REGISTERED]=s._process_REGISTERED,s._process_REGISTER_ERROR=function(t){var e=t[2];if(e in s._register_reqs){t[3];var n=new u(t[4],t[5],t[6]),i=s._register_reqs[e],r=i[0];r.reject(n),delete s._register_reqs[e]}else s._protocol_violation("REGISTER-ERROR received for non-pending request ID "+e)},s._MESSAGE_MAP[p.ERROR][p.REGISTER]=s._process_REGISTER_ERROR,s._process_UNREGISTERED=function(t){var e=t[1];if(e in s._unregister_reqs){var n=s._unregister_reqs[e],i=n[0],r=n[1];r.id in s._registrations&&delete s._registrations[r.id],r.active=!1,i.resolve(),delete s._unregister_reqs[e]}else s._protocol_violation("UNREGISTERED received for non-pending request ID "+e)},s._MESSAGE_MAP[p.UNREGISTERED]=s._process_UNREGISTERED,s._process_UNREGISTER_ERROR=function(t){var e=t[2];if(e in s._unregister_reqs){t[3];var n=new u(t[4],t[5],t[6]),i=s._unregister_reqs[e],r=i[0];i[1],r.reject(n),delete s._unregister_reqs[e]}else s._protocol_violation("UNREGISTER-ERROR received for non-pending request ID "+e)},s._MESSAGE_MAP[p.ERROR][p.UNREGISTER]=s._process_UNREGISTER_ERROR,s._process_RESULT=function(t){var e=t[1];if(e in s._call_reqs){var n=t[2],i=t[3]||[],r=t[4]||{},o=null;i.length>1||Object.keys(r).length>0?o=new l(i,r):i.length>0&&(o=i[0]);var a=s._call_reqs[e],c=a[0],u=a[1];n.progress?u&&u.receive_progress&&c.notify(o):(c.resolve(o),delete s._call_reqs[e])}else s._protocol_violation("CALL-RESULT received for non-pending request ID "+e)},s._MESSAGE_MAP[p.RESULT]=s._process_RESULT,s._process_CALL_ERROR=function(t){var e=t[2];if(e in s._call_reqs){t[3];var n=new u(t[4],t[5],t[6]),i=s._call_reqs[e],r=i[0];i[1],r.reject(n),delete s._call_reqs[e]}else s._protocol_violation("CALL-ERROR received for non-pending request ID "+e)
},s._MESSAGE_MAP[p.ERROR][p.CALL]=s._process_CALL_ERROR,s._process_INVOCATION=function(t){var e=t[1],n=t[2],i=t[3];if(n in s._registrations){var o=s._registrations[n].endpoint,c=t[4]||[],h=t[5]||{},d=null;i.receive_progress&&(d=function(t,n){var i=[p.YIELD,e,{progress:!0}];t=t||[],n=n||{};var r=Object.keys(n).length;(t.length||r)&&(i.push(t),r&&i.push(n)),s._send_wamp(i)});var f=new a(i.caller,d);r.call(o,c,h,f).then(function(t){var n=[p.YIELD,e,{}];if(t instanceof l){var i=Object.keys(t.kwargs).length;(t.args.length||i)&&(n.push(t.args),i&&n.push(t.kwargs))}else n.push([t]);s._send_wamp(n)},function(t){var n=[p.ERROR,p.INVOCATION,e,{}];if(t instanceof u){n.push(t.error);var i=Object.keys(t.kwargs).length;(t.args.length||i)&&(n.push(t.args),i&&n.push(t.kwargs))}else n.push("wamp.error.runtime_error"),n.push([t]);s._send_wamp(n)})}else s._protocol_violation("INVOCATION received for non-registered registration ID "+e)},s._MESSAGE_MAP[p.INVOCATION]=s._process_INVOCATION,s._socket.onmessage=function(t){var e=t[0];if(s._id)if(e===p.GOODBYE){if(!s._goodbye_sent){var n=[p.GOODBYE,{},"wamp.error.goodbye_and_out"];s._send_wamp(n)}s._id=null,s._realm=null,s._features=null;var i=t[1],a=t[2];s.onleave&&s.onleave(a,i)}else if(e===p.ERROR){var c=t[1];c in s._MESSAGE_MAP[p.ERROR]?s._MESSAGE_MAP[e][c](t):s._protocol_violation("unexpected ERROR message with request_type "+c)}else e in s._MESSAGE_MAP?s._MESSAGE_MAP[e](t):s._protocol_violation("unexpected message type "+e);else if(e===p.WELCOME){s._id=t[1];var l=t[2];if(s._features={},l.roles.broker&&(s._features.subscriber={},s._features.publisher={},l.roles.broker.features)){for(var u in WAMP_FEATURES.publisher.features)s._features.publisher[u]=WAMP_FEATURES.publisher.features[u]&&l.roles.broker.features[u];for(var u in WAMP_FEATURES.subscriber.features)s._features.subscriber[u]=WAMP_FEATURES.subscriber.features[u]&&l.roles.broker.features[u]}if(l.roles.dealer&&(s._features.caller={},s._features.callee={},l.roles.dealer.features)){for(var u in WAMP_FEATURES.caller.features)s._features.caller[u]=WAMP_FEATURES.caller.features[u]&&l.roles.dealer.features[u];for(var u in WAMP_FEATURES.callee.features)s._features.callee[u]=WAMP_FEATURES.callee.features[u]&&l.roles.dealer.features[u]}s.onjoin&&s.onjoin(t[2])}else if(e===p.ABORT){var i=t[1],a=t[2];s.onleave&&s.onleave(a,i)}else if(e===p.CHALLENGE)if(s._onchallenge){var h=t[1],d=t[2];r.call(s._onchallenge,s,h,d).then(function(t){var e=[p.AUTHENTICATE,t,{}];s._send_wamp(e)},function(t){o.debug("onchallenge() raised:",t);var e=[p.ABORT,{message:"sorry, I cannot authenticate (onchallenge handler raised an exception)"},"wamp.error.cannot_authenticate"];s._send_wamp(e),s._socket.close(1e3)})}else{o.debug("received WAMP challenge, but no onchallenge() handler set");var t=[p.ABORT,{message:"sorry, I cannot authenticate (no onchallenge handler set)"},"wamp.error.cannot_authenticate"];s._send_wamp(t),s._socket.close(1e3)}else s._protocol_violation("unexpected message type "+e)},s._created="performance"in e&&"now"in performance?performance.now():Date.now()};Object.defineProperty(g.prototype,"defer",{get:function(){return this._defer}}),Object.defineProperty(g.prototype,"id",{get:function(){return this._id}}),Object.defineProperty(g.prototype,"realm",{get:function(){return this._realm}}),Object.defineProperty(g.prototype,"isOpen",{get:function(){return null!==this.id}}),Object.defineProperty(g.prototype,"features",{get:function(){return this._features}}),Object.defineProperty(g.prototype,"subscriptions",{get:function(){for(var t=Object.keys(this._subscriptions),e=[],n=0;t.length>n;++n)e.push(this._subscriptions[t[n]]);return e}}),Object.defineProperty(g.prototype,"registrations",{get:function(){for(var t=Object.keys(this._registrations),e=[],n=0;t.length>n;++n)e.push(this._registrations[t[n]]);return e}}),g.prototype.log=function(){var t=this;if("console"in e){var n=null;if(t._id&&t._created){var i=null;i="performance"in e&&"now"in performance?performance.now()-t._created:Date.now()-t._created,n="WAMP session "+t._id+" on '"+t._realm+"' at "+Math.round(1e3*i)/1e3+" ms"}else n="WAMP session";if("group"in console){console.group(n);for(var r=0;arguments.length>r;r+=1)console.log(arguments[r]);console.groupEnd()}else{for(var o=[n+": "],r=0;arguments.length>r;r+=1)o.push(arguments[r]);console.log.apply(console,o)}}},g.prototype.join=function(t,e,n){s.assert("string"==typeof t,"Session.join: <realm> must be a string"),s.assert(!e||Array.isArray(e),"Session.join: <authmethods> must be an array []"),s.assert(!n||"string"==typeof n,"Session.join: <authid> must be a string");var i=this;if(i.isOpen)throw"session already open";i._goodbye_sent=!1,i._realm=t;var r={};r.roles=WAMP_FEATURES,e&&(r.authmethods=e),n&&(r.authid=n);var o=[p.HELLO,t,r];i._send_wamp(o)},g.prototype.leave=function(t,e){s.assert(!t||"string"==typeof t,"Session.leave: <reason> must be a string"),s.assert(!e||"string"==typeof e,"Session.leave: <message> must be a string");var n=this;if(!n.isOpen)throw"session not open";t||(t="wamp.close.normal");var i={};e&&(i.message=e);var r=[p.GOODBYE,i,t];n._send_wamp(r),n._goodbye_sent=!0},g.prototype.call=function(t,e,n,r){s.assert("string"==typeof t,"Session.call: <procedure> must be a string"),s.assert(!e||Array.isArray(e),"Session.call: <args> must be an array []"),s.assert(!n||n instanceof Object,"Session.call: <kwargs> must be an object {}"),s.assert(!r||r instanceof Object,"Session.call: <options> must be an object {}");var o=this;if(!o.isOpen)throw"session not open";var a=i(),c=o._defer();o._call_reqs[a]=[c,r];var l=[p.CALL,a,r||{},o.resolve(t)];return e&&(l.push(e),n&&l.push(n)),o._send_wamp(l),c.promise.then?c.promise:c},g.prototype.publish=function(t,e,n,r){s.assert("string"==typeof t,"Session.publish: <topic> must be a string"),s.assert(!e||Array.isArray(e),"Session.publish: <args> must be an array []"),s.assert(!n||n instanceof Object,"Session.publish: <kwargs> must be an object {}"),s.assert(!r||r instanceof Object,"Session.publish: <options> must be an object {}");var o=this;if(!o.isOpen)throw"session not open";var a=r&&r.acknowledge,c=null,l=i();a&&(c=o._defer(),o._publish_reqs[l]=[c,r]);var u=[p.PUBLISH,l,r||{},o.resolve(t)];return e&&(u.push(e),n&&u.push(n)),o._send_wamp(u),c?c.promise.then?c.promise:c:void 0},g.prototype.subscribe=function(t,e,n){s.assert("string"==typeof t,"Session.subscribe: <topic> must be a string"),s.assert("function"==typeof e,"Session.subscribe: <handler> must be a function"),s.assert(!n||n instanceof Object,"Session.subscribe: <options> must be an object {}");var r=this;if(!r.isOpen)throw"session not open";var o=i(),a=r._defer();r._subscribe_reqs[o]=[a,t,e,n];var c=[p.SUBSCRIBE,o];return n?c.push(n):c.push({}),c.push(r.resolve(t)),r._send_wamp(c),a.promise.then?a.promise:a},g.prototype.register=function(t,e,n){s.assert("string"==typeof t,"Session.register: <procedure> must be a string"),s.assert("function"==typeof e,"Session.register: <endpoint> must be a function"),s.assert(!n||n instanceof Object,"Session.register: <options> must be an object {}");var r=this;if(!r.isOpen)throw"session not open";var o=i(),a=r._defer();r._register_reqs[o]=[a,t,e,n];var c=[p.REGISTER,o];return n?c.push(n):c.push({}),c.push(r.resolve(t)),r._send_wamp(c),a.promise.then?a.promise:a},g.prototype.unsubscribe=function(t){s.assert(t instanceof h,"Session.unsubscribe: <subscription> must be an instance of class autobahn.Subscription");var e=this;if(!e.isOpen)throw"session not open";if(!(t.active&&t.id in e._subscriptions))throw"subscription not active";var n=e._subscriptions[t.id],r=n.indexOf(t);if(-1===r)throw"subscription not active";n.splice(r,1),t.active=!1;var o=e._defer();if(n.length)o.resolve(!1);else{var a=i();e._unsubscribe_reqs[a]=[o,t.id];var c=[p.UNSUBSCRIBE,a,t.id];e._send_wamp(c)}return o.promise.then?o.promise:o},g.prototype.unregister=function(t){s.assert(t instanceof d,"Session.unregister: <registration> must be an instance of class autobahn.Registration");var e=this;if(!e.isOpen)throw"session not open";if(!(t.active&&t.id in e._registrations))throw"registration not active";var n=i(),r=e._defer();e._unregister_reqs[n]=[r,t];var o=[p.UNREGISTER,n,t.id];return e._send_wamp(o),r.promise.then?r.promise:r},g.prototype.prefix=function(t,e){s.assert("string"==typeof t,"Session.prefix: <prefix> must be a string"),s.assert(!e||"string"==typeof e,"Session.prefix: <uri> must be a string or falsy");var n=this;e?n._prefixes[t]=e:t in n._prefixes&&delete n._prefixes[t]},g.prototype.resolve=function(t){s.assert("string"==typeof t,"Session.resolve: <curie> must be a string");var e=this,n=t.indexOf(":");if(n>=0){var i=t.substring(0,n);if(i in e._prefixes)return e._prefixes[i]+"."+t.substring(n+1);throw"cannot resolve CURIE prefix '"+i+"'"}return t},n.Session=g,n.Invocation=a,n.Event=c,n.Result=l,n.Error=u,n.Subscription=h,n.Registration=d,n.Publication=f}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./log.js":7,"./util.js":19,when:77,"when/function":54}],17:[function(t,e,n){function i(t){var e=this;r.assert(void 0!==t.url,"options.url missing"),r.assert("string"==typeof t.url,"options.url must be a string"),e._options=t}var r=t("../util.js"),o=t("../log.js");t("when"),i.prototype.type="longpoll",i.prototype.create=function(){var t=this;o.debug("longpoll.Factory.create");var e={};return e.protocol=void 0,e.send=void 0,e.close=void 0,e.onmessage=function(){},e.onopen=function(){},e.onclose=function(){},e.info={type:"longpoll",url:null,protocol:"wamp.2.json"},e._run=function(){var n=null,i=!1,s=0,a=0,c={protocols:["wamp.2.json"]},l=t._options.request_timeout||2e3;r.http_post(t._options.url+"/open",JSON.stringify(c),l).then(function(c){function u(){a+=1,o.debug("longpoll.Transport: polling for message ..."),r.http_post(h+"/receive",null,l).then(function(t){if(t){var n=JSON.parse(t);o.debug("longpoll.Transport: message received",n),e.onmessage(n)}i||u()},function(t){o.debug("longpoll.Transport: could not receive message",t.code,t.text),i=!0;var n={code:1001,reason:"transport receive failure (HTTP/POST status "+t.code+" - '"+t.text+"')",wasClean:!1};e.onclose(n)})}n=JSON.parse(c);var h=t._options.url+"/"+n.transport;e.info.url=h,o.debug("longpoll.Transport: open",n),e.close=function(){if(i)throw"transport is already closing";i=!0,r.http_post(h+"/close",null,l).then(function(){o.debug("longpoll.Transport: transport closed");var t={code:1e3,reason:"transport closed",wasClean:!0};e.onclose(t)},function(t){o.debug("longpoll.Transport: could not close transport",t.code,t.text)})},e.send=function(t){if(i)throw"transport is closing or closed already";s+=1,o.debug("longpoll.Transport: sending message ...",t);var n=JSON.stringify(t);r.http_post(h+"/send",n,l).then(function(){o.debug("longpoll.Transport: message sent")},function(t){o.debug("longpoll.Transport: could not send message",t.code,t.text),i=!0;var n={code:1001,reason:"transport send failure (HTTP/POST status "+t.code+" - '"+t.text+"')",wasClean:!1};e.onclose(n)})},u(),e.onopen()},function(t){o.debug("longpoll.Transport: could not open transport",t.code,t.text),i=!0;var n={code:1001,reason:"transport open failure (HTTP/POST status "+t.code+" - '"+t.text+"')",wasClean:!1};e.onclose(n)})},e._run(),e},n.Factory=i},{"../log.js":7,"../util.js":19,when:77}],18:[function(t,e,n){(function(e){function i(t){var e=this;r.assert(void 0!==t.url,"options.url missing"),r.assert("string"==typeof t.url,"options.url must be a string"),t.protocols?r.assert(Array.isArray(t.protocols),"options.protocols must be an array"):t.protocols=["wamp.2.json"],e._options=t}var r=t("../util.js"),o=t("../log.js");i.prototype.type="websocket",i.prototype.create=function(){var n=this,i={};return i.protocol=void 0,i.send=void 0,i.close=void 0,i.onmessage=function(){},i.onopen=function(){},i.onclose=function(){},i.info={type:"websocket",url:null,protocol:"wamp.2.json"},"window"in e?function(){var t;if("WebSocket"in window)t=n._options.protocols?new window.WebSocket(n._options.url,n._options.protocols):new window.WebSocket(n._options.url);else{if(!("MozWebSocket"in window))throw"browser does not support WebSocket";t=n._options.protocols?new window.MozWebSocket(n._options.url,n._options.protocols):new window.MozWebSocket(n._options.url)}t.onmessage=function(t){o.debug("WebSocket transport receive",t.data);var e=JSON.parse(t.data);i.onmessage(e)},t.onopen=function(){i.info.url=n._options.url,i.onopen()},t.onclose=function(t){var e={code:t.code,reason:t.message,wasClean:t.wasClean};i.onclose(e)},i.send=function(e){var n=JSON.stringify(e);o.debug("WebSocket transport send",n),t.send(n)},i.close=function(e,n){t.close(e,n)}}():function(){var e,r,o=t("ws");n._options.protocols?(r=n._options.protocols,Array.isArray(r)&&(r=r.join(",")),e=new o(n._options.url,{protocol:r})):e=new o(n._options.url),i.send=function(t){var n=JSON.stringify(t);e.send(n,{binary:!1})},i.close=function(){e.close()},e.on("open",function(){i.onopen()}),e.on("message",function(t,e){if(e.binary);else{var n=JSON.parse(t);i.onmessage(n)}}),e.on("close",function(t,e){var n={code:t,reason:e,wasClean:1e3===t};i.onclose(n)}),e.on("error",function(){var t={code:1006,reason:"",wasClean:!1};i.onclose(t)})}(),i},n.Factory=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../log.js":7,"../util.js":19,ws:78}],19:[function(t,e,n){(function(e){var i=t("./log.js"),r=t("when"),o=function(t,e){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(r>=1||0==r);var o=Math.sqrt(-2*Math.log(r)/r);return(t||0)+n*o*(e||1)},s=function(t,n){if(!t)throw s.useDebugger||"AUTOBAHN_DEBUG"in e&&AUTOBAHN_DEBUG,Error(n||"Assertion failed!")},a=function(t,e,n){i.debug("new http_post request",t,e,n);var o=r.defer(),s=new XMLHttpRequest;return s.onreadystatechange=function(){if(4===s.readyState){var t=1223===s.status?204:s.status;if(200===t&&o.resolve(s.responseText),204===t)o.resolve();else{var e=null;try{e=s.statusText}catch(n){}o.reject({code:t,text:e})}}},s.open("POST",t,!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),n>0&&(s.timeout=n,s.ontimeout=function(){o.reject({code:501,text:"request timeout"})}),e?s.send(e):s.send(),o.promise.then?o.promise:o};n.rand_normal=o,n.assert=s,n.http_post=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./log.js":7,when:77}],20:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.lib,i=n.BlockCipher,r=e.algo,o=[],s=[],a=[],c=[],l=[],u=[],h=[],d=[],f=[],p=[];(function(){for(var t=[],e=0;256>e;e++)t[e]=128>e?e<<1:283^e<<1;for(var n=0,i=0,e=0;256>e;e++){var r=i^i<<1^i<<2^i<<3^i<<4;r=99^(r>>>8^255&r),o[n]=r,s[r]=n;var g=t[n],v=t[g],y=t[v],m=257*t[r]^16843008*r;a[n]=m<<24|m>>>8,c[n]=m<<16|m>>>16,l[n]=m<<8|m>>>24,u[n]=m;var m=16843009*y^65537*v^257*g^16843008*n;h[r]=m<<24|m>>>8,d[r]=m<<16|m>>>16,f[r]=m<<8|m>>>24,p[r]=m,n?(n=g^t[t[t[y^g]]],i^=t[t[i]]):n=i=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],v=r.AES=i.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,i=this._nRounds=n+6,r=4*(i+1),s=this._keySchedule=[],a=0;r>a;a++)if(n>a)s[a]=e[a];else{var c=s[a-1];a%n?n>6&&4==a%n&&(c=o[c>>>24]<<24|o[255&c>>>16]<<16|o[255&c>>>8]<<8|o[255&c]):(c=c<<8|c>>>24,c=o[c>>>24]<<24|o[255&c>>>16]<<16|o[255&c>>>8]<<8|o[255&c],c^=g[0|a/n]<<24),s[a]=s[a-n]^c}for(var l=this._invKeySchedule=[],u=0;r>u;u++){var a=r-u;if(u%4)var c=s[a];else var c=s[a-4];l[u]=4>u||4>=a?c:h[o[c>>>24]]^d[o[255&c>>>16]]^f[o[255&c>>>8]]^p[o[255&c]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,c,l,u,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,h,d,f,p,s);var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,r,o,s,a){for(var c=this._nRounds,l=t[e]^n[0],u=t[e+1]^n[1],h=t[e+2]^n[2],d=t[e+3]^n[3],f=4,p=1;c>p;p++){var g=i[l>>>24]^r[255&u>>>16]^o[255&h>>>8]^s[255&d]^n[f++],v=i[u>>>24]^r[255&h>>>16]^o[255&d>>>8]^s[255&l]^n[f++],y=i[h>>>24]^r[255&d>>>16]^o[255&l>>>8]^s[255&u]^n[f++],m=i[d>>>24]^r[255&l>>>16]^o[255&u>>>8]^s[255&h]^n[f++];l=g,u=v,h=y,d=m}var g=(a[l>>>24]<<24|a[255&u>>>16]<<16|a[255&h>>>8]<<8|a[255&d])^n[f++],v=(a[u>>>24]<<24|a[255&h>>>16]<<16|a[255&d>>>8]<<8|a[255&l])^n[f++],y=(a[h>>>24]<<24|a[255&d>>>16]<<16|a[255&l>>>8]<<8|a[255&u])^n[f++],m=(a[d>>>24]<<24|a[255&l>>>16]<<16|a[255&u>>>8]<<8|a[255&h])^n[f++];t[e]=g,t[e+1]=v,t[e+2]=y,t[e+3]=m},keySize:8});e.AES=i._createHelper(v)}(),t.AES})},{"./cipher-core":21,"./core":22,"./enc-base64":23,"./evpkdf":25,"./md5":30}],21:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){t.lib.Cipher||function(e){var n=t,i=n.lib,r=i.Base,o=i.WordArray,s=i.BufferedBlockAlgorithm,a=n.enc;a.Utf8;var c=a.Base64,l=n.algo,u=l.EvpKDF,h=i.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?S:_}return function(e){return{encrypt:function(n,i,r){return t(i).encrypt(e,n,i,r)},decrypt:function(n,i,r){return t(i).decrypt(e,n,i,r)}}}}()});i.StreamCipher=h.extend({_doFinalize:function(){var t=this._process(true);return t},blockSize:1});var d=n.mode={},f=i.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=d.CBC=function(){function t(t,n,i){var r=this._iv;if(r){var o=r;this._iv=e}else var o=this._prevBlock;for(var s=0;i>s;s++)t[n+s]^=o[s]}var n=f.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,o=e.slice(n,n+r);i.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=o}}),n}(),g=n.pad={},v=g.Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,r=i<<24|i<<16|i<<8|i,s=[],a=0;i>a;a+=4)s.push(r);var c=o.create(s,i);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}};i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:v}),reset:function(){h.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else{var i=n.createDecryptor;this._minBufferSize=1}this._mode=i.call(n,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(true)}else{var e=this._process(true);t.unpad(e)}return e},blockSize:4});var y=i.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),m=n.format={},b=m.OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var i=o.create([1398893684,1701076831]).concat(n).concat(e);else var i=e;return i.toString(c)},parse:function(t){var e=c.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var i=o.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return y.create({ciphertext:e,salt:i})}},_=i.SerializableCipher=r.extend({cfg:r.extend({format:b}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=t.createEncryptor(n,i),o=r.finalize(e),s=r.cfg;return y.create({ciphertext:o,key:n,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=t.createDecryptor(n,i).finalize(e.ciphertext);return r},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),w=n.kdf={},x=w.OpenSSL={execute:function(t,e,n,i){i||(i=o.random(8));var r=u.create({keySize:e+n}).compute(t,i),s=o.create(r.words.slice(e),4*n);return r.sigBytes=4*e,y.create({key:r,iv:s,salt:i})}},S=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:x}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=i.kdf.execute(n,t.keySize,t.ivSize);i.iv=r.iv;var o=_.encrypt.call(this,t,e,r.key,i);return o.mixIn(r),o},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);i.iv=r.iv;var o=_.decrypt.call(this,t,e,r.key,i);return o}})}()})},{"./core":22}],22:[function(t,e,n){(function(t,i){"object"==typeof n?e.exports=n=i():"function"==typeof define&&define.amd?define([],i):t.CryptoJS=i()})(this,function(){var t=t||function(t,e){var n={},i=n.lib={},r=i.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=i.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var o=0;r>o;o++){var s=255&n[o>>>2]>>>24-8*(o%4);e[i+o>>>2]|=s<<24-8*((i+o)%4)}else if(n.length>65535)for(var o=0;r>o;o+=4)e[i+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],i=0;e>i;i+=4)n.push(0|4294967296*t.random());return new o.init(n,e)}}),s=n.enc={},a=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;n>r;r++){var o=255&e[r>>>2]>>>24-8*(r%4);i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-4*(i%8);return new o.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;n>r;r++){var o=255&e[r>>>2]>>>24-8*(r%4);i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-8*(i%4);return new o.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,s=this.blockSize,a=4*s,c=r/a;c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0);var l=c*s,u=t.min(4*l,r);if(l){for(var h=0;l>h;h+=s)this._doProcessBlock(i,h);var d=i.splice(0,l);n.sigBytes-=u}return new o.init(d,u)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=u.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}});var h=n.algo={};return n}(Math);return t})},{}],23:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=e.enc;r.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],o=0;n>o;o+=3)for(var s=255&e[o>>>2]>>>24-8*(o%4),a=255&e[o+1>>>2]>>>24-8*((o+1)%4),c=255&e[o+2>>>2]>>>24-8*((o+2)%4),l=s<<16|a<<8|c,u=0;4>u&&n>o+.75*u;u++)r.push(i.charAt(63&l>>>6*(3-u)));var h=i.charAt(64);if(h)for(;r.length%4;)r.push(h);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=n.charAt(64);if(r){var o=t.indexOf(r);-1!=o&&(e=o)}for(var s=[],a=0,c=0;e>c;c++)if(c%4){var l=n.indexOf(t.charAt(c-1))<<2*(c%4),u=n.indexOf(t.charAt(c))>>>6-2*(c%4);s[a>>>2]|=(l|u)<<24-8*(a%4),a++}return i.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64})},{"./core":22}],24:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(){function e(t){return 4278255360&t<<8|16711935&t>>>8}var n=t,i=n.lib,r=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;n>r;r+=2){var o=65535&e[r>>>2]>>>16-8*(r%4);i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i++)n[i>>>1]|=t.charCodeAt(i)<<16-16*(i%2);return r.create(n,2*e)}},o.Utf16LE={stringify:function(t){for(var n=t.words,i=t.sigBytes,r=[],o=0;i>o;o+=2){var s=e(65535&n[o>>>2]>>>16-8*(o%4));r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var n=t.length,i=[],o=0;n>o;o++)i[o>>>1]|=e(t.charCodeAt(o)<<16-16*(o%2));return r.create(i,2*n)}}}(),t.enc.Utf16})},{"./core":22}],25:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,o=e.algo,s=o.MD5,a=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=n.hasher.create(),o=r.create(),s=o.words,a=n.keySize,c=n.iterations;a>s.length;){l&&i.update(l);var l=i.update(t).finalize(e);i.reset();for(var u=1;c>u;u++)l=i.finalize(l),i.reset();o.concat(l)}return o.sigBytes=4*a,o}});e.EvpKDF=function(t,e,n){return a.create(n).compute(t,e)}}(),t.EvpKDF})},{"./core":22,"./hmac":27,"./sha1":46}],26:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.lib,i=n.CipherParams,r=e.enc,o=r.Hex,s=e.format;s.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return i.create({ciphertext:e})}}}(),t.format.Hex})},{"./cipher-core":21,"./core":22}],27:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){(function(){var e=t,n=e.lib,i=n.Base,r=e.enc,o=r.Utf8,s=e.algo;s.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),s=this._iKey=e.clone(),a=r.words,c=s.words,l=0;n>l;l++)a[l]^=1549556828,c[l]^=909522486;r.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);e.reset();var i=e.finalize(this._oKey.clone().concat(n));return i}})})()})},{"./core":22}],28:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core"),t("./lib-typedarrays"),t("./enc-utf16"),t("./enc-base64"),t("./md5"),t("./sha1"),t("./sha256"),t("./sha224"),t("./sha512"),t("./sha384"),t("./sha3"),t("./ripemd160"),t("./hmac"),t("./pbkdf2"),t("./evpkdf"),t("./cipher-core"),t("./mode-cfb"),t("./mode-ctr"),t("./mode-ctr-gladman"),t("./mode-ofb"),t("./mode-ecb"),t("./pad-ansix923"),t("./pad-iso10126"),t("./pad-iso97971"),t("./pad-zeropadding"),t("./pad-nopadding"),t("./format-hex"),t("./aes"),t("./tripledes"),t("./rc4"),t("./rabbit"),t("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],r):r(i.CryptoJS)})(this,function(t){return t})},{"./aes":20,"./cipher-core":21,"./core":22,"./enc-base64":23,"./enc-utf16":24,"./evpkdf":25,"./format-hex":26,"./hmac":27,"./lib-typedarrays":29,"./md5":30,"./mode-cfb":31,"./mode-ctr":33,"./mode-ctr-gladman":32,"./mode-ecb":34,"./mode-ofb":35,"./pad-ansix923":36,"./pad-iso10126":37,"./pad-iso97971":38,"./pad-nopadding":39,"./pad-zeropadding":40,"./pbkdf2":41,"./rabbit":43,"./rabbit-legacy":42,"./rc4":44,"./ripemd160":45,"./sha1":46,"./sha224":47,"./sha256":48,"./sha3":49,"./sha384":50,"./sha512":51,"./tripledes":52,"./x64-core":53}],29:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t,n=e.lib,i=n.WordArray,r=i.init,o=i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],i=0;e>i;i++)n[i>>>2]|=t[i]<<24-8*(i%4);r.call(this,n,e)}else r.apply(this,arguments)};o.prototype=i}}(),t.lib.WordArray})},{"./core":22}],30:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(e){function n(t,e,n,i,r,o,s){var a=t+(e&n|~e&i)+r+s;return(a<<o|a>>>32-o)+e}function i(t,e,n,i,r,o,s){var a=t+(e&i|n&~i)+r+s;return(a<<o|a>>>32-o)+e}function r(t,e,n,i,r,o,s){var a=t+(e^n^i)+r+s;return(a<<o|a>>>32-o)+e}function o(t,e,n,i,r,o,s){var a=t+(n^(e|~i))+r+s;return(a<<o|a>>>32-o)+e}var s=t,a=s.lib,c=a.WordArray,l=a.Hasher,u=s.algo,h=[];(function(){for(var t=0;64>t;t++)h[t]=0|4294967296*e.abs(e.sin(t+1))})();var d=u.MD5=l.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var s=0;16>s;s++){var a=e+s,c=t[a];t[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var l=this._hash.words,u=t[e+0],d=t[e+1],f=t[e+2],p=t[e+3],g=t[e+4],v=t[e+5],y=t[e+6],m=t[e+7],b=t[e+8],_=t[e+9],w=t[e+10],x=t[e+11],S=t[e+12],C=t[e+13],k=t[e+14],T=t[e+15],E=l[0],A=l[1],K=l[2],P=l[3];E=n(E,A,K,P,u,7,h[0]),P=n(P,E,A,K,d,12,h[1]),K=n(K,P,E,A,f,17,h[2]),A=n(A,K,P,E,p,22,h[3]),E=n(E,A,K,P,g,7,h[4]),P=n(P,E,A,K,v,12,h[5]),K=n(K,P,E,A,y,17,h[6]),A=n(A,K,P,E,m,22,h[7]),E=n(E,A,K,P,b,7,h[8]),P=n(P,E,A,K,_,12,h[9]),K=n(K,P,E,A,w,17,h[10]),A=n(A,K,P,E,x,22,h[11]),E=n(E,A,K,P,S,7,h[12]),P=n(P,E,A,K,C,12,h[13]),K=n(K,P,E,A,k,17,h[14]),A=n(A,K,P,E,T,22,h[15]),E=i(E,A,K,P,d,5,h[16]),P=i(P,E,A,K,y,9,h[17]),K=i(K,P,E,A,x,14,h[18]),A=i(A,K,P,E,u,20,h[19]),E=i(E,A,K,P,v,5,h[20]),P=i(P,E,A,K,w,9,h[21]),K=i(K,P,E,A,T,14,h[22]),A=i(A,K,P,E,g,20,h[23]),E=i(E,A,K,P,_,5,h[24]),P=i(P,E,A,K,k,9,h[25]),K=i(K,P,E,A,p,14,h[26]),A=i(A,K,P,E,b,20,h[27]),E=i(E,A,K,P,C,5,h[28]),P=i(P,E,A,K,f,9,h[29]),K=i(K,P,E,A,m,14,h[30]),A=i(A,K,P,E,S,20,h[31]),E=r(E,A,K,P,v,4,h[32]),P=r(P,E,A,K,b,11,h[33]),K=r(K,P,E,A,x,16,h[34]),A=r(A,K,P,E,k,23,h[35]),E=r(E,A,K,P,d,4,h[36]),P=r(P,E,A,K,g,11,h[37]),K=r(K,P,E,A,m,16,h[38]),A=r(A,K,P,E,w,23,h[39]),E=r(E,A,K,P,C,4,h[40]),P=r(P,E,A,K,u,11,h[41]),K=r(K,P,E,A,p,16,h[42]),A=r(A,K,P,E,y,23,h[43]),E=r(E,A,K,P,_,4,h[44]),P=r(P,E,A,K,S,11,h[45]),K=r(K,P,E,A,T,16,h[46]),A=r(A,K,P,E,f,23,h[47]),E=o(E,A,K,P,u,6,h[48]),P=o(P,E,A,K,m,10,h[49]),K=o(K,P,E,A,k,15,h[50]),A=o(A,K,P,E,v,21,h[51]),E=o(E,A,K,P,S,6,h[52]),P=o(P,E,A,K,p,10,h[53]),K=o(K,P,E,A,w,15,h[54]),A=o(A,K,P,E,d,21,h[55]),E=o(E,A,K,P,b,6,h[56]),P=o(P,E,A,K,T,10,h[57]),K=o(K,P,E,A,y,15,h[58]),A=o(A,K,P,E,C,21,h[59]),E=o(E,A,K,P,g,6,h[60]),P=o(P,E,A,K,x,10,h[61]),K=o(K,P,E,A,f,15,h[62]),A=o(A,K,P,E,_,21,h[63]),l[0]=0|l[0]+E,l[1]=0|l[1]+A,l[2]=0|l[2]+K,l[3]=0|l[3]+P
},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[(r+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(r+64>>>9<<4)+14]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;4>l;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}});s.MD5=l._createHelper(d),s.HmacMD5=l._createHmacHelper(d)}(Math),t.MD5})},{"./core":22}],31:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.mode.CFB=function(){function e(t,e,n,i){var r=this._iv;if(r){var o=r.slice(0);this._iv=void 0}else var o=this._prevBlock;i.encryptBlock(o,0);for(var s=0;n>s;s++)t[e+s]^=o[s]}var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize;e.call(this,t,n,r,i),this._prevBlock=t.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize,o=t.slice(n,n+r);e.call(this,t,n,r,i),this._prevBlock=o}}),n}(),t.mode.CFB})},{"./cipher-core":21,"./core":22}],32:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.mode.CTRGladman=function(){function e(t){if(255===(255&t>>24)){var e=255&t>>16,n=255&t>>8,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i}else t+=1<<24;return t}function n(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.lib.BlockCipherMode.extend(),r=i.Encryptor=i.extend({processBlock:function(t,e){var i=this._cipher,r=i.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),n(s);var a=s.slice(0);i.encryptBlock(a,0);for(var c=0;r>c;c++)t[e+c]^=a[c]}});return i.Decryptor=r,i}(),t.mode.CTRGladman})},{"./cipher-core":21,"./core":22}],33:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[i-1]=0|o[i-1]+1;for(var a=0;i>a;a++)t[e+a]^=s[a]}});return e.Decryptor=n,e}(),t.mode.CTR})},{"./cipher-core":21,"./core":22}],34:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e}(),t.mode.ECB})},{"./cipher-core":21,"./core":22}],35:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;i>s;s++)t[e+s]^=o[s]}});return e.Decryptor=n,e}(),t.mode.OFB})},{"./cipher-core":21,"./core":22}],36:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,i=4*e,r=i-n%i,o=n+r-1;t.clamp(),t.words[o>>>2]|=r<<24-8*(o%4),t.sigBytes+=r},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923})},{"./cipher-core":21,"./core":22}],37:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.pad.Iso10126={pad:function(e,n){var i=4*n,r=i-e.sigBytes%i;e.concat(t.lib.WordArray.random(r-1)).concat(t.lib.WordArray.create([r<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126})},{"./cipher-core":21,"./core":22}],38:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})},{"./cipher-core":21,"./core":22}],39:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})},{"./cipher-core":21,"./core":22}],40:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return t.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(255&e[n>>>2]>>>24-8*(n%4));)n--;t.sigBytes=n+1}},t.pad.ZeroPadding})},{"./cipher-core":21,"./core":22}],41:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,o=e.algo,s=o.SHA1,a=o.HMAC,c=o.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=a.create(n.hasher,t),o=r.create(),s=r.create([1]),c=o.words,l=s.words,u=n.keySize,h=n.iterations;u>c.length;){var d=i.update(e).finalize(s);i.reset();for(var f=d.words,p=f.length,g=d,v=1;h>v;v++){g=i.finalize(g),i.reset();for(var y=g.words,m=0;p>m;m++)f[m]^=y[m]}o.concat(d),l[0]++}return o.sigBytes=4*u,o}});e.PBKDF2=function(t,e,n){return c.create(n).compute(t,e)}}(),t.PBKDF2})},{"./core":22,"./hmac":27,"./sha1":46}],42:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;8>n;n++)a[n]=e[n];e[0]=0|e[0]+1295307597+this._b,e[1]=0|e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0),e[2]=0|e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0),e[3]=0|e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0),e[4]=0|e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0),e[5]=0|e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0),e[6]=0|e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0),e[7]=0|e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0),this._b=e[7]>>>0<a[7]>>>0?1:0;for(var n=0;8>n;n++){var i=t[n]+e[n],r=65535&i,o=i>>>16,s=((r*r>>>17)+r*o>>>15)+o*o,l=(0|(4294901760&i)*i)+(0|(65535&i)*i);c[n]=s^l}t[0]=0|c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16),t[1]=0|c[1]+(c[0]<<8|c[0]>>>24)+c[7],t[2]=0|c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16),t[3]=0|c[3]+(c[2]<<8|c[2]>>>24)+c[1],t[4]=0|c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16),t[5]=0|c[5]+(c[4]<<8|c[4]>>>24)+c[3],t[6]=0|c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16),t[7]=0|c[7]+(c[6]<<8|c[6]>>>24)+c[5]}var n=t,i=n.lib,r=i.StreamCipher,o=n.algo,s=[],a=[],c=[],l=o.RabbitLegacy=r.extend({_doReset:function(){var t=this._key.words,n=this.cfg.iv,i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var o=0;4>o;o++)e.call(this);for(var o=0;8>o;o++)r[o]^=i[7&o+4];if(n){var s=n.words,a=s[0],c=s[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),h=l>>>16|4294901760&u,d=u<<16|65535&l;r[0]^=l,r[1]^=h,r[2]^=u,r[3]^=d,r[4]^=l,r[5]^=h,r[6]^=u,r[7]^=d;for(var o=0;4>o;o++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;4>r;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),t[n+r]^=s[r]},blockSize:4,ivSize:2});n.RabbitLegacy=r._createHelper(l)}(),t.RabbitLegacy})},{"./cipher-core":21,"./core":22,"./enc-base64":23,"./evpkdf":25,"./md5":30}],43:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;8>n;n++)a[n]=e[n];e[0]=0|e[0]+1295307597+this._b,e[1]=0|e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0),e[2]=0|e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0),e[3]=0|e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0),e[4]=0|e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0),e[5]=0|e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0),e[6]=0|e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0),e[7]=0|e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0),this._b=e[7]>>>0<a[7]>>>0?1:0;for(var n=0;8>n;n++){var i=t[n]+e[n],r=65535&i,o=i>>>16,s=((r*r>>>17)+r*o>>>15)+o*o,l=(0|(4294901760&i)*i)+(0|(65535&i)*i);c[n]=s^l}t[0]=0|c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16),t[1]=0|c[1]+(c[0]<<8|c[0]>>>24)+c[7],t[2]=0|c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16),t[3]=0|c[3]+(c[2]<<8|c[2]>>>24)+c[1],t[4]=0|c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16),t[5]=0|c[5]+(c[4]<<8|c[4]>>>24)+c[3],t[6]=0|c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16),t[7]=0|c[7]+(c[6]<<8|c[6]>>>24)+c[5]}var n=t,i=n.lib,r=i.StreamCipher,o=n.algo,s=[],a=[],c=[],l=o.Rabbit=r.extend({_doReset:function(){for(var t=this._key.words,n=this.cfg.iv,i=0;4>i;i++)t[i]=16711935&(t[i]<<8|t[i]>>>24)|4278255360&(t[i]<<24|t[i]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;4>i;i++)e.call(this);for(var i=0;8>i;i++)o[i]^=r[7&i+4];if(n){var s=n.words,a=s[0],c=s[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),h=l>>>16|4294901760&u,d=u<<16|65535&l;o[0]^=l,o[1]^=h,o[2]^=u,o[3]^=d,o[4]^=l,o[5]^=h,o[6]^=u,o[7]^=d;for(var i=0;4>i;i++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;4>r;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),t[n+r]^=s[r]},blockSize:4,ivSize:2});n.Rabbit=r._createHelper(l)}(),t.Rabbit})},{"./cipher-core":21,"./core":22,"./enc-base64":23,"./evpkdf":25,"./md5":30}],44:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return function(){function e(){for(var t=this._S,e=this._i,n=this._j,i=0,r=0;4>r;r++){e=(e+1)%256,n=(n+t[e])%256;var o=t[e];t[e]=t[n],t[n]=o,i|=t[(t[e]+t[n])%256]<<24-8*r}return this._i=e,this._j=n,i}var n=t,i=n.lib,r=i.StreamCipher,o=n.algo,s=o.RC4=r.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,i=this._S=[],r=0;256>r;r++)i[r]=r;for(var r=0,o=0;256>r;r++){var s=r%n,a=255&e[s>>>2]>>>24-8*(s%4);o=(o+i[r]+a)%256;var c=i[r];i[r]=i[o],i[o]=c}this._i=this._j=0},_doProcessBlock:function(t,n){t[n]^=e.call(this)},keySize:8,ivSize:0});n.RC4=r._createHelper(s);var a=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});n.RC4Drop=r._createHelper(a)}(),t.RC4})},{"./cipher-core":21,"./core":22,"./enc-base64":23,"./evpkdf":25,"./md5":30}],45:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(){function e(t,e,n){return t^e^n}function n(t,e,n){return t&e|~t&n}function i(t,e,n){return(t|~e)^n}function r(t,e,n){return t&n|e&~n}function o(t,e,n){return t^(e|~n)}function s(t,e){return t<<e|t>>>32-e}var a=t,c=a.lib,l=c.WordArray,u=c.Hasher,h=a.algo,d=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),f=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),p=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),v=l.create([0,1518500249,1859775393,2400959708,2840853838]),y=l.create([1352829926,1548603684,1836072691,2053994217,0]),m=h.RIPEMD160=u.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,a){for(var c=0;16>c;c++){var l=a+c,u=t[l];t[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var h,m,b,_,w,x,S,C,k,T,E=this._hash.words,A=v.words,K=y.words,P=d.words,N=f.words,j=p.words,O=g.words;x=h=E[0],S=m=E[1],C=b=E[2],k=_=E[3],T=w=E[4];for(var D,c=0;80>c;c+=1)D=0|h+t[a+P[c]],D+=16>c?e(m,b,_)+A[0]:32>c?n(m,b,_)+A[1]:48>c?i(m,b,_)+A[2]:64>c?r(m,b,_)+A[3]:o(m,b,_)+A[4],D=0|D,D=s(D,j[c]),D=0|D+w,h=w,w=_,_=s(b,10),b=m,m=D,D=0|x+t[a+N[c]],D+=16>c?o(S,C,k)+K[0]:32>c?r(S,C,k)+K[1]:48>c?i(S,C,k)+K[2]:64>c?n(S,C,k)+K[3]:e(S,C,k)+K[4],D=0|D,D=s(D,O[c]),D=0|D+T,x=T,T=k,k=s(C,10),C=S,S=D;D=0|E[1]+b+k,E[1]=0|E[2]+_+T,E[2]=0|E[3]+w+x,E[3]=0|E[4]+h+S,E[4]=0|E[0]+m+C,E[0]=D},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[(i+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var r=this._hash,o=r.words,s=0;5>s;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}});a.RIPEMD160=u._createHelper(m),a.HmacRIPEMD160=u._createHmacHelper(m)}(Math),t.RIPEMD160})},{"./core":22}],46:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=n.Hasher,o=e.algo,s=[],a=o.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],c=n[4],l=0;80>l;l++){if(16>l)s[l]=0|t[e+l];else{var u=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=u<<1|u>>>31}var h=(i<<5|i>>>27)+c+s[l];h+=20>l?(r&o|~r&a)+1518500249:40>l?(r^o^a)+1859775393:60>l?(r&o|r&a|o&a)-1894007588:(r^o^a)-899497514,c=a,a=o,o=r<<30|r>>>2,r=i,i=h}n[0]=0|n[0]+i,n[1]=0|n[1]+r,n[2]=0|n[2]+o,n[3]=0|n[3]+a,n[4]=0|n[4]+c},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[(i+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(i+64>>>9<<4)+15]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=r._createHelper(a),e.HmacSHA1=r._createHmacHelper(a)}(),t.SHA1})},{"./core":22}],47:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./sha256")):"function"==typeof define&&define.amd?define(["./core","./sha256"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=e.algo,o=r.SHA256,s=r.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=o._doFinalize.call(this);return t.sigBytes-=4,t}});e.SHA224=o._createHelper(s),e.HmacSHA224=o._createHmacHelper(s)}(),t.SHA224})},{"./core":22,"./sha256":48}],48:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[],c=[];(function(){function t(t){for(var n=e.sqrt(t),i=2;n>=i;i++)if(!(t%i))return!1;return!0}function n(t){return 0|4294967296*(t-(0|t))}for(var i=2,r=0;64>r;)t(i)&&(8>r&&(a[r]=n(e.pow(i,.5))),c[r]=n(e.pow(i,1/3)),r++),i++})();var l=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6],d=n[7],f=0;64>f;f++){if(16>f)l[f]=0|t[e+f];else{var p=l[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=l[f-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[f]=g+l[f-7]+y+l[f-16]}var m=a&u^~a&h,b=i&r^i&o^r&o,_=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),w=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),x=d+w+m+c[f]+l[f],S=_+b;d=h,h=u,u=a,a=0|s+x,s=o,o=r,r=i,i=0|x+S}n[0]=0|n[0]+i,n[1]=0|n[1]+r,n[2]=0|n[2]+o,n[3]=0|n[3]+s,n[4]=0|n[4]+a,n[5]=0|n[5]+u,n[6]=0|n[6]+h,n[7]=0|n[7]+d},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[(r+64>>>9<<4)+14]=e.floor(i/4294967296),n[(r+64>>>9<<4)+15]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(u),n.HmacSHA256=o._createHmacHelper(u)}(Math),t.SHA256})},{"./core":22}],49:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],r):r(i.CryptoJS)})(this,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.x64,a=s.Word,c=n.algo,l=[],u=[],h=[];(function(){for(var t=1,e=0,n=0;24>n;n++){l[t+5*e]=(n+1)*(n+2)/2%64;var i=e%5,r=(2*t+3*e)%5;t=i,e=r}for(var t=0;5>t;t++)for(var e=0;5>e;e++)u[t+5*e]=e+5*((2*t+3*e)%5);for(var o=1,s=0;24>s;s++){for(var c=0,d=0,f=0;7>f;f++){if(1&o){var p=(1<<f)-1;32>p?d^=1<<p:c^=1<<p-32}128&o?o=113^o<<1:o<<=1}h[s]=a.create(c,d)}})();var d=[];(function(){for(var t=0;25>t;t++)d[t]=a.create()})();var f=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;25>e;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,i=this.blockSize/2,r=0;i>r;r++){var o=t[e+2*r],s=t[e+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);var a=n[r];a.high^=s,a.low^=o}for(var c=0;24>c;c++){for(var f=0;5>f;f++){for(var p=0,g=0,v=0;5>v;v++){var a=n[f+5*v];p^=a.high,g^=a.low}var y=d[f];y.high=p,y.low=g}for(var f=0;5>f;f++)for(var m=d[(f+4)%5],b=d[(f+1)%5],_=b.high,w=b.low,p=m.high^(_<<1|w>>>31),g=m.low^(w<<1|_>>>31),v=0;5>v;v++){var a=n[f+5*v];a.high^=p,a.low^=g}for(var x=1;25>x;x++){var a=n[x],S=a.high,C=a.low,k=l[x];if(32>k)var p=S<<k|C>>>32-k,g=C<<k|S>>>32-k;else var p=C<<k-32|S>>>64-k,g=S<<k-32|C>>>64-k;var T=d[u[x]];T.high=p,T.low=g}var E=d[0],A=n[0];E.high=A.high,E.low=A.low;for(var f=0;5>f;f++)for(var v=0;5>v;v++){var x=f+5*v,a=n[x],K=d[x],P=d[(f+1)%5+5*v],N=d[(f+2)%5+5*v];a.high=K.high^~P.high&N.high,a.low=K.low^~P.low&N.low}var a=n[0],j=h[c];a.high^=j.high,a.low^=j.low}},_doFinalize:function(){var t=this._data,n=t.words;8*this._nDataBytes;var i=8*t.sigBytes,o=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],u=0;c>u;u++){var h=s[u],d=h.high,f=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(d)}return new r.init(l,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;25>n;n++)e[n]=e[n].clone();return t}});n.SHA3=o._createHelper(f),n.HmacSHA3=o._createHmacHelper(f)}(Math),t.SHA3})},{"./core":22,"./x64-core":53}],50:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core"),t("./sha512")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./sha512"],r):r(i.CryptoJS)})(this,function(t){return function(){var e=t,n=e.x64,i=n.Word,r=n.WordArray,o=e.algo,s=o.SHA512,a=o.SHA384=s.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=16,t}});e.SHA384=s._createHelper(a),e.HmacSHA384=s._createHmacHelper(a)}(),t.SHA384})},{"./core":22,"./sha512":51,"./x64-core":53}],51:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],r):r(i.CryptoJS)})(this,function(t){return function(){function e(){return s.create.apply(s,arguments)}var n=t,i=n.lib,r=i.Hasher,o=n.x64,s=o.Word,a=o.WordArray,c=n.algo,l=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],u=[];(function(){for(var t=0;80>t;t++)u[t]=e()})();var h=c.SHA512=r.extend({_doReset:function(){this._hash=new a.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=n[5],h=n[6],d=n[7],f=i.high,p=i.low,g=r.high,v=r.low,y=o.high,m=o.low,b=s.high,_=s.low,w=a.high,x=a.low,S=c.high,C=c.low,k=h.high,T=h.low,E=d.high,A=d.low,K=f,P=p,N=g,j=v,O=y,D=m,R=b,L=_,F=w,B=x,I=S,M=C,H=k,$=T,z=E,G=A,U=0;80>U;U++){var W=u[U];if(16>U)var q=W.high=0|t[e+2*U],Y=W.low=0|t[e+2*U+1];else{var V=u[U-15],X=V.high,J=V.low,Q=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,Z=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),te=u[U-2],ee=te.high,ne=te.low,ie=(ee>>>19|ne<<13)^(ee<<3|ne>>>29)^ee>>>6,re=(ne>>>19|ee<<13)^(ne<<3|ee>>>29)^(ne>>>6|ee<<26),oe=u[U-7],se=oe.high,ae=oe.low,ce=u[U-16],le=ce.high,ue=ce.low,Y=Z+ae,q=Q+se+(Z>>>0>Y>>>0?1:0),Y=Y+re,q=q+ie+(re>>>0>Y>>>0?1:0),Y=Y+ue,q=q+le+(ue>>>0>Y>>>0?1:0);W.high=q,W.low=Y}var he=F&I^~F&H,de=B&M^~B&$,fe=K&N^K&O^N&O,pe=P&j^P&D^j&D,ge=(K>>>28|P<<4)^(K<<30|P>>>2)^(K<<25|P>>>7),ve=(P>>>28|K<<4)^(P<<30|K>>>2)^(P<<25|K>>>7),ye=(F>>>14|B<<18)^(F>>>18|B<<14)^(F<<23|B>>>9),me=(B>>>14|F<<18)^(B>>>18|F<<14)^(B<<23|F>>>9),be=l[U],_e=be.high,we=be.low,xe=G+me,Se=z+ye+(G>>>0>xe>>>0?1:0),xe=xe+de,Se=Se+he+(de>>>0>xe>>>0?1:0),xe=xe+we,Se=Se+_e+(we>>>0>xe>>>0?1:0),xe=xe+Y,Se=Se+q+(Y>>>0>xe>>>0?1:0),Ce=ve+pe,ke=ge+fe+(ve>>>0>Ce>>>0?1:0);z=H,G=$,H=I,$=M,I=F,M=B,B=0|L+xe,F=0|R+Se+(L>>>0>B>>>0?1:0),R=O,L=D,O=N,D=j,N=K,j=P,P=0|xe+Ce,K=0|Se+ke+(xe>>>0>P>>>0?1:0)}p=i.low=p+P,i.high=f+K+(P>>>0>p>>>0?1:0),v=r.low=v+j,r.high=g+N+(j>>>0>v>>>0?1:0),m=o.low=m+D,o.high=y+O+(D>>>0>m>>>0?1:0),_=s.low=_+L,s.high=b+R+(L>>>0>_>>>0?1:0),x=a.low=x+B,a.high=w+F+(B>>>0>x>>>0?1:0),C=c.low=C+M,c.high=S+I+(M>>>0>C>>>0?1:0),T=h.low=T+$,h.high=k+H+($>>>0>T>>>0?1:0),A=d.low=A+G,d.high=E+z+(G>>>0>A>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[(i+128>>>10<<5)+30]=Math.floor(n/4294967296),e[(i+128>>>10<<5)+31]=n,t.sigBytes=4*e.length,this._process();var r=this._hash.toX32();return r},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});n.SHA512=r._createHelper(h),n.HmacSHA512=r._createHmacHelper(h)}(),t.SHA512})},{"./core":22,"./x64-core":53}],52:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)})(this,function(t){return function(){function e(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function n(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var i=t,r=i.lib,o=r.WordArray,s=r.BlockCipher,a=i.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=a.DES=s.extend({_doReset:function(){for(var t=this._key,e=t.words,n=[],i=0;56>i;i++){var r=c[i]-1;
n[i]=1&e[r>>>5]>>>31-r%32}for(var o=this._subKeys=[],s=0;16>s;s++){for(var a=o[s]=[],h=u[s],i=0;24>i;i++)a[0|i/6]|=n[(l[i]-1+h)%28]<<31-i%6,a[4+(0|i/6)]|=n[28+(l[i+24]-1+h)%28]<<31-i%6;a[0]=a[0]<<1|a[0]>>>31;for(var i=1;7>i;i++)a[i]=a[i]>>>4*(i-1)+3;a[7]=a[7]<<5|a[7]>>>27}for(var d=this._invSubKeys=[],i=0;16>i;i++)d[i]=o[15-i]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,i,r){this._lBlock=t[i],this._rBlock=t[i+1],e.call(this,4,252645135),e.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),e.call(this,1,1431655765);for(var o=0;16>o;o++){for(var s=r[o],a=this._lBlock,c=this._rBlock,l=0,u=0;8>u;u++)l|=h[u][((c^s[u])&d[u])>>>0];this._lBlock=c,this._rBlock=a^l}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,e.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),t[i]=this._lBlock,t[i+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=s._createHelper(f);var p=a.TripleDES=s.extend({_doReset:function(){var t=this._key,e=t.words;this._des1=f.createEncryptor(o.create(e.slice(0,2))),this._des2=f.createEncryptor(o.create(e.slice(2,4))),this._des3=f.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});i.TripleDES=s._createHelper(p)}(),t.TripleDES})},{"./cipher-core":21,"./core":22,"./enc-base64":23,"./evpkdf":25,"./md5":30}],53:[function(t,e,n){(function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)})(this,function(t){return function(e){var n=t,i=n.lib,r=i.Base,o=i.WordArray,s=n.x64={};s.Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],i=0;e>i;i++){var r=t[i];n.push(r.high),n.push(r.low)}return o.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;n>i;i++)e[i]=e[i].clone();return t}})}(),t})},{"./core":22}],54:[function(t,e){(function(t){t(function(t){function e(t,e){return i(t,this,e||[])}function n(t){var e=arguments.length>1?l.call(arguments,1):[];return function(){return i(t,this,e.concat(l.call(arguments)))}}function i(t,e,n){return 0===n.length?a.call(e,t):a.apply(e,[t].concat(n))}function r(t,e,i){return c(n,e,i,t)}function o(t){var e=l.call(arguments,1);return function(){var n=this,i=l.call(arguments),r=a.apply(n,[t].concat(i));return s.reduce(e,function(t,e){return e.call(n,t)},r)}}var s=t("./when"),a=s["try"],c=t("./lib/liftAll"),l=Array.prototype.slice;return{lift:n,liftAll:r,call:a,apply:e,compose:o}})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./lib/liftAll":68,"./when":77}],55:[function(t,e){(function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./scheduler"),i=t("./async");return e({scheduler:new n(i)})})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./async":58,"./makePromise":69,"./scheduler":70}],56:[function(t,e){(function(t){"use strict";t(function(){function t(t){this.head=this.tail=this.length=0,this.buffer=Array(1<<t)}return t.prototype.push=function(t){return this.length===this.buffer.length&&this._ensureCapacity(2*this.length),this.buffer[this.tail]=t,this.tail=this.tail+1&this.buffer.length-1,++this.length,this.length},t.prototype.shift=function(){var t=this.buffer[this.head];return this.buffer[this.head]=void 0,this.head=this.head+1&this.buffer.length-1,--this.length,t},t.prototype._ensureCapacity=function(t){var e,n=this.head,i=this.buffer,r=Array(t),o=0;if(0===n)for(e=this.length;e>o;++o)r[o]=i[o];else{for(t=i.length,e=this.tail;t>n;++o,++n)r[o]=i[n];for(n=0;e>n;++o,++n)r[o]=i[n]}this.buffer=r,this.head=0,this.tail=this.length},t})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],57:[function(t,e){(function(t){"use strict";t(function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],58:[function(t,e){(function(n){(function(t){"use strict";t(function(t){var e,i;return e=n!==void 0&&null!==n&&"function"==typeof n.nextTick?function(t){n.nextTick(t)}:(i="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver)?function(t,e){function n(){var t=i;i=void 0,t()}var i,r=t.createElement("div"),o=new e(n);return o.observe(r,{attributes:!0}),function(t){i=t,r.setAttribute("class","x")}}(document,i):function(t){try{return t("vertx").runOnLoop||t("vertx").runOnContext}catch(e){}var n=setTimeout;return function(t){n(t,0)}}(t)})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})}).call(this,t("c:\\Users\\oberstet\\AppData\\Roaming\\npm\\node_modules\\browserify\\node_modules\\insert-module-globals\\node_modules\\process\\browser.js"))},{"c:\\Users\\oberstet\\AppData\\Roaming\\npm\\node_modules\\browserify\\node_modules\\insert-module-globals\\node_modules\\process\\browser.js":1}],59:[function(t,e){(function(t){"use strict";t(function(){return function(t){function e(e){return new t(function(t,n){function i(t){o.push(t),0===--r&&n(o)}var r=0,o=[];u.call(e,function(e){++r,h(e).then(t,i)}),0===r&&t()})}function n(e,n){return new t(function(t,i,r){function o(e){c>0&&(--c,l.push(e),0===c&&t(l))}function s(t){a>0&&(--a,d.push(t),0===a&&i(d))}var a,c=0,l=[],d=[];return u.call(e,function(t){++c,h(t).then(o,s,r)}),n=Math.max(n,0),a=c-n+1,c=Math.min(n,c),0===c?(t(l),void 0):void 0})}function i(t,e,n){return d(a.call(t,function(t){return h(t).then(e,n)}))}function r(t){return d(a.call(t,function(t){function e(){return t.inspect()}return t=h(t),t.then(e,e)}))}function o(t,e){function n(t,n,i){return h(t).then(function(t){return h(n).then(function(n){return e(t,n,i)})})}return arguments.length>2?c.call(t,n,arguments[2]):c.call(t,n)}function s(t,e){function n(t,n,i){return h(t).then(function(t){return h(n).then(function(n){return e(t,n,i)})})}return arguments.length>2?l.call(t,n,arguments[2]):l.call(t,n)}var a=Array.prototype.map,c=Array.prototype.reduce,l=Array.prototype.reduceRight,u=Array.prototype.forEach,h=t.resolve,d=t.all;return t.any=e,t.some=n,t.settle=r,t.map=i,t.reduce=o,t.reduceRight=s,t.prototype.spread=function(t){return this.then(d).then(function(e){return t.apply(void 0,e)})},t}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],60:[function(t,e){(function(t){"use strict";t(function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return n(e)?t instanceof e:e(t)}function n(t){return t===Error||null!=t&&t.prototype instanceof Error}function i(t,e){return function(){return t.call(this),e}}function r(){}return function(n){function o(t,n){return function(i){return e(i,n)?t.call(this,i):s(i)}}var s=n.reject,a=n.prototype["catch"];return n.prototype.done=function(t,e){var n=this._handler;n.when({resolve:this._maybeFatal,notify:r,context:this,receiver:n.receiver,fulfilled:t,rejected:e,progress:void 0})},n.prototype["catch"]=n.prototype.otherwise=function(e){return 1===arguments.length?a.call(this,e):"function"!=typeof e?this.ensure(t):a.call(this,o(arguments[1],e))},n.prototype["finally"]=n.prototype.ensure=function(t){return"function"!=typeof t?this:(t=i(t,this),this.then(t,t))},n.prototype["else"]=n.prototype.orElse=function(t){return this.then(void 0,function(){return t})},n.prototype.yield=function(t){return this.then(function(){return t})},n.prototype.tap=function(t){return this.then(t).yield(this)},n}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],61:[function(t,e){(function(t){"use strict";t(function(){return function(t){return t.prototype.fold=function(t,e){var n=this._beget();return this._handler.fold(n._handler,t,e),n},t}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],62:[function(t,e){(function(t){"use strict";t(function(){return function(t){return t.prototype.inspect=function(){return this._handler.inspect()},t}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],63:[function(t,e){(function(t){"use strict";t(function(){return function(t){function e(t,e,i,r){return n(function(e){return[e,t(e)]},e,i,r)}function n(t,e,r,o){function s(o,s){return i(r(o)).then(function(){return n(t,e,r,s)})}return i(o).then(function(n){return i(e(n)).then(function(e){return e?n:i(t(n)).spread(s)})})}var i=t.resolve;return t.iterate=e,t.unfold=n,t}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],64:[function(t,e){(function(t){"use strict";t(function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],65:[function(t,e){(function(t){"use strict";t(function(t){var e=t("../timer"),n=t("../TimeoutError");return function(t){return t.prototype.delay=function(t){var n=this._beget(),i=n._handler;return this._handler.map(function(n){e.set(function(){i.resolve(n)},t)},i),n},t.prototype.timeout=function(t,i){function r(){a.reject(o?i:new n("timed out after "+t+"ms"))}var o=arguments.length>1,s=this._beget(),a=s._handler,c=e.set(r,t);return this._handler.chain(a,function(t){e.clear(c),this.resolve(t)},function(t){e.clear(c),this.reject(t)},a.notify),s},t}})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../TimeoutError":57,"../timer":71}],66:[function(t,e){(function(t){"use strict";t(function(t){function e(t){var e="object"==typeof t&&t.stack?t.stack:n(t);return t instanceof Error?e:e+" (WARNING: non-Error used)"}function n(t){var e=t+"";return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=i(t,e)),e}function i(t,e){try{return JSON.stringify(t)}catch(t){return e}}function r(t){throw t}function o(){}var s=t("../timer");return function(t){function i(t){t.handled||(f.push(t),u("Potentially unhandled rejection ["+t.id+"] "+e(t.value)))}function a(t){var e=f.indexOf(t);e>=0&&(f.splice(e,1),h("Handled previous rejection ["+t.id+"] "+n(t.value)))}function c(t,e){d.push(t,e),p||(p=!0,p=s.set(l,0))}function l(){for(p=!1;d.length>0;)d.shift()(d.shift())}var u=o,h=o;"undefined"!=typeof console&&(u=console.error!==void 0?function(t){console.error(t)}:function(t){console.log(t)},h=console.info!==void 0?function(t){console.info(t)}:function(t){console.log(t)}),t.onPotentiallyUnhandledRejection=function(t){c(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){c(a,t)},t.onFatalRejection=function(t){c(r,t.value)};var d=[],f=[],p=!1;return t}})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../timer":71}],67:[function(t,e){(function(t){"use strict";t(function(){return function(t){return t.prototype["with"]=t.prototype.withThis=t.prototype._bindContext,t}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],68:[function(t,e){(function(t){"use strict";t(function(){function t(t,e,n){return t[n]=e,t}function e(t){return"function"==typeof t?t.bind():Object.create(t)}return function(n,i,r,o){return i===void 0&&(i=t),Object.keys(o).reduce(function(t,e){var r=o[e];return"function"==typeof r?i(t,n(r),e):t},r===void 0?e(o):r)}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],69:[function(t,e){(function(t){"use strict";t(function(){return function(t){function e(t,e){this._handler=t===d?e:n(t)}function n(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}function i(t){r.notify(t)}var r=new f;try{t(e,n,i)}catch(o){n(o)}return r}function i(t){return u(t)?t:new e(d,new g(l(t)))}function r(t){return new e(d,new g(new b(t)))}function o(){return B}function s(){return new e(d,new f)}function a(t){function n(t,e,n,i){n.map(function(t){e[i]=t,0===--c&&this.become(new m(e))},t)}var i,r,o,s,a=new f,c=t.length>>>0,l=Array(c);for(i=0;t.length>i;++i)if(o=t[i],void 0!==o||i in t)if(A(o))if(r=u(o)?o._handler.join():h(o),s=r.state(),0===s)n(a,l,r,i);else{if(!(s>0)){a.become(r);break}l[i]=r.value,--c}else l[i]=o,--c;else--c;return 0===c&&a.become(new m(l)),new e(d,a)}function c(t){if(Object(t)===t&&0===t.length)return o();var n,i,r=new f;for(n=0;t.length>n;++n)i=t[n],void 0!==i&&n in t&&l(i).chain(r,r.resolve,r.reject);return new e(d,r)}function l(t){return u(t)?t._handler.join():A(t)?h(t):new m(t)}function u(t){return t instanceof e}function h(t){try{var e=t.then;return"function"==typeof e?new y(e,t):new m(t)}catch(n){return new b(n)}}function d(){}function f(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function p(t){this.handler=t}function g(t){p.call(this,t)}function v(t,e){p.call(this,t),this.receiver=e}function y(t,e){f.call(this),D.enqueue(new T(t,e,this))}function m(t){e.createContext(this),this.value=t}function b(t){e.createContext(this),this.id=++L,this.value=t,this.handled=!1,this.reported=!1,this._report()}function _(t,n){t.handled||(t.reported=!0,e.onPotentiallyUnhandledRejection(t,n))}function w(t){t.reported&&e.onPotentiallyUnhandledRejectionHandled(t)}function x(){b.call(this,new TypeError("Promise cycle"))}function S(){return{state:"pending"}}function C(t,e){this.continuation=t,this.handler=e}function k(t,e){this.handler=t,this.value=e}function T(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function E(t,e,n,i,r){try{t.call(e,n,i,r)}catch(o){i(o)}}function A(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function K(t,e,n){try{return t.call(n,e)}catch(i){return r(i)}}function P(t,e,n,i){try{return t.call(i,e,n)}catch(o){return r(o)}}function N(t,e,n){try{return t.call(n,e)}catch(i){return i}}function j(t,e){e.prototype=R(t.prototype),e.prototype.constructor=e}function O(){}var D=t.scheduler,R=Object.create||function(t){function e(){}return e.prototype=t,new e};e.resolve=i,e.reject=r,e.never=o,e._defer=s,e.prototype.then=function(t,n){var i=this._handler;if("function"!=typeof t&&i.join().state()>0)return new e(d,i);var r=this._beget(),o=r._handler;return i.when({resolve:o.resolve,notify:o.notify,context:o,receiver:i.receiver,fulfilled:t,rejected:n,progress:arguments.length>2?arguments[2]:void 0}),r},e.prototype["catch"]=function(t){return this.then(void 0,t)},e.prototype._bindContext=function(t){return new e(d,new v(this._handler,t))},e.prototype._beget=function(){var t=this._handler,e=new f(t.receiver,t.join().context);return new this.constructor(d,e)},e.prototype._maybeFatal=function(t){if(A(t)){var e=l(t),n=this._handler.context;e.catchError(function(){this._fatal(n)},e)}},e.all=a,e.race=c,d.prototype.when=d.prototype.resolve=d.prototype.reject=d.prototype.notify=d.prototype._fatal=d.prototype._unreport=d.prototype._report=O,d.prototype.inspect=S,d.prototype._state=0,d.prototype.state=function(){return this._state},d.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},d.prototype.chain=function(t,e,n,i){this.when({resolve:O,notify:O,context:void 0,receiver:t,fulfilled:e,rejected:n,progress:i})},d.prototype.map=function(t,e){this.chain(e,t,e.reject,e.notify)},d.prototype.catchError=function(t,e){this.chain(e,e.resolve,t,e.notify)},d.prototype.fold=function(t,e,n){this.join().map(function(t){l(n).map(function(n){this.resolve(P(e,n,t,this.receiver))},this)},t)},j(d,f),f.prototype._state=0,f.prototype.inspect=function(){return this.resolved?this.join().inspect():S()},f.prototype.resolve=function(t){this.resolved||this.become(l(t))},f.prototype.reject=function(t){this.resolved||this.become(new b(t))},f.prototype.join=function(){if(this.resolved){for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=new x;return t}return this},f.prototype.run=function(){var t=this.consumers,e=this.join();this.consumers=void 0;for(var n=0;t.length>n;++n)e.when(t[n])},f.prototype.become=function(t){this.resolved=!0,this.handler=t,void 0!==this.consumers&&D.enqueue(this),void 0!==this.context&&t._report(this.context)},f.prototype.when=function(t){this.resolved?D.enqueue(new C(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},f.prototype.notify=function(t){this.resolved||D.enqueue(new k(this,t))},f.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},f.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},f.prototype._fatal=function(t){var e=t===void 0?this.context:t;this.resolved&&this.handler.join()._fatal(e)},j(d,p),p.prototype.inspect=function(){return this.join().inspect()},p.prototype._report=function(t){this.join()._report(t)},p.prototype._unreport=function(){this.join()._unreport()},j(p,g),g.prototype.when=function(t){D.enqueue(new C(t,this.join()))},j(p,v),v.prototype.when=function(t){void 0!==this.receiver&&(t.receiver=this.receiver),this.join().when(t)},j(f,y),j(d,m),m.prototype._state=1,m.prototype.inspect=function(){return{state:"fulfilled",value:this.value}},m.prototype.when=function(t){var n;"function"==typeof t.fulfilled?(e.enterContext(this),n=K(t.fulfilled,this.value,t.receiver),e.exitContext()):n=this.value,t.resolve.call(t.context,n)};var L=0;j(d,b),b.prototype._state=-1,b.prototype.inspect=function(){return{state:"rejected",reason:this.value}},b.prototype.when=function(t){var n;"function"==typeof t.rejected?(this._unreport(),e.enterContext(this),n=K(t.rejected,this.value,t.receiver),e.exitContext()):n=new e(d,this),t.resolve.call(t.context,n)},b.prototype._report=function(t){D.afterQueue(_,this,t)},b.prototype._unreport=function(){this.handled=!0,D.afterQueue(w,this)},b.prototype._fatal=function(t){e.onFatalRejection(this,t)},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=O;var F=new d,B=new e(d,F);return j(b,x),C.prototype.run=function(){this.handler.join().when(this.continuation)},k.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e=0;t.length>e;++e)this._notify(t[e])},k.prototype._notify=function(t){var e="function"==typeof t.progress?N(t.progress,this.value,t.receiver):this.value;t.notify.call(t.context,e)},T.prototype.run=function(){function t(t){i.resolve(t)}function e(t){i.reject(t)}function n(t){i.notify(t)}var i=this.resolver;E(this._then,this.thenable,t,e,n)},e}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],70:[function(t,e){(function(t){"use strict";t(function(t){function e(t){this._enqueue=t,this._handlerQueue=new n(15),this._afterQueue=new n(5),this._running=!1;var e=this;this.drain=function(){e._drain()}}var n=t("./Queue");return e.prototype.enqueue=function(t){this._handlerQueue.push(t),this._running||(this._running=!0,this._enqueue(this.drain))},e.prototype.afterQueue=function(t,e,n){this._afterQueue.push(t),this._afterQueue.push(e),this._afterQueue.push(n),this._running||(this._running=!0,this._enqueue(this.drain))},e.prototype._drain=function(){for(var t=this._handlerQueue;t.length>0;)t.shift().run();for(this._running=!1,t=this._afterQueue;t.length>0;)t.shift()(t.shift(),t.shift())},e})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./Queue":56}],71:[function(t,e){(function(t){"use strict";t(function(t){var e,n,i,r;e=t;try{n=e("vertx"),i=function(t,e){return n.setTimer(e,t)},r=n.cancelTimer}catch(o){i=function(t,e){return setTimeout(t,e)},r=function(t){return clearTimeout(t)}}return{set:i,clear:r}})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{}],72:[function(t,e){(function(t){"use strict";t(function(t){var e=t("./monitor/PromiseMonitor"),n=t("./monitor/ConsoleReporter"),i=new e(new n);return function(t){return i.monitor(t)}})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./monitor/ConsoleReporter":73,"./monitor/PromiseMonitor":74}],73:[function(t,e){(function(t){"use strict";t(function(t){function e(){this._previouslyReported=!1}function n(){var t,e,n,r;return"undefined"==typeof console?t=e=i:"function"==typeof console.error&&"function"==typeof console.dir?(e=function(t){console.error(t)},t=function(t){console.log(t)},"function"==typeof console.groupCollapsed&&(n=function(t){console.groupCollapsed(t)},r=function(){console.groupEnd()})):"function"==typeof console.log&&"undefined"!=typeof JSON&&(t=e=function(t){if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){}console.log(t)}),{msg:t,warn:e,groupStart:n||e,groupEnd:r||i}}function i(){}var r=t("./error"),o="[promises] Unhandled rejections: ",s="[promises] All previously unhandled rejections have now been handled";return e.prototype=n(),e.prototype.log=function(t){if(0===t.length)return this._previouslyReported&&(this._previouslyReported=!1,this.msg(s)),void 0;this._previouslyReported=!0,this.groupStart(o+t.length);try{this._log(t)}finally{this.groupEnd()}},e.prototype._log=function(t){for(var e=0;t.length>e;++e)this.warn(r.format(t[e]))},e})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./error":76}],74:[function(t,e){(function(t){"use strict";t(function(t){function e(t){this.logDelay=0,this.stackFilter=s,this.stackJumpSeparator=o,this.filterDuplicateFrames=!0,this._reporter=t,"function"==typeof t.configurePromiseMonitor&&t.configurePromiseMonitor(this),this._traces=[],this._traceTask=0;var e=this;this._doLogTraces=function(){e._logTraces()}}function n(t,e,n){e.length>1&&(e[0]=n,t.push.apply(t,e))}function i(t,e){return e.filter(function(e){return!t.test(e)})}function r(t){return!t.handler.handled}var o="from execution context:",s=/[\s\(\/\\](node|module|timers)\.js:|when([\/\\]{1,2}(lib|monitor|es6-shim)[\/\\]{1,2}|\.js)|(new\sPromise)\b|(\b(PromiseMonitor|ConsoleReporter|Scheduler|RunHandlerTask|ProgressTask|Promise|.*Handler)\.[\w_]\w\w+\b)|\b(tryCatch\w+|getHandler\w*)\b/i,a=t("../lib/timer").set,c=t("./error"),l=[];return e.prototype.monitor=function(t){var e=this;return t.createContext=function(t,n){t.context=e.createContext(t,n)},t.enterContext=function(t){l.push(t.context)},t.exitContext=function(){l.pop()},t.onPotentiallyUnhandledRejection=function(t,n){return e.addTrace(t,n)},t.onPotentiallyUnhandledRejectionHandled=function(t){return e.removeTrace(t)},t.onFatalRejection=function(t,n){return e.fatal(t,n)},this},e.prototype.createContext=function(t,e){var n={parent:e||l[l.length-1],stack:void 0};return c.captureStack(n,t.constructor),n},e.prototype.addTrace=function(t,e){var n,i;for(i=this._traces.length-1;i>=0&&(n=this._traces[i],n.handler!==t);--i);i>=0?n.extraContext=e:this._traces.push({handler:t,extraContext:e}),this.logTraces()},e.prototype.removeTrace=function(){this.logTraces()},e.prototype.fatal=function(t,e){var n=Error();n.stack=this._createLongTrace(t.value,t.context,e).join("\n"),a(function(){throw n},0)},e.prototype.logTraces=function(){this._traceTask||(this._traceTask=a(this._doLogTraces,this.logDelay))},e.prototype._logTraces=function(){this._traceTask=void 0,this._traces=this._traces.filter(r),this._reporter.log(this.formatTraces(this._traces))},e.prototype.formatTraces=function(t){return t.map(function(t){return this._createLongTrace(t.handler.value,t.handler.context,t.extraContext)},this)},e.prototype._createLongTrace=function(t,e,n){var r=c.parse(t)||[t+""+" (WARNING: non-Error used)"];return r=i(this.stackFilter,r,0),this._appendContext(r,e),this._appendContext(r,n),this.filterDuplicateFrames?this._removeDuplicates(r):r},e.prototype._removeDuplicates=function(t){var e={},n=this.stackJumpSeparator,i=0;return t.reduceRight(function(t,r,o){return 0===o?t.unshift(r):r===n?i>0&&(t.unshift(r),i=0):e[r]||(e[r]=!0,t.unshift(r),++i),t},[])},e.prototype._appendContext=function(t,e){t.push.apply(t,this._createTrace(e))},e.prototype._createTrace=function(t){for(var e,r=[];t;)e=c.parse(t),e&&(e=i(this.stackFilter,e),n(r,e,this.stackJumpSeparator)),t=t.parent;return r},e})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../lib/timer":71,"./error":76}],75:[function(t,e){(function(t){"use strict";t(function(t){var e=t("../monitor"),n=t("../when").Promise;return e(n)})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../monitor":72,"../when":77}],76:[function(t,e){(function(t){"use strict";t(function(){function t(t){try{throw Error()}catch(e){t.stack=e.stack}}function e(t){t.stack=Error().stack}function n(t){return r(t)}function i(t){var e=Error();return e.stack=n(t),e}function r(t){for(var e=!1,n="",i=0;t.length>i;++i)e?n+="\n"+t[i]:(n+=t[i],e=!0);return n}var o,s,a;return Error.captureStackTrace?(o=function(t){return t&&t.stack&&t.stack.split("\n")},a=n,s=Error.captureStackTrace):(o=function(t){var e=t&&t.stack&&t.stack.split("\n");return e&&t.message&&e.unshift(t.message),e},function(){var r=Error();"string"!=typeof r.stack?(a=n,s=t):(a=i,s=e)}()),{parse:o,format:a,captureStack:s}})})("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],77:[function(t,e){(function(t){"use strict";t(function(t){function e(t,e,n){var i=k.resolve(t);return 2>arguments.length?i:arguments.length>3?i.then(e,n,arguments[3]):i.then(e,n)}function n(t){return new k(t)}function i(t){return function(){return o(t,this,T.call(arguments))}}function r(t){return o(t,this,T.call(arguments,1))}function o(t,e,n){return k.all(n).then(function(n){return t.apply(e,n)})}function s(){return new a}function a(){function t(t){i._handler.resolve(t)}function e(t){i._handler.reject(t)}function n(t){i._handler.notify(t)}var i=k._defer();this.promise=i,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}function c(t){return t&&"function"==typeof t.then}function l(){return k.all(arguments)}function u(t){return e(t,k.all)}function h(t){return e(t,k.settle)}function d(t,n){return e(t,function(t){return k.map(t,n)})}function f(t){var n=T.call(arguments,1);return e(t,function(t){return n.unshift(t),k.reduce.apply(k,n)})}function p(t){var n=T.call(arguments,1);return e(t,function(t){return n.unshift(t),k.reduceRight.apply(k,n)})}var g=t("./lib/decorators/timed"),v=t("./lib/decorators/array"),y=t("./lib/decorators/flow"),m=t("./lib/decorators/fold"),b=t("./lib/decorators/inspect"),_=t("./lib/decorators/iterate"),w=t("./lib/decorators/progress"),x=t("./lib/decorators/with"),S=t("./lib/decorators/unhandledRejection"),C=t("./lib/TimeoutError"),k=[v,y,m,_,w,b,x,g,S].reduce(function(t,e){return e(t)},t("./lib/Promise")),T=Array.prototype.slice;return e.promise=n,e.resolve=k.resolve,e.reject=k.reject,e.lift=i,e["try"]=r,e.attempt=r,e.iterate=k.iterate,e.unfold=k.unfold,e.join=l,e.all=u,e.settle=h,e.any=i(k.any),e.some=i(k.some),e.map=d,e.reduce=f,e.reduceRight=p,e.isPromiseLike=c,e.Promise=k,e.defer=s,e.TimeoutError=C,e})})("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./lib/Promise":55,"./lib/TimeoutError":57,"./lib/decorators/array":59,"./lib/decorators/flow":60,"./lib/decorators/fold":61,"./lib/decorators/inspect":62,"./lib/decorators/iterate":63,"./lib/decorators/progress":64,"./lib/decorators/timed":65,"./lib/decorators/unhandledRejection":66,"./lib/decorators/with":67}],78:[function(t,e){function n(t,e){var n;return n=e?new r(t,e):new r(t)}var i=function(){return this}(),r=i.WebSocket||i.MozWebSocket;e.exports=r?n:null,r&&(n.prototype=r.prototype)},{}],79:[function(t,e){e.exports={name:"autobahn",version:"0.9.5",description:"An implementation of The Web Application Messaging Protocol (WAMP).",main:"index.js",scripts:{test:"nodeunit test/test.js"},dependencies:{when:">= 2.8.0",ws:">= 0.4.31","crypto-js":">= 3.1.2-2"},devDependencies:{browserify:">= 3.28.1",nodeunit:">= 0.8.6"},repository:{type:"git",url:"git://github.com/tavendo/AutobahnJS.git"},keywords:["WAMP","WebSocket","RPC","PubSub"],author:"Tavendo GmbH",license:"MIT"}},{}]},{},[4])(4)}),function(){"use strict";function t(i){if(!i)throw Error("No options passed to Waypoint constructor");if(!i.element)throw Error("No element option passed to Waypoint constructor");if(!i.handler)throw Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,i),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,e+=1}var e=0,n={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.destroyAll=function(){var t=[];for(var e in n)t.push(n[e]);for(var i=0,r=t.length;r>i;i++)t[i].destroy()},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=r.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,i[t.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,i={},r=window.Waypoint,o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t,s=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete i[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,o(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||r.isTouch)&&(e.didScroll=!0,o(t))})},e.prototype.handleResize=function(){r.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};
for(var n in e){var i=e[n],r=i.newScroll>i.oldScroll,o=r?i.forward:i.backward;for(var s in this.waypoints[n]){var a=this.waypoints[n][s],c=i.oldScroll<a.triggerPoint,l=i.newScroll>=a.triggerPoint,u=c&&l,h=!c&&!l;(u||h)&&(a.queueTrigger(o),t[a.group.id]=a.group)}}for(var d in t)t[d].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element===this.element.window?r.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element===this.element.window?r.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var n in this.waypoints[e])t.push(this.waypoints[e][n]);for(var i=0,r=t.length;r>i;i++)t[i].destroy()},e.prototype.refresh=function(){var t,e=this.element===this.element.window,n=this.adapter.offset(),i={};this.handleScroll(),t={horizontal:{contextOffset:e?0:n.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:n.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var o=t[r];for(var s in this.waypoints[r]){var a,c,l,u,h,d=this.waypoints[r][s],f=d.options.offset,p=d.triggerPoint,g=0,v=null==p;d.element!==d.element.window&&(g=d.adapter.offset()[o.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(o.contextDimension*f/100))),a=o.contextScroll-o.contextOffset,d.triggerPoint=g+a-f,c=o.oldScroll>p,l=d.triggerPoint>=o.oldScroll,u=c&&l,h=!c&&!l,!v&&u?(d.queueTrigger(o.backward),i[d.group.id]=d.group):!v&&h?(d.queueTrigger(o.forward),i[d.group.id]=d.group):v&&o.oldScroll>=d.triggerPoint&&(d.queueTrigger(o.forward),i[d.group.id]=d.group)}}for(var y in i)i[y].flushTriggers();return this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in i)i[t].refresh()},e.findByElement=function(t){return i[t.waypointContextKey]},window.onload=function(){s&&s(),e.refreshAll()},r.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function n(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},r=window.Waypoint;n.prototype.add=function(t){this.waypoints.push(t)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],r="up"===n||"left"===n;i.sort(r?e:t);for(var o=0,s=i.length;s>o;o+=1){var a=i[o];(a.options.continuous||o===i.length-1)&&a.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(e){this.waypoints.sort(t);var n=r.Adapter.inArray(e,this.waypoints),i=n===this.waypoints.length-1;return i?null:this.waypoints[n+1]},n.prototype.previous=function(e){this.waypoints.sort(t);var n=r.Adapter.inArray(e,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},n.prototype.remove=function(t){var e=r.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(t){return i[t.axis][t.name]||new n(t)},r.Group=n}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,n=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,n){t.prototype[n]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(n,i){t[i]=e[i]}),n.adapters.push({name:"jquery",Adapter:t}),n.Adapter=t}(),function(){"use strict";function t(t){return function(){var n=[],i=arguments[0];return t.isFunction(arguments[0])&&(i=t.extend({},arguments[1]),i.handler=arguments[0]),this.each(function(){var r=t.extend({},i,{element:this});"string"==typeof r.context&&(r.context=t(this).closest(r.context)[0]),n.push(new e(r))}),n}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n});var Site=function(){this.initEvents()};Site.prototype.initEvents=function(){$("#lang-nav").on("click",function(){$(this).find("ul").toggle("slide",{direction:"up"}),ga("send","event","uiAction","languageToggle")}),$(window).load(function(){$("#skillCount").waypoint({handler:function(){if(!$("#skillCount").hasClass("animationDone")){var t=new countUp("skillCountNum",0,skillCount,0,4,{useEasing:!0,useGrouping:!0,separator:"",decimal:"",prefix:"",suffix:""});t.start(),$("#skillCount").addClass("animationDone")}},offset:"100%"})});var t=new autobahn.Connection({url:wsUrl,realm:"skp"});t.onopen=function(t){t.subscribe("ws.skillCount",function(t){var e=t[0];$("#kw-input").attr("placeholder",jt.footer.searchPlaceholder.replace("%s",e))})},t.open()};var Node=function(t,e){this.id=t.uuid,this.params=e,this.parent=e.parent?e.parent:null,this.name,this.slug=t.slug,this.depth=t.depth?t.depth:0,this.onComplete=e.onComplete,this.rank=e.rank,this.count=e.count,this.isLast=e.isLast,this.takePlaceOf=e.takePlaceOf?e.takePlaceOf:null,this.animate=e.animate!==void 0?e.animate:!0,this.visualState="normal",this.glow=0,this.invisibleChildrenCount=t.childrenCount,this.childrenMarkedForDeleteCount=0,this.shapes,this.children=[],this.ancestors=[],this.siblings=[],this.open=!1,this.isSelected=!1,this.isEdited=!1,this.isTarget=!1,this.isInPath,this.knGlow,this.backImage,this.totalChildren,this.appearDestX,this.appearDestY,this.rootOffsetX=0,this.rootOffsetY=0,this.panel,this.cached=!1,this.nodeReady=!1,this.text,this.sizes,this.freeSlots=[];var n=this;if(null==this.parent&&(tree.rootNode=this,this.name="Skills"),this.setSizes(),tree.nodes[this.id]=this,null!=this.parent){this.parent.children[this.id]=this;for(var i in Object.keys(this.parent.ancestors)){var r=Object.keys(this.parent.ancestors)[i];this.ancestors[r]=tree.nodes[r]}this.ancestors[this.parent.id]=this.parent}if(null==this.parent){var o=new Kinetic.Image({x:0,y:0,width:this.sizes.labelWidth,height:this.sizes.labelHeight,image:$("img#node-sun")[0]});this.sunImage=f;var s=stage.getWidth()/6,a=(stage.getHeight()-globalSizes.footerHeight)/2-this.sizes.labelHeight/2,c=new Kinetic.Group({x:s,y:a}),l=new Kinetic.Circle({radius:this.sizes.sunRadius,x:this.sizes.labelWidth/2,y:this.sizes.labelHeight/2});c.add(o,l),this.shapes=c;var u=l;this.labelGroup=u,this.backImage=new Kinetic.Image,this.knGlow=new Kinetic.Image,nodesLayer.add(c)}else{var h=1==tree.targetMode?"-t":"";if(this.invisibleChildrenCount>0)var d=$("img#node-normal-children"+h)[0];else var d=$("img#node-normal"+h)[0];var f=new Kinetic.Image({x:0,y:0,width:this.sizes.labelWidth+this.sizes.editButtonWidth,height:this.sizes.labelHeight,image:d});this.backImage=f;var p=new Kinetic.Rect({x:0,y:0,width:this.sizes.editButtonWidth,height:this.sizes.labelHeight}),g=new Kinetic.Rect({x:this.sizes.editButtonWidth,y:0,width:this.sizes.labelWidth,height:this.sizes.labelHeight,fill:"white",opacity:0});this.setName(t.name);var u=new Kinetic.Group({height:this.sizes.labelHeight,width:this.sizes.labelWidth});u.add(g,this.text);var v=new Kinetic.Image({x:this.sizes.glowOffsetX,y:this.sizes.glowOffsetY,image:$("img#glow-nochildren")[0],width:this.sizes.glowWidth,height:this.sizes.glowHeight,opacity:0});this.knGlow=v;var s=this.parent.shapes.x()+this.parent.sizes.startXOffset,a=this.parent.shapes.y()+this.parent.sizes.startYOffset-this.sizes.labelHeight/2;if(null!=this.takePlaceOf){var y=!1;this.appearDestX=this.takePlaceOf.appearDestX,this.appearDestY=this.takePlaceOf.appearDestY,this.midX=this.takePlaceOf.midX,this.midY=this.takePlaceOf.midY}else{var y=this.animate;this.appearDestX=this.parent.shapes.x()+this.parent.sizes.midXOffset,this.appearDestY=this.parent.freeSlots.length>0?this.parent.freeSlots.shift():this.parent.shapes.y()+this.parent.sizes.labelHeight/2+(this.sizes.slotHeight*this.parent.totalChildren/-2+this.sizes.verticalGap/2)+this.sizes.slotHeight*(Object.keys(this.parent.children).length-1),this.midX=this.parent.shapes.x()+this.parent.sizes.midXOffset,this.midY=this.parent.shapes.y()+this.parent.sizes.midYOffset-this.sizes.labelHeight/2}var c=new Kinetic.Group({x:s,y:a,width:this.sizes.labelWidth+this.sizes.editButtonWidth,height:this.sizes.labelHeight});c.add(v,f,p,u),this.shapes=c,nodesLayer.add(c),c.moveToBottom()}if(nodesLayer.draw(),null!=this.parent){var m=this,b=new Kinetic.Tween({node:c,x:m.midX,y:m.midY,duration:.05+.1*(this.rank/this.count),onFinish:function(){var t=new Kinetic.Tween({node:c,x:m.appearDestX,y:m.appearDestY,duration:.05+.1*(m.rank/m.count),onFinish:function(){tree.targetMode===!0&&tree.editedNode!==void 0&&tree.editedNode.id===m.id&&(m.panel=tree.editedNode.panel,tree.editedNode=m,m.isEdited=!0,m.setVisualState("normal-edit")),m.nodeReady=!0,1==m.isLast&&(fpsCounter.end(),m.parent.setChildrenSiblings(),m.parent.invisibleChildrenCount=Object.keys(m.parent.children).length,tree.busy=!1,null!=m.onComplete&&m.onComplete(),tree.readyForNextLevel.fire())}});1==y?t.play():t.finish()}});1==y?b.play():b.finish()}if(null!=this.parent&&(this.edge=new Edge(this.parent,this),this.edge.shape.moveToBottom()),y===!1&&stage.draw(),u.on("mouseover",function(){document.body.style.cursor="pointer"}),u.on("mouseout",function(){document.body.style.cursor="default"}),u.on("click tap",function(){if(1==tree.targetMode&&n==tree.rootNode)return n.setTarget(),void 0;if((1==tour.isActive||1==doTour)&&tour.actionOnTree("label-click",n),!tree.busy){tree.busy=!0;var t=n.getSiblingMatch("isInPath",!0);t!==void 0&&(t.contract({releaseTreeLock:!1}),tree.selectedNode.deSelect()),n.open?(ga("send","event","nodeClose",n.name),n.deSelect(),n.contract()):(ga("send","event","nodeOpen",n.name),n.select(),n.expand())}}),this.labelGroup=u,this!=tree.rootNode&&(p.on("mouseover",function(){document.body.style.cursor="pointer"}),p.on("mouseout",function(){document.body.style.cursor="default"}),p.on("click tap",function(){return 1==tree.targetMode?(n.setTarget(),void 0):((1==tour.isActive||1==doTour)&&tour.actionOnTree("plus-click",n),tree.busy?void 0:(tree.busy=!0,tree.editedNode&&tree.editedNode.id!=n.id?(tree.editedNode.finishEdit(function(){n.startEdit()}),void 0):(0==n.isEdited?(ga("send","event","nodeEdit",n.name),n.startEdit()):n.finishEdit(),void 0)))}),this.editButton=p),null==this.parent)if(0==tree.autoLoad){if(doTour===!1){var _=500,w=!0;$("#kinetic, #backdrop").css("visibility","visible").fadeIn({duration:_})}else{_=0;var w=!1}setTimeout(function(){tree.rootNode.select().expand({onComplete:function(){"undefined"!=typeof doTour&&1==doTour&&($("#kinetic, #backdrop").css("visibility","visible").show(),tour.start()),tree.rootNodeReady.fire()},animate:w})},_)}else tree.rootNodeReady.fire()};Node.prototype.expand=function(t){var e=this;if(null!=t)var n=t.onComplete,i=t.animate!==void 0?t.animate:!0;var r=baseUrl+"api/getNodeChildren/"+this.id+"/";loader.show(),$.ajax({url:r}).done(function(t){if(e.totalChildren=t.data.length,e.totalChildren>0){e.open=!0,e.setVisualState("glow-children"),camera.checkCameraPosition(e,t.data.length);var r=0,o=!1;fpsCounter.start(),t.data.forEach(function(s){++r==t.data.length&&(o=!0),new Node(s,{parent:e,rank:r,count:t.data.length,isLast:o,onComplete:n?n:null,animate:i})})}else tree.busy=!1,e.setVisualState("glow-nochildren"),camera.checkCameraPosition(e)}).always(function(){loader.hide()}).fail(function(){tree.busy=!1})},Node.prototype.select=function(t){if(this.isSelected)return this;if(null!=t&&0!=t.finishEdit)var e=!0;return tree.selectedNode&&tree.selectedNode.id!=this.id&&tree.selectedNode.deSelect(),tree.editedNode&&this.id!=tree.editedNode.id&&1==e&&tree.editedNode.finishEdit(),this.isSelected=!0,tree.selectedNode=this,this.isInPath=!0,this},Node.prototype.setChildrenSiblings=function(){for(var t in this.children){var e=this.children[t];for(var n in e.parent.children){var i=e.parent.children[n];i!=e&&(e.siblings[i.id]=i)}}},Node.prototype.getChildrenRecursive=function(){for(var t in this.children)recursiveChildren.push(this.children[t]),this.children[t].getChildrenRecursive()},Node.prototype.contract=function(t){var e=this;if(t!==void 0){if(null==t.releaseTreeLock)var n=!0;if(null!=t.onComplete)var i=t.onComplete;else var i=null;if(null!=t.noAnim)var r=t.noAnim;else var r=!1}else var i=null,n=!0,r=!1;this.shapes.moveToTop();var o=this.getChildrenMatch("open",!0);if(1==this.open&&o!==void 0){for(var s in o.children){var a=o.children[s];a.delete()}stage.draw()}var c=0,l=Object.keys(this.children).length;if(0==l)1==n&&(tree.busy=!1),this.open=!1,this.setVisualState("normal"),null!=i&&i();else{null!=this.parent&&this.parent.select(),fpsCounter.start();for(var s in this.children){var a=this.children[s];a.cached&&a.clearCache();var u=new Kinetic.Tween({node:a.shapes,x:this.shapes.x()+this.sizes.midXOffset,y:this.shapes.y()+this.sizes.midYOffset-a.sizes.labelHeight/2,duration:.15,onFinish:function(){if(l-1>c++)this.skpNode.positionedForDeletion=!0;else{e.deleteChildrenMatch("positionedForDeletion",!0);var t=this.skpNode,o=new Kinetic.Tween({node:t.shapes,x:e.shapes.x()+70,y:e.shapes.y()+e.sizes.midYOffset-a.sizes.labelHeight/2,duration:.15,onFinish:function(){fpsCounter.end(),t.delete(),e.open=!1,e.freeSlots=[],e.setVisualState("auto"),1==n&&(tree.busy=!1),null!=i&&i()}});0==r?o.play():o.finish()}}});u.skpNode=a,0==r&&Object.keys(this.children).length>1?u.play():u.finish()}}return this},Node.prototype.deSelect=function(){return this.isSelected?(this.isSelected=!1,delete tree.selectedNode,this):this},Node.prototype.startEdit=function(){this.isEdited||(this.panel=new Panel(this,{onComplete:function(){tree.busy=!1,camera.checkIfPanelBlocksEditedNode()}}),this.setVisualState("normal-edit"),this.isEdited=!0,tree.editedNode=this)},Node.prototype.finishEdit=function(t){1!=tree.targetMode&&this.isEdited&&this.panel.locked!==!0&&(this.panel?this.panel.close({onComplete:function(){delete this.panel,actionsCount=0,t?t.call():tree.busy=!1}}):tree.busy=!1,this.isEdited=!1,delete tree.editedNode,1==this.open?this.setVisualState("glow-children"):this.setVisualState("normal"))},Node.prototype.getSiblings=function(){var t=[];for(var e in this.siblings){var n=this.siblings[e];t.push(n)}return t},Node.prototype.getSiblingMatch=function(t,e){for(var n in this.siblings){var i=this.siblings[n];if(i[t]==e)return i}},Node.prototype.getChildren=function(){var t=[];for(var e in this.children){var n=this.children[e];t.push(n)}return t},Node.prototype.getChildrenMatch=function(t,e){for(var n in this.children){var i=this.children[n];if(i[t]==e)return i}},Node.prototype.deleteChildrenMatch=function(t,e){for(var n in this.children){var i=this.children[n];i[t]==e&&i.delete()}},Node.prototype.setVisualState=function(t,e,n){if(this!=tree.rootNode){e===void 0&&(e=!0),n===void 0&&(n=!1);var i=1==tree.targetMode?"-t":"",r=i;switch(t){case"auto":this.isSelected&&this.isEdited?this.setVisualState("glow-edit"):!this.isSelected&&this.isEdited?(this.setVisualState("normal-edit"),n||this.setGlow(0)):this.isSelected||this.isEdited||this.open?!this.isSelected||this.isEdited||this.open?this.isSelected&&!this.isEdited&&this.open?(this.setVisualState("glow-children"),n||this.setGlow(1)):(console.warn("Impossible to automatically determine state for this node : "+this.name),console.warn(this)):(this.setVisualState("glow-nochildren"),n||this.setGlow(1)):(this.setVisualState("normal"),n||this.setGlow(0));break;case"normal":if(this.knGlow.setImage($("img#glow-nonotch")[0]),this.invisibleChildrenCount-this.childrenMarkedForDeleteCount>0)var o=$("img#node-normal-children"+r)[0];else var o=$("img#node-normal"+r)[0];this.backImage.setImage(o),null!=this.edge&&(this.edge.selected=!1),this.text.setFill("#333333"),n||this.setGlow(0);break;case"glow-children":this.isEdited||(this.backImage.setImage($("img#node-glow-children"+r)[0]),this.knGlow.setImage($("img#glow-children")[0]),this.text.setFill("#333333")),null!=this.edge&&(this.edge.selected=!0),n||this.setGlow(1);break;case"glow-nochildren":this.isEdited||(this.backImage.setImage($("img#node-glow-nochildren"+r)[0]),this.knGlow.setImage($("img#glow-nochildren")[0]),this.text.setFill("#333333")),null!=this.edge&&(this.edge.selected=!0),n||this.setGlow(1);break;case"normal-edit":if(this.isEdited===!0&&tree.targetMode===!0&&(r=""),this.invisibleChildrenCount-this.childrenMarkedForDeleteCount>0)var o=$("img#node-edit-children"+r)[0];else var o=$("img#node-edit"+r)[0];this.backImage.setImage(o),this.text.setFill("#fff");break;case"glow-edit":this.totalChildren>0?this.backImage.setImage($("img#node-glow-children"+r)[0]):this.backImage.setImage($("img#node-glow-nochildren"+r)[0]),this.text.setFill("#333333")}e&&nodesLayer.draw(),this.visualState=t}},Node.prototype.setGlow=function(t){if(this.glow!=t){var e=1==t?1:0;0==t&&(this.isInPath=!1);var n=new Kinetic.Tween({node:this.knGlow,duration:.5,opacity:e});n.play(),this.glow=t}},Node.prototype.getBoundingBox=function(t){if(t===void 0)return{x1:this.shapes.x(),y1:this.shapes.y(),x2:this.shapes.x()+this.sizes.totalWidth,y2:this.shapes.y()+this.sizes.totalHeight};if(0==Object.keys(this.children).length)var e={sizes:{totalHeight:56,totalWidth:237,verticalGap:20}};else var e=this.children[Object.keys(this.children)[0]];return{x1:this.shapes.x(),y1:this.shapes.y()+this.sizes.labelHeight/2-(t*(e.sizes.totalHeight+e.sizes.verticalGap)-e.sizes.verticalGap)/2,x2:this.shapes.x()+this.sizes.totalWidth+this.sizes.horizontalGap+e.sizes.totalWidth,y2:this.shapes.y()+this.sizes.labelHeight/2+(t*(e.sizes.totalHeight+e.sizes.verticalGap)-e.sizes.verticalGap)/2}},Node.prototype.cache=function(){this.cached&&console.warn("Node is already cached, we shouldn't be here"),this.nodeReady&&(this.shapes.cache({x:-25,y:-25,width:this.shapes.width()+50,height:this.shapes.height()+50}),this.shapes.x(this.shapes.x()-25),this.shapes.y(this.shapes.y()-25),this.labelGroup.listening(!1),this.editButton.listening(!1),this.edge!==void 0&&this.edge.shape.listening(!1),this.cached=!0)},Node.prototype.clearCache=function(){this.shapes.clearCache(),this.shapes.x(this.shapes.x()+25),this.shapes.y(this.shapes.y()+25),this.cached=!1,this.labelGroup.listening(!0),this.editButton.listening(!0)},Node.prototype.delete=function(){for(var t in this.children){var e=this.children[t];e.delete()}this.isEdited&&this.finishEdit(),this.isSelected&&this.deSelect(),this.isTarget&&this.unsetTarget(),this.edge.shape.destroy(),this.shapes.destroy(),this.parent.totalChildren--,delete this.parent.children[this.id],delete tree.nodes[this.id],delete this},Node.prototype.inSamePathAs=function(t){if((t===void 0||null===t)&&console.warn("Node.inSamePathAs : requires a Node object"),("number"!=typeof this.depth||"number"!=typeof t.depth)&&console.warn("Node.inSamePathAs : depth is not set"),this==t)return!0;if(!this.isSelected||!t.isSelected)return!1;if(this.isSiblingWith(t))return!1;if(this.depth>t.depth)var e=this,n=t;else if(this.depth<t.depth)var e=t,n=this;else console.warn("Node.inSamePathAs : something is wrong with nodes depth, we should never enter this block.");return e.ancestors[n.id]!==void 0?!0:!1},Node.prototype.isSiblingWith=function(t){return t===void 0&&console.warn("Node.isSiblingWith : requires a Node object"),"object"!=typeof this.siblings&&console.warn("Node.isSiblingWith : siblings don't seem to be set"),this.siblings[this.id]!==void 0&&console.warn("Node.isSiblingWith : node is listed as sibling of itself"),this.siblings[t.id]!==void 0?!0:!1},Node.prototype.calculateAncestors=function(){for(var t=[],e=this.depth,n=this.parent;e>0;){t[n.id]=n,e=n.depth;var n=n.parent}return t},Node.prototype.createNewChild=function(t){var e=this.getSiblingMatch("isInPath",!0);e!==void 0&&(e.contract(),tree.selectedNode.deSelect()),this.open?new Node(t,{parent:this,rank:1,count:1,isLast:!0,onComplete:n}):this.select().expand({onComplete:n});var n=function(){var e=tree.nodes[t.uuid].getSiblingMatch("isSelected",!0);e!==void 0&&e.contract().deSelect(),tree.nodes[t.uuid].select(),tree.nodes[t.uuid].expand()}},Node.prototype.createNewParent=function(t){var e=this.getChildrenMatch("open",!0);if(e!==void 0&&e.contract({noAnim:!0}),this.isSelected)var n=!0;else n=!1;var i=this.getSiblingMatch("isInPath",!0);if(i!==void 0&&i.contract({noAnim:!0}).deSelect(),moveGroup=new Kinetic.Group,Object.keys(this.children).length>0)for(var r in this.children){var o=this.children[r];moveGroup.add(o.shapes,o.edge.shape)}moveGroup.add(this.shapes),nodesLayer.add(moveGroup);var s=new Kinetic.Tween({node:moveGroup,x:moveGroup.x()+240+80,y:moveGroup.y(),duration:.3,onFinish:function(){for(;moveGroup.children.length>0;){var t=moveGroup.children[0];"Shape"!=t.nodeType&&t.move({x:320,y:0}),t.moveTo(nodesLayer)}moveGroup.destroy()}});delete this.parent.children[this.id];var a=new Node(t,{parent:this.parent,takePlaceOf:this,rank:1,count:1,isLast:!0});this.edge.nodeFrom=a,this.siblings=[],this.appearDestX+=320,this.midX+=320,this.parent=a,this.ancestors=this.calculateAncestors(),this.depth++;for(var r in this.children)this.children[r].depth++;tree.selectedNode&&tree.selectedNode.id!=this.id&&a.select({finishEdit:!1}),a.setVisualState("glow-children"),a.children[this.id]=this,a.totalChildren=1,a.open=!0;var i=a.getSiblingMatch("open",!0);i&&(i.deSelect(),i.contract()),n?this.select():a.select(),s.play()},Node.prototype.setName=function(t,e,n){if(this.name=t,e===void 0){var i=new Kinetic.Text({text:this.name,fontSize:14,fontFamily:"Avenir-Book",fill:"#333333",align:"center",x:67}),r=i.getWidth();160>=r?(i.width(160).setY(22),this.text===void 0?this.text=i:(this.text.setY(22),this.text.text(t),stage.draw())):this.setName(t,!0,i)}else 1==e&&(this.text===void 0&&(this.text=n),this.text.y(12).width(160).height(44).lineHeight(1.3),this.text.text(t),stage.draw())},Node.prototype.deleteFromDB=function(){this.isSelected&&(this.deSelect(),this.parent.select()),this.parent.open===!0&&(this.parent.freeSlots.push(this.shapes.y()),this.parent.freeSlots.sort()),this.isEdited&&this.finishEdit(),this.parent.invisibleChildrenCount--,0===Object.keys(this.parent.children).length-1&&this.parent.setVisualState("glow-nochildren"),this.delete(),stage.draw()},Node.prototype.setTarget=function(){this.isTarget||this.isEdited||this!=tree.editedNode.parent&&(tree.targetNode&&tree.targetNode.unsetTarget(),this.isTarget=!0,this.invisibleChildrenCount-this.childrenMarkedForDeleteCount>0?this.setVisualState("glow-children"):this.setVisualState("glow-nochildren"),tree.targetNode=this,tree.editedNode.panel.$activeSubpanel.find("#move-step3").css("display","block"),tree.editedNode.panel.$activeSubpanel.find("#destinationUuid").val(this.id),tree.editedNode.panel.$activeSubpanel.find("#destination-skill-name").empty().append(this.name))},Node.prototype.unsetTarget=function(){this.isTarget&&(this.isEdited||(this.isTarget=!1,this.isInPath||this.setVisualState("normal"),delete tree.targetNode,tree.editedNode.panel.$activeSubpanel.find("#move-step3").css("display","none"),tree.editedNode.panel.$activeSubpanel.find("#destinationUuid").empty(),tree.editedNode.panel.$activeSubpanel.find("#destination-skill-name").empty()))},Node.prototype.isNodeOnScreen=function(){var t=camera.getSecurityZone(0);return camera.isBoxOnScreen(this.getBoundingBox(),t,!0)},Node.prototype.setSizes=function(){var t;this==tree.rootNode?(t={sunRadius:82,labelWidth:288,labelHeight:288,editButtonWidth:0,editButtonHeight:0,glowOffsetX:0,glowOffsetY:0,glowWidth:288,glowHeight:108,verticalGap:20,horizontalGap:80,appearDestYOffset:-28,appearStartXOffset:-60,appearStartYOffset:-20},t.startXOffset=t.labelWidth/2-.75*t.sunRadius,t.startYOffset=t.labelHeight/2,t.midXOffset=t.labelWidth/2+t.sunRadius+t.horizontalGap,t.midYOffset=t.labelHeight/2,t.edgeStartXOffset=t.labelWidth/2+t.sunRadius,t.edgeStartYOffset=t.labelHeight/2,t.totalWidth=t.labelWidth,t.totalHeight=t.labelHeight):(t={labelWidth:179,labelHeight:56,editButtonWidth:58,editButtonHeight:56,glowOffsetX:-25,glowOffsetY:-25,glowWidth:288,glowHeight:108,verticalGap:20,horizontalGap:80,appearDestYOffset:0,appearStartXOffset:0,appearStartYOffset:0},t.totalWidth=t.labelWidth+t.editButtonWidth,t.totalHeight=t.labelHeight,t.startXOffset=.25*t.labelWidth,t.startYOffset=t.labelHeight/2,t.midXOffset=t.totalWidth+t.horizontalGap,t.midYOffset=t.labelHeight/2,t.edgeStartXOffset=t.totalWidth+4,t.edgeStartYOffset=t.labelHeight/2,t.slotHeight=t.labelHeight+t.verticalGap),this.sizes=t},Node.prototype.getPositionRelativeToScreen=function(){var t=camera.getSecurityZone(0);return{x:(this.shapes.x()-t.minX)*camera.scale,y:(this.shapes.y()-t.minY)*camera.scale}},Node.prototype.isBlockedByPanel=function(){if(camera.panelOffset>0){var t=this.getPositionRelativeToScreen(),e=t.x+this.sizes.totalWidth*camera.scale,n=stage.width()-camera.panelOffset;return e>n?e-n:!1}return!1};var Edge=function(t,e){this.nodeFrom=t,this.nodeTo=e,this.selected=!1,this.x,this.y,this.width,this.height;var n=this;this.getStartEndPoints=function(){var t=0,e=0;return 1==n.nodeTo.cached&&(t=25),1==n.nodeFrom.cached&&(e=25),edgeStartX=n.nodeFrom.shapes.x()+n.nodeFrom.sizes.edgeStartXOffset,edgeStartY=n.nodeFrom.shapes.y()+n.nodeFrom.sizes.edgeStartYOffset,edgeEndX=n.nodeTo.shapes.x(),edgeEndY=n.nodeTo.shapes.y()+n.nodeTo.shapes.getHeight()/2,{nodeFrom:{x:edgeStartX+e,y:edgeStartY+e},nodeTo:{x:edgeEndX+t,y:edgeEndY+t}}},this.cachePos=this.getStartEndPoints();var i=new Kinetic.Shape({drawFunc:function(t){var e=n.getStartEndPoints();if(n.cachePos=e,cp1X=e.nodeFrom.x+50,cp1Y=e.nodeFrom.y,cp2X=e.nodeTo.x-50,cp2Y=e.nodeTo.y,n.selected){var i=this.attrs.stroke,r=this.attrs.strokeWidth;this.attrs.stroke="rgba(251,225,169,0.4)",this.attrs.strokeWidth="6",t.beginPath(),t.moveTo(e.nodeFrom.x,e.nodeFrom.y),t.bezierCurveTo(cp1X,cp1Y,cp2X,cp2Y,e.nodeTo.x,e.nodeTo.y),t.strokeShape(this),this.attrs.stroke=i,this.attrs.strokeWidth=r}t.beginPath(),t.moveTo(e.nodeFrom.x,e.nodeFrom.y),t.bezierCurveTo(cp1X,cp1Y,cp2X,cp2Y,e.nodeTo.x,e.nodeTo.y),t.strokeShape(this),t.moveTo(e.nodeFrom.x,e.nodeFrom.y),t.beginPath(),t.arc(e.nodeFrom.x-4,e.nodeFrom.y,4,0,2*Math.PI),t.fillShape(this),t.moveTo(e.nodeTo.x,e.nodeTo.y),t.beginPath(),t.arc(e.nodeTo.x,e.nodeTo.y,4,0,2*Math.PI),t.fillShape(this)},stroke:"#eed4d8",fill:"#eed4d8",lineCap:"round",strokeWidth:1.7,listening:!1});this.shape=i,nodesLayer.add(i),this.getBoundingBox=function(){var t=n.getStartEndPoints(),e=t.nodeFrom,i=t.nodeTo;return e.y<i.y?{x1:e.x-5,y1:e.y-5,x2:i.x+5,y2:i.y+5}:{x1:e.x-5,y1:i.y-5,x2:i.x+5,y2:e.y+5}}},Tree=function(){this.rootNode,this.nodes=[],this.busy=!1,this.selectedNode,this.editedNode,this.targetNode,this.rootNodeReady=$.Callbacks("unique"),this.readyForNextLevel=$.Callbacks("unique"),this.autoLoad=!1,this.autoLoadCurrentDepth,this.targetMode=!1,"undefined"!=typeof action&&"goto"==action&&(this.autoLoad=!0),this.rootNodeReady.add(function(){1==tree.autoLoad&&(ga("send","event","gotoSkill"),$("#kinetic, #backdrop").css("visibility","visible").fadeIn({duration:500}),tree.autoLoadCurrentDepth=0,tree.readyForNextLevel.fire())}),this.readyForNextLevel.add(function(){if(tree.autoLoad)if(tree.autoLoadCurrentDepth!=jsonAutoLoad.data.length){var t=jsonAutoLoad.data[tree.autoLoadCurrentDepth].children;0==tree.autoLoadCurrentDepth?tree.rootNode.select():tree.nodes[jsonAutoLoad.data[tree.autoLoadCurrentDepth].uuid].select(),camera.checkCameraPosition(tree.selectedNode),tree.selectedNode.totalChildren=t.length,tree.selectedNode.open=!0,tree.selectedNode.setVisualState("glow-children");var e=0,n=!1;t.forEach(function(i){++e==t.length&&(n=!0),new Node(i,{parent:tree.selectedNode,rank:e,count:t.length,isLast:n})}),tree.autoLoadCurrentDepth++}else tree.nodes[jsonAutoLoad.data[tree.autoLoadCurrentDepth-1].selectedSkill].select(),tree.selectedNode.setVisualState("glow-nochildren"),tree.autoLoad=!1,camera.checkCameraPosition(tree.selectedNode)})};Tree.prototype.countCachedNodes=function(){var t=0,e=0;for(var n in tree.nodes){var i=tree.nodes[n];i.cached?t++:e++}console.log("Nodes cached : "+t),console.log("Nodes not cached : "+e)},Tree.prototype.enterTargetMode=function(){tree.targetMode=!0;for(var t in tree.nodes){var e=tree.nodes[t];e.isEdited||tree.editedNode.parent==e||e.setVisualState(e.visualState)}stage.draw()},Tree.prototype.exitTargetMode=function(){tree.targetNode!==void 0&&tree.targetNode.unsetTarget(),tree.targetMode=!1;for(var t in tree.nodes){var e=tree.nodes[t];e.setVisualState(e.visualState)}stage.draw()},Tree.prototype.executeMoveCopy=function(){tree.editedNode.parent.childrenMarkedForDeleteCount++;var t=tree.targetNode.getSiblingMatch("isInPath",!0);t!==void 0&&t.contract({noAnim:!0}).deSelect(),1==tree.targetNode.isInPath&&tree.targetNode.depth<tree.editedNode.depth&&tree.targetNode.contract({noAnim:!0}).deSelect();var e={uuid:tree.editedNode.id,name:tree.editedNode.name,slug:tree.editedNode.slug,depth:tree.targetNode.depth+1},n=tree.targetNode;tree.exitTargetMode(),tree.editedNode.deleteFromDB(),n.createNewChild(e)},Tree.prototype.sanityCheck=function(){var t=[],e="selectedNode",n=[],i=tree.selectedNode;i.isSelected!==!0&&n.push("isSelected is false, should be true"),i.open!==!0&&n.push("open is false, should be true"),i.isInPath!==!0&&n.push("isInPath is false, should be true");var r=tree.sanityCheckErrors(e,n);r===!1&&t.push(e);var e="sn siblings",o=[];null!==i.parent&&i.parent.getChildren().length!==i.getSiblings().length+1&&o.push("selectedNode's parent children count doesn't match selectedNode's siblings count (+1)"),i.getSiblings().forEach(function(t){t.open===!0&&o.push("sibling of selectedNode ("+t.name+") is open, it shouldn't be"),t.isSelected===!0&&o.push("sibling of selectedNode ("+t.name+") isSelected, it shouldn't be"),t.isInPath===!0&&o.push("sibling of selectedNode ("+t.name+") isInPath, it shouldn't be"),t.freeSlots.length>0&&o.push("sibling of selectedNode ("+t.name+") shouldn't have freeSlots because it's closed")});var r=tree.sanityCheckErrors(e,o);r===!1&&t.push(e);var e="editedNode tests",s=[];tree.editedNode!==void 0&&0===tree.editedNode.parent.getChildren().length&&s.push("editedNode's parent ("+tree.editedNode.parent.name+") has no children"),"block"===$("#panel").css("display")&&tree.editedNode===void 0&&s.push("panel is open but there is no editedNode");var r=tree.sanityCheckErrors(e,s);return r===!1&&t.push(e),0===t.length?(console.log("Sanity check passed"),!0):(console.error("Sanity check failed"),!1)},Tree.prototype.sanityCheckErrors=function(t,e){var n=!0;if(e.length>0){console.log("Errors on "+t),n=!1;for(var i in e)console.log(e[i])}return n};var Panel=function(t,e){this.initParams=e,this.$subPanels={},this.$activeSubpanel,this.locked=!1;var n=this,i="user";$("#panel").height($("#kinetic").height()-$("#footer").height()-15),$.ajax({url:baseUrl+"panel/getPanel/"+t.id+"/"}).done(function(t){$("#panel").empty().append(t),$("#panel .panel-content").each(function(t,e){subPanelId=$(e).attr("id"),n.$subPanels[subPanelId]=$(e),n.initSubPanel(e),n.loadSubPanelEvents(e,i)}),camera.panelOffset=$("#panel").outerWidth(),$("#panel").show("slide",{direction:"right",complete:function(){n.$activeSubpanel=n.$subPanels["first-panel"],n.initParams.onComplete(),n.setOrUpdateScrollbar()
}})}),this.close=function(t){n.closePanelModal(),$("#panel").hide("slide",{direction:"right",complete:function(){n.$activeSubpanel.hide(),t.onComplete(),camera.panelOffset=0}})},this.showErrors=function(t){var e='<div class="modal-content">';if(e+='<a href="#" class="panelModalRemoveBtn"></a>',t.message!==void 0){e+="<h5>"+t.message+"</h5>";for(var i in t.data.errors)t.data.errors.hasOwnProperty(i)&&(e+=t.data.errors[i]+"<br />")}else e+="<h5>"+jt.error+"</h5>";e+="</div>",n.addPanelModal(e)},this.showWarning=function(t,e){var n='<div class="modal-content warning">';n+='<a href="#" class="panelModalRemoveBtn"></a>',n+="<p>"+t+"</p>",n+='<button class="panelModalOkBtn">'+jt.ok+"</button>",n+="</div>",this.addPanelModal(n,e)},this.showMessage=function(t){this.$activeSubpanel.find(".message-zone").html(t).css("display","block"),window.setTimeout(function(){$(".message-zone").fadeOut("fast")},3e3)},this.addPanelModal=function(t,e){var i=$('<div class="panelModal">');i.html(t).hide(),i.css({width:$("#panel").width(),height:$("#panel").height()}),$("#panel").append(i),i.fadeIn(200),$(".panelModalRemoveBtn, .panelModalOkBtn").on("tap click",function(t){t.preventDefault(),n.closePanelModal(),e!==void 0&&e()})},this.closePanelModal=function(){$(".panelModal").remove()},this.loadSubPanelEvents=function(e){var i=$(e).attr("id");switch(i){case"first-panel":$(e).children("a.panel-btn").each(function(t,e){$(e).on("tap click",function(){var t=$(e).data("panel");return n.$activeSubpanel.find(".scrollbar").css("display","none"),n.$activeSubpanel.hide("slide",{direction:"left"}),n.$activeSubpanel=$("#"+t),n.panelPreloadEvents(),$("#"+t).show("slide",{direction:"right"},function(){n.panelLoadEvents(),n.setOrUpdateScrollbar(),ga("send","event","panelLoad",t),$("body").hasClass("anonymous")&&"share-skill-panel"!=t&&"skill-history-panel"!=t&&n.addPanelModal('<div class="modal-content"><h5>'+jt.panel.haveToBeSigned+"</h5>"+'<a class="login-link" href="../login/">'+jt.panel.signIn+"</a> "+jt.or+' <a class="register-link" href="../register/">'+jt.panel.createAccount+"</a>"+"</div>")}),!1})});break;case"create-skill-panel":$(e).find(".img-btn").on("tap click",function(){$(e).find("#creationType").val($(this).data("value")),$(e).find("#skillParentUuid").val($(this).data("parentuuid")),$(e).find(".img-btn").toggleClass("selected"),"child"===$(e).find("#creationType").val()?$(e).find("#childrenCapAlert").show():$(e).find("#childrenCapAlert").hide()}),$("#create-skill-form").on("submit",$.proxy(function(t){t.preventDefault(),this.locked=!0,$.ajax({url:$("#create-skill-form").attr("action"),type:$("#create-skill-form").attr("method"),data:$("#create-skill-form").serialize()}).done(function(t){if("ok"==t.status){$("#create-skillName").val(""),n.showMessage(t.message),ga("send","event","nodeCreate",t.data.skill.name),n.checkChildrenCaps({response:t});var i=$(e).find("#creationType").val();"child"==i?tree.editedNode.createNewChild(t.data.skill):"parent"==i&&($("#creationTypeParent").data("parentuuid",t.data.skill.uuid),$("#skillParentUuid").val(t.data.skill.uuid),tree.editedNode.createNewParent(t.data.skill))}else n.showErrors(t);n.locked=!1})},this));break;case"move-skill-panel":$("#move-skill-form").on("submit",function(t){t.preventDefault(),n.locked=!0,$.ajax({url:$("#move-skill-form").attr("action"),type:$("#move-skill-form").attr("method"),data:$("#move-skill-form").serialize()}).done(function(t){"ok"==t.status?(n.showMessage(t.message),ga("send","event","nodeMove",tree.editedNode.name),n.checkChildrenCaps({response:t,afterCheckCallback:tree.executeMoveCopy})):n.showErrors(t),n.locked=!1})});break;case"rename-skill-panel":$("#rename-skill-form").on("submit",function(t){t.preventDefault(),n.locked=!0,$.ajax({url:$("#rename-skill-form").attr("action"),type:$("#rename-skill-form").attr("method"),data:$("#rename-skill-form").serialize()}).done(function(t){"ok"==t.status?($("#rename-skillName").val(""),$("#panel .skillName").html('"'+t.data.name+'"'),n.showMessage(t.message),ga("send","event","nodeRename",tree.editedNode.name,t.data.name),tree.editedNode.setName(t.data.name)):n.showErrors(t),n.locked=!1})});break;case"skill-settings-panel":$("#skill-settings-form").on("submit",function(t){t.preventDefault(),n.locked=!0,$.ajax({url:$("#skill-settings-form").attr("action"),type:$("#skill-settings-form").attr("method"),data:$("#skill-settings-form").serialize()}).done(function(t){"ok"==t.status?(n.showMessage(t.message),ga("send","event","settingsChanged",tree.editedNode.name)):n.showErrors(t),n.locked=!1})});break;case"delete-skill-panel":$("#delete-skill-form-submit").hide(),$("input[name=sureToDelete]").on("change",function(){$("#delete-fake-radio").toggleClass("yes no"),$("#delete-skill-form-submit").toggle()}),$("#delete-fake-radio").on("tap click",function(t){var e=$(this).offset(),n=t.clientX-e.left;24>n?$("#yes-sureToDelete-label").click():$("#no-sureToDelete-label").click()}),$("#delete-skill-form").on("submit",function(t){t.preventDefault(),n.locked=!0,$.ajax({url:$("#delete-skill-form").attr("action"),type:$("#delete-skill-form").attr("method"),data:$("#delete-skill-form").serialize()}).done(function(t){if("ok"==t.status){var e=tree.editedNode;ga("send","event","nodeDelete",tree.editedNode.name),e.finishEdit(),e.deleteFromDB(),n.showMessage(t.message)}else n.showErrors(t);n.locked=!1})});break;case"translate-skill-panel":$("#translate-skill-form").on("submit",function(e){e.preventDefault(),n.locked=!0,$.ajax({url:$("#translate-skill-form").attr("action"),type:$("#translate-skill-form").attr("method"),data:$("#translate-skill-form").serialize()}).done(function(e){"ok"==e.status?($("#skillTrans").val(""),n.showMessage(e.message),$.ajax({url:baseUrl+"panel/reloadTranslations/"+t.id+"/"}).done(function(t){$("#other-translations-list").html(t),n.setOrUpdateScrollbar()})):n.showErrors(e),n.locked=!1})});break;case"discuss-skill-panel":$("#discuss-skill-form").on("submit",function(e){e.preventDefault(),n.locked=!0,$.ajax({url:$("#discuss-skill-form").attr("action"),type:$("#discuss-skill-form").attr("method"),data:$("#discuss-skill-form").serialize()}).done(function(e){"ok"==e.status?($("#discuss-message").val(""),$.ajax({url:baseUrl+"panel/reloadDiscussionMessages/"+t.id+"/"}).done(function(t){$(".discuss-prev-messages").html(t),n.setOrUpdateScrollbar()})):n.showErrors(e),n.locked=!1})});break;case"share-skill-panel":$("#skill-permalink-input").on("tap click",function(){$(this).select()})}$(e).find(".back-to-panel-btn").on("tap click",$.proxy(function(t){t.preventDefault(),this.locked!==!0&&($(e).hide("slide",{direction:"right",complete:function(){n.$subPanels["first-panel"].find(".scrollbar").css("display","block")}}),$("#first-panel").show("slide",{direction:"left"}),n.$activeSubpanel=n.$subPanels["first-panel"],1==tree.targetMode&&tree.exitTargetMode())},this)),$(e).find(".close-panel-btn").on("tap click",$.proxy(function(t){t.preventDefault(),this.locked!==!0&&((1==tour.isActive||1==doTour)&&tour.actionOnTree("close-panel"),1==tree.targetMode&&tree.exitTargetMode(),tree.editedNode.finishEdit())},this))},this.initSubPanel=function(t){var e=$(t).attr("id");$(t).css({position:"absolute",width:$("#panel").width()}),"first-panel"!=e&&$(t).hide()}};Panel.prototype.panelLoadEvents=function(){var t=tree.editedNode.panel;switch(t.$activeSubpanel[0].id){case"move-skill-panel":$(t.$activeSubpanel).find("#move-step2").css("display","block"),tree.enterTargetMode()}},Panel.prototype.panelPreloadEvents=function(){var t=tree.editedNode.panel;switch(t.$activeSubpanel[0].id){case"skill-history-panel":$.ajax({url:$("#skill-history-form").attr("action"),type:$("#skill-history-form").attr("method"),data:$("#skill-history-form").serialize()}).done(function(t){$("#skill-history-content").empty().append(t)})}},Panel.prototype.setOrUpdateScrollbar=function(){this.$activeSubpanel[0].scrollBarLoaded===void 0&&(this.$activeSubpanel.wrapInner("<div class='viewport'><div class='overview'></div></div>"),this.$activeSubpanel.find(".viewport").before("<div class='scrollbar'><div class='track'><div class='thumb'><div class='end'></div></div></div></div>")),this.$activeSubpanel.find(".viewport").css({width:this.$activeSubpanel.width(),height:$("#panel").height()}),this.$activeSubpanel.find(".overview").css({width:this.$activeSubpanel.width()}),1==this.$activeSubpanel[0].scrollBarLoaded?this.$activeSubpanel.data("plugin_tinyscrollbar").update():this.$activeSubpanel.tinyscrollbar(),this.$activeSubpanel[0].scrollBarLoaded=!0},Panel.prototype.checkChildrenCaps=function(t){var e=t.response,n=t.afterCheckCallback!==void 0?t.afterCheckCallback:function(){};if(e.data.parent.childrenCount+1==e.data.parent.capNoMore){var i=jt.panel.capNoMore.replace("%%%IDEAL%%%",e.data.parent.capIdealMax);i=i.replace("%%%PARENTNAME%%%",e.data.parent.translations[jt.currentLang]),i=i.replace("%%%NOMORE%%%",e.data.parent.capNoMore),this.showWarning(i+"<p>"+jt.panel.capsDiscuss+"</p>",n)}else if(e.data.parent.childrenCount+1>=e.data.parent.capAlert){var i=jt.panel.capAlert.replace("%%%IDEAL%%%",e.data.parent.capIdealMax);i=i.replace("%%%PARENTNAME%%%",e.data.parent.translations[jt.currentLang]),i=i.replace("%%%NOMORE%%%",e.data.parent.capNoMore),this.showWarning(i+"<p>"+jt.panel.capsDiscuss+"</p>",n)}else if(e.data.parent.childrenCount+1>e.data.parent.capIdealMax){var i=jt.panel.capIdealMax.replace("%%%IDEAL%%%",e.data.parent.capIdealMax);i=i.replace("%%%PARENTNAME%%%",e.data.parent.translations[jt.currentLang]),this.showWarning(i+"<p>"+jt.panel.capsDiscuss+"</p>",n)}else n()};var Camera=function(){this.defaultSecurityZoneFactor=.3,this.redrawStageInterval,this.rectZone,this.scale=1,this.zoomFactor=1,this.origin={x:0,y:0},this.zoomTween,this.lastZoom=(new Date).getTime(),this.panelOffset=0,this.footerOffset=0,this.backgroundImage,this.backStars,this.backStage,this.backLayer,this.dummyShape;var t=this;$("#kinetic").on("mousewheel",function(e){if(e.preventDefault(),1!=tour.isActive&&1!=doTour&&!(.15>=t.scale&&0>e.deltaY||t.scale>=1.6&&e.deltaY>0)){var n=(new Date).getTime()-camera.lastZoom;if(n>100)var i=1;else if(n>60&&100>=n)var i=1.2;else if(n>50&&60>=n)var i=2;else if(n>40&&50>=n)var i=3;else if(n>30&&40>=n)var i=5;else if(30>=n)var i=6;i*=.1;var r=e.originalEvent,o=r.clientX-stage.x(),s=r.clientY-stage.y()-$("#header").height(),a=t.zoomFactor-(0>e.deltaY?.02:-.02)*e.deltaFactor*i;if(!(0>a)){var c=t.scale*a;t.origin.x=o/t.scale+t.origin.x-o/c,t.origin.y=s/t.scale+t.origin.y-s/c,t.scale*=a,nodesLayer.offsetX(t.origin.x),nodesLayer.offsetY(t.origin.y),nodesLayer.scaleX(c),nodesLayer.scaleY(c),nodesLayer.batchDraw(),camera.lastZoom=(new Date).getTime()}}}),this.checkCameraPosition=function(t,e){e===void 0&&1==t.open&&(e=Object.keys(t.children).length);var n=camera.getSecurityZone(camera.defaultSecurityZoneFactor);if(e===void 0)var i=t.getBoundingBox();else var i=t.getBoundingBox(e);var r=camera.isBoxOnScreen(i,n,!1);if(0==r.x&&0==r.y)var o="xy";else if(0==r.x)var o="x";else if(0==r.y)var o="y";else o=!1;o&&camera.goToCoords({x:t.shapes.x()+t.sizes.totalWidth/2,y:t.shapes.y()+t.sizes.totalHeight/2},o)},this.goToCoords=function(e,n){var i="x"==n||"xy"==n?stage.width()/2-(e.x-nodesLayer.offsetX()+camera.panelOffset/2)*t.scale:stage.x(),r="y"==n||"xy"==n?stage.height()/2-(e.y-nodesLayer.offsetY()+camera.footerOffset/2)*t.scale:stage.y(),o=new Kinetic.Tween({node:stage,y:r,duration:.25,easing:Kinetic.Easings.Linear,onFinish:function(){var e=new Kinetic.Tween({node:stage,x:i,duration:.25,easing:Kinetic.Easings.Linear,onFinish:function(){camera.cacheInvisibleNodes(),clearInterval(t.redrawStageInterval),t.redrawStageInterval=null,tour.isActive===!0&&tour.updateLegPositionsAfterCameraMove()}});e.play()}});o.play()},this.moveStageBy=function(t){var e=new Kinetic.Tween({node:stage,x:stage.x()+t.x,y:stage.y()+t.y,duration:.25,easing:Kinetic.Easings.Linear,onFinish:function(){camera.cacheInvisibleNodes()}});camera.animateStage(.25),e.play()},this.cacheInvisibleNodes=function(){var t=camera.getSecurityZone(0),e=Object.keys(tree.nodes);for(var n in e){var i=tree.nodes[e[n]],r=camera.isBoxOnScreen(i.getBoundingBox(),t,!0);r||i.cached?r&&i.cached&&i.clearCache():i.cache()}nodesLayer.draw()},this.getSecurityZone=function(e){if(null==e)var e=t.defaultSecurityZoneFactor;var n={minX:Math.round(-stage.x()+stage.width()/2*e)/t.scale+nodesLayer.offsetX(),maxX:Math.round(-stage.x()+stage.width()-stage.width()/2*e-camera.panelOffset)/t.scale+nodesLayer.offsetX(),minY:Math.round(-stage.y()+stage.height()/2*e)/t.scale+nodesLayer.offsetY(),maxY:Math.round(-stage.y()+stage.height()-stage.height()/2*e-camera.footerOffset)/t.scale+nodesLayer.offsetY()};return n},this.isBoxOnScreen=function(t,e,n){var i=Object.keys(t).length,r=e;switch(i){case 4:var o=t;if(0==n){if(o.x1<r.minX||o.x2>r.maxX)var s=!1;else var s=!0;if(o.y1<r.minY||o.y2>r.maxY)var a=!1;else var a=!0;return{x:s,y:a}}return o.x1<r.minX&&o.x2<r.minX||o.y1<r.minY&&o.y2<r.minY||o.x1>r.maxX&&o.x2>r.maxX||o.y1>r.maxY&&o.y2>r.maxY?!1:!0;case 2:var c=t;return c.y1<r.minY||c.x1<r.minX||c.x1>r.maxX||c.y1>r.maxY?!1:!0}},this.initDragEvents=function(){stage.on("dragstart",function(){panStartCoords=stage.getPointerPosition(),panLayerStartCoords={x:camera.backLayer.x(),y:camera.backLayer.y()},panBackImageStartCoords={x:0,y:camera.backgroundImage.y()}}),stage.on("dragmove",function(){panCurCoords=stage.getPointerPosition(),panDistanceX=panCurCoords.x-panStartCoords.x,panDistanceY=panCurCoords.y-panStartCoords.y,distToTop=-camera.backgroundImage.y(),distToBottom=camera.backgroundImage.height()+camera.backgroundImage.y()-stage.getHeight();var t=distToBottom>distToTop?distToTop:distToBottom;camera.backgroundImage.y(panBackImageStartCoords.y+panDistanceY/(2e3/t)),camera.backLayer.batchDraw()}),stage.on("dragend",function(){backLayerOffset={x:0,y:panDistanceY},camera.cacheInvisibleNodes()}),$("#kinetic").mousemove(function(){camera.backStars.x(Math.round((stage.getPointerPosition().x+camera.backStars.x())/60)),camera.backStars.y(Math.round((stage.getPointerPosition().y+camera.backStars.y())/60)),camera.backStars.batchDraw()}),this.dummyShape=new Kinetic.Rect({width:100,height:100,x:0,y:0})},this.skySetup=function(){camera.backStage=new Kinetic.Stage({container:"backdrop",width:$("#kinetic").width(),height:$("#kinetic").height()}),camera.backLayer=new Kinetic.Layer;var t=stage.getWidth(),e=stage.getHeight()+500,n=new Kinetic.Rect({x:0,y:-500,width:t,height:e+500,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:0,y:e},fillLinearGradientColorStops:[0,"#4a2f52",.7,"#e67b88",1,"#b66fb0"]});camera.backgroundImage=n,camera.backLayer.add(n),camera.drawStars(t,e),camera.backStage.listening(!1),camera.backStage.add(camera.backLayer,camera.backStars),camera.backStage.draw()}};Camera.prototype.drawStars=function(t,e){for(camera.backStars===void 0?camera.backStars=new Kinetic.Layer:camera.backStars.destroyChildren(),i=0;150>i;i++){var n=new Kinetic.Circle({radius:1.6*Math.random(),fill:"white",x:Math.round(Math.random()*t),y:Math.round(Math.random()*(e-500)/2)});camera.backStars.add(n)}},Camera.prototype.resizeElements=function(){var t=$(window).width(),e=$(window).height()-$("#header").height();if($("#kinetic, #backdrop").width(t).height(e),$("body").height(e),camera.backStage.width(t),camera.backStage.height(e),stage.width(t),stage.height(e),camera.backgroundImage.width(t),camera.backgroundImage.height(e+500),camera.drawStars(t,e+500),camera.backStage.draw(),tree.editedNode!==void 0?camera.checkIfPanelBlocksEditedNode():(camera.animateStage(.5),camera.checkCameraPosition(tree.selectedNode)),tree.editedNode!==void 0){var n=e-$("#footer").height()-15;$("#panel").height(n),tree.editedNode.panel.setOrUpdateScrollbar()}camera.cacheInvisibleNodes(),tour.isActive===!0&&tour.overlay.css({width:$(window).width(),height:$("#kinetic").height()})},Camera.prototype.animateStage=function(t){var e=new Kinetic.Tween({node:camera.dummyShape,x:camera.dummyShape.x()+100,duration:t,opacity:0});e.play()},Camera.prototype.checkIfPanelBlocksEditedNode=function(){var t=tree.editedNode.isBlockedByPanel();0!=t&&camera.moveStageBy({x:-t-50,y:0})};var Search=function(){var t=this;this.researchPending=!1,this.jqxhr,this.q="",$(document).ready(function(){$("#kw-input").on("keyup",t.autocomplete),$("#autocomplete-container").on("click","a",t.searchResultClicked),$("body").on("click",t.close),$("#search-form").on("submit",function(t){t.preventDefault()})}),this.searchResultClicked=function(t){t.preventDefault(),(1==tour.isActive||1==doTour)&&tour.actionOnTree("search-click");var e=$(this).data("slug");ga("send","event","searchResultClicked",$(this).data("name"));var n=baseUrl+"api/getNodePathToRoot/"+e+"/",i=tree.rootNode.isNodeOnScreen()?!1:!0;$.ajax({url:n}).done(function(t){jsonAutoLoad=t,tree.selectedNode&&tree.selectedNode.deSelect(),tree.rootNode.contract({noAnim:i,onComplete:function(){camera.checkCameraPosition(tree.rootNode),tree.autoLoad=!0,tree.autoLoadCurrentDepth=0,tree.readyForNextLevel.fire()}})})},this.close=function(){$("#search-results").slideUp(100)},this.autocomplete=function(e){return e.preventDefault(),t.q=$("#kw-input").val(),3>t.q.length||t.researchPending?(t.close(),!1):(t.jqxhr!==void 0&&t.jqxhr.abort(),t.jqxhr=$.ajax({url:$("#search-form").attr("action"),data:$("#search-form").serialize(),method:$("#search-form").attr("method")}).done(function(e){t.showResult(e),t.researchPending=!1}),void 0)},this.showResult=function(e){if(0>=e.data.length)return!1;var n,r,o=$("<ul>");for(uuid in e.data)gp=e.data[uuid].gp?e.data[uuid].gp+" > ":"",r=$("<a>").attr("href","#").data("name",e.data[uuid].name).data("uuid",uuid).data("slug",e.data[uuid].slug).html('<div class="search-result-name">'+e.data[uuid].name+"</div>"+gp+e.data[uuid].parent),n=$("<li>").html(r),o.append(n);$("#search-results").html(o);var s=t.q.split(" ");for(i in s)$(".search-result-name").highlight(s[i]);$("#search-results").slideDown(100)}},User=function(){$(document).ready(function(){$("body").on("click",".register-link",function(t){t.preventDefault(),user.clickedHref=$(this).attr("href"),user.showForm(),ga("send","event","uiAction","registerLink")}),$("body").on("click",".change-password-link",function(t){t.preventDefault(),user.clickedHref=$(this).attr("href"),user.showForm(),ga("send","event","uiAction","changePasswordLink")}),$("body").on("click",".login-link",function(t){t.preventDefault(),user.clickedHref=$(this).attr("href"),user.showForm(),ga("send","event","uiAction","loginLink")}),$("body").on("click",".forgot-passowrd-link",function(t){t.preventDefault(),user.clickedHref=$(this).attr("href"),user.showForm(),ga("send","event","uiAction","forgotPasswordLink")}),$("body").on("submit","#modal-wrapper form",function(t){t.preventDefault(),user.ajaxSubmit(this)})})};User.prototype.clickedHref="",User.prototype.showModal=function(t){$.modal.close(),$.modal("<div>"+t+"</div>",{overlayClose:!0,opacity:70})},User.prototype.showForm=function(){loader!==void 0&&loader.show(),$.ajax({url:user.clickedHref,success:function(t){loader!==void 0&&loader.hide(),user.showModal(t)}})},User.prototype.ajaxSubmit=function(t){loader!==void 0&&loader.show(),$.ajax({url:$(t).attr("action"),type:$(t).attr("method"),data:$(t).serialize(),success:function(t){loader!==void 0&&loader.hide(),"ok"==t.status?t.data.redirectTo&&(window.location.href=t.data.redirectTo):user.showModal(t)}})};var Tour=function(){this.tourObj,this.legIndex=-1,this.isActive=!1,this.legActions=[],this.firstSkill,this.overlay};Tour.prototype.start=function(){this.overlay=$("<div></div>").css({position:"absolute",top:$("#kinetic").position().top,left:0,width:$(window).width(),height:$("#kinetic").height(),opacity:.7,backgroundColor:"#000"}),$("body").append(this.overlay),tour.isActive=!0,tour.firstSkill=tree.rootNode.children[Object.keys(tree.rootNode.children)[0]],tour.setPositions(),tour.tourObj=$("#my-tour-id").tourbus({onLegStart:function(t){"right"==t.rawData.orientation&&$(t.$el[0]).css("left",t.rawData.left),t.rawData.arrow!==void 0&&t.rawData.arrow===!1&&$(t.el).removeClass("tourbus-arrow");var e=tour.getUpdatedPositionForLeg(t);return tour.overrideLegPosition(t,e),0===t.index&&t.$el.css("box-shadow","0 0 23px -5px #1adae6"),2!==t.index&&t.$el.css({visibility:"visible",opacity:0,zIndex:9999}).animate({opacity:.8},300,function(){t.show()}),tour.legIndex++,!1},onLegEnd:function(t,e){tour.isActive===!0&&e.running===!0&&tour.nextLeg(t,e)},onStop:function(){tour.overlay.fadeOut({duration:1e3}),tour.isActive=!1,doTour=!1,tour.legIndex=-1,tour.tourObj[0].remove(),$("#tourbus-0").remove(),stage.draggable(!0)}}),tour.tourObj.trigger("depart.tourbus")},Tour.prototype.getUpdatedPositionForLeg=function(t){switch(t.index){case 0:return{top:$("#kinetic").position().top+tree.rootNode.shapes.y()+tree.rootNode.sizes.labelHeight/2-50,left:$("#kinetic").position().left+tree.rootNode.shapes.x()+tree.rootNode.sizes.labelWidth+350};case 1:return tour.overlay.fadeOut({duration:1e3}),{top:$("#kinetic").position().top+tour.firstSkill.shapes.y(),left:$("#kinetic").position().left+tour.firstSkill.shapes.x()+tour.firstSkill.sizes.totalWidth+20};case 2:return{top:$("#kinetic").position().top+$("#kinetic").height()/2-$("#footer").height()+20-stage.y(),left:$("#kinetic").position().left+tour.firstSkill.shapes.x()};case 3:return{top:$("#kinetic").position().top+20,left:$("#kinetic").width()-$(t.$el).width()-390}}},Tour.prototype.setPositions=function(){$("#tour-leg1").data("orientation","right"),$("#tour-leg2").data("orientation","right").data("arrow","25%"),$("#tour-leg3").data("orientation","top").data("arrow","12%"),$("#tour-leg4").data("orientation","left")},Tour.prototype.actionOnTree=function(t,e){switch(t){case"label-click":if(1==tour.legActions[1])return tour.legActions=[],void 0;1==tour.legIndex?tour.firstSkill==e?tour.tourObj.trigger("next.tourbus"):tour.endTour():tour.endTour();break;case"plus-click":if(1==tour.legActions[2])return tour.legActions=[],void 0;2==tour.legIndex?tour.firstSkill==e?tour.tourObj.trigger("next.tourbus"):tour.endTour():tour.endTour();break;default:doTour=!1,tour.isActive&&tour.endTour()}},Tour.prototype.nextLeg=function(t){switch(t.index){case 0:break;case 1:tour.legActions[t.index]=!0,tour.firstSkill.labelGroup.fire("click");break;case 2:tour.legActions[t.index]=!0,tour.firstSkill.editButton.fire("click");break;case 3:tour.isActive=!1,tour.legIndex=-1}},Tour.prototype.endTour=function(){tour.isActive=!1,tour.tourObj.trigger("stop.tourbus")},Tour.prototype.overrideLegPosition=function(t,e){$(t.$el[0]).css("left",e.left),$(t.$el[0]).css("top",e.top)},Tour.prototype.updateLegPositionsAfterCameraMove=function(){if(2===this.legIndex){var t=tour.tourObj.data("tourbus").legs[this.legIndex],e=tour.getUpdatedPositionForLeg(t);tour.overrideLegPosition(t,e),t.$el.css({visibility:"visible",opacity:0,zIndex:9999}).animate({opacity:.8},500,function(){t.show()})}};var Loader=function(t){var t=t!==void 0?t:{};this.color=t.color!==void 0?t.color:"#fef7f9",this.diameter=t.diameter!==void 0?t.diameter:47,this.density=t.density!==void 0?t.density:22,this.range=t.range!==void 0?t.range:1.2,t.css!==void 0&&$("#loader").css(t.css),this.isVisible=!1,this.isWaitingToShow=!1,this.timer,this.cl};Loader.prototype.show=function(){this.cl===void 0&&this.isVisible===!1&&this.isWaitingToShow===!1&&($("#loader").show(),this.isWaitingToShow=!0,this.timer=setTimeout(function(){loader.cl=new CanvasLoader("loader"),loader.cl.setColor(loader.color),loader.cl.setShape("spiral"),loader.cl.setDiameter(loader.diameter),loader.cl.setDensity(loader.density),loader.cl.setRange(loader.range),loader.cl.setSpeed(1),loader.cl.setFPS(30),loader.cl.show(),this.isVisible=!0,this.isWaitingToShow=!1},200))},Loader.prototype.hide=function(){this.isWaitingToShow===!0&&(clearTimeout(this.timer),this.isVisible=!1,this.isWaitingToShow=!1),this.cl!==void 0&&(this.cl.kill(),this.isVisible=!1,this.isWaitingToShow=!1,delete this.cl),$("#loader").hide()};var FPSCounter=function(){this.currentFPS=0,this.startTime=0,this.frames=0,this.running=!1,this.averageSent=!1,this.readings=[]};FPSCounter.prototype.start=function(){"undefined"!=typeof requestAnimationFrame&&this.running!==!0&&this.averageSent!==!0&&(this.running=!0,this.startTime=Date.now(),requestAnimationFrame($.proxy(this.countFrames,this)))},FPSCounter.prototype.end=function(){if(this.running!==!1&&this.averageSent!==!0){var t=Date.now()-this.startTime;this.currentFPS=Math.round(this.frames/(t/1e3)),this.saveFPS(),this.running=!1,this.reset()}},FPSCounter.prototype.countFrames=function(){"undefined"!=typeof requestAnimationFrame&&(this.frames++,this.running===!0&&requestAnimationFrame($.proxy(this.countFrames,this)))},FPSCounter.prototype.saveFPS=function(){if("undefined"!=typeof requestAnimationFrame&&(this.readings.push(this.currentFPS),5===this.readings.length)){var t=0;for(readingIndex in this.readings)t+=this.readings[readingIndex];var e=Math.round(10*(t/this.readings.length))/10;ga("send","event","averageFPS","5-readings",e),this.averageSent=!0}},FPSCounter.prototype.reset=function(){"undefined"!=typeof requestAnimationFrame&&(this.currentFPS=0,this.startTime=0,this.frames=0)};var Editor=function(){};Editor.prototype.init=function(){loader=new Loader({color:"black",diameter:30})},Editor.prototype.loadEvents=function(){$("#editor-tabs-nav a").on("click tap",function(t){t.preventDefault(),$("#editor-tabs-nav li").removeClass("selected"),$(this).parent().addClass("selected"),$(".editor-dashboard-content").hide(),$.ajax({url:$(this).attr("href")}).done(function(t){$("#tab-content").html(t)}),$("#"+$(this).data("tab")).show(),ga("send","event","editor","loadTab",$(this).data("tab"))}),$("#editor-tabs-nav li:first-child a").trigger("click"),$(document).on("click tap","a#show-more",function(t){t.preventDefault(),$.ajax({url:$(this).attr("href"),type:"GET",data:{skip:$(this).data("skip"),limit:$(this).data("limit")}}).done(function(t){var e=$(t).find("#show-more").data("skip"),n=$(t).find("#show-more").data("limit");$("#show-more").data("skip",e),$("#show-more").data("limit",n);var i=$(t).find("tr").splice(1);$("#tab-content table").append(i)}),ga("send","event","editor","showMore",$(this).attr("href"))})};var nodesLayer,backLayer,zoomLevel=1,stage,rootNode,recursiveChildren=[],panStartCoords,panDistanceX,panDistanceY,panLayerStartCoords,backLayerOffset={x:0,y:0},backgroundImage,panBackImageStartCoords,distToBottom,distToTop,doResize,globalSizes={footerHeight:82};if("undefined"!=typeof rootNodeId)var skillWalk=!0;else var skillWalk=!1;if(skillWalk===!0)var tree=new Tree,camera,search=new Search,tour=new Tour,loader=new Loader,fpsCounter=new FPSCounter;if("undefined"!=typeof pageName&&"editor_dashboard"==pageName)var loader,editor;var user=new User,site;$(document).ajaxStart(function(){loader!==void 0&&loader.show()}),$(document).ajaxError(function(){}),$(document).ajaxComplete(function(){loader!==void 0&&loader.hide()}),$(document).ready(function(){site=new Site,skillWalk===!0&&($("#kinetic, #backdrop").hide().width($(window).width()).height($(window).height()-$("#header").height()),$("body").height($(window).height()),$("#preload, #panel, #debug").hide(),camera=new Camera,camera.footerOffset=$("#footer").height(),$(window).resize(function(){clearTimeout(doResize),doResize=setTimeout(camera.resizeElements,300)})),"undefined"!=typeof pageName&&"editor_dashboard"==pageName&&(editor=new Editor,editor.init(),editor.loadEvents())}),$(window).load(function(){"undefined"!=typeof rootNodeId&&(stage=new Kinetic.Stage({container:"kinetic",width:$("#kinetic").width(),height:$("#kinetic").height(),dragDistance:10,fill:"black"}),1==tour.isActive||1==doTour?stage.draggable(!1):stage.draggable(!0),camera.initDragEvents(),camera.skySetup(),nodesLayer=new Kinetic.Layer,stage.add(nodesLayer),new Node({uuid:rootNodeId,name:"Skills"},{parent:null}),nodesLayer.add(camera.dummyShape))});